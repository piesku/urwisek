!function(){function t(t,n){let o=t.o.t();for(let i of n)i(t,o);return o}function n(...n){return(o,i)=>{let e=[];for(let i of n){let n=t(o,i);e.push(n)}o.o.i[i]|=32,o.o.l[i]={l:e}}}function*o(t,n,i){if((t.i[n]&i)===i&&(yield n),32&t.i[n])for(let e of t.l[n].l)yield*o(t,e,i)}function i(t,n){if(32&t.i[n])for(let o of t.l[n].l)i(t,o);t.u(n)}function e(t,n,o){switch(n){case 0:document.fullscreenElement?document.exitFullscreen():document.body.requestFullscreen();break;case 1:{let[n]=o;i(t.o,n),t.h++;break}case 2:t._++}}function r(t,n,o,i){return t.bindTexture(xn,n),t.texImage2D(xn,0,32856,o,i,0,6408,5121,null),t.texParameteri(xn,10241,wn),t.texParameteri(xn,10240,wn),n}function a(t,n,o,i){return t.bindTexture(xn,n),t.texImage2D(xn,0,33190,o,i,0,6402,5125,null),t.texParameteri(xn,10241,wn),t.texParameteri(xn,10240,wn),t.texParameteri(xn,34892,34894),t.texParameteri(xn,10242,33071),t.texParameteri(xn,10243,33071),n}function l(t,n,o){let i={m:t.createFramebuffer(),v:n,g:o,p:r(t,t.createTexture(),n,o),A:a(t,t.createTexture(),n,o)};t.bindFramebuffer(zn,i.m),t.framebufferTexture2D(zn,36096,xn,i.A,0),t.framebufferTexture2D(zn,36064,xn,i.p,0);let e=t.checkFramebufferStatus(zn);if(36053!=e)throw Error(`Failed to set up the framebuffer (${e}).`);return i}function s(t,n,o){let i=t.createProgram();if(t.attachShader(i,f(t,35633,n)),t.attachShader(i,f(t,35632,o)),t.linkProgram(i),!t.getProgramParameter(i,35714))throw Error(t.getProgramInfoLog(i));return i}function f(t,n,o){let i=t.createShader(n);if(t.shaderSource(i,o),t.compileShader(i),!t.getShaderParameter(i,35713))throw Error(t.getShaderInfoLog(i));return i}function c(t,n,o){return Math.max(t,Math.min(n,o))}function u(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function h(t,n){let o=n[0],i=n[1],e=n[2],r=n[3],a=n[4],l=n[5],s=n[6],f=n[7],c=n[8],u=n[9],h=n[10],_=n[11],m=n[12],d=n[13],v=n[14],g=n[15],p=o*l-i*a,y=o*s-e*a,w=o*f-r*a,x=i*s-e*l,A=i*f-r*l,z=e*f-r*s,M=c*d-u*m,T=c*v-h*m,F=c*g-_*m,b=u*v-h*d,C=u*g-_*d,I=h*g-_*v,S=p*I-y*C+w*b+x*F-A*T+z*M;return S?(S=1/S,t[0]=(l*I-s*C+f*b)*S,t[1]=(e*C-i*I-r*b)*S,t[2]=(d*z-v*A+g*x)*S,t[3]=(h*A-u*z-_*x)*S,t[4]=(s*F-a*I-f*T)*S,t[5]=(o*I-e*F+r*T)*S,t[6]=(v*w-m*z-g*y)*S,t[7]=(c*z-h*w+_*y)*S,t[8]=(a*C-l*F+f*M)*S,t[9]=(i*F-o*C-r*M)*S,t[10]=(m*A-d*w+g*p)*S,t[11]=(u*w-c*A-_*p)*S,t[12]=(l*T-a*b-s*M)*S,t[13]=(o*b-i*T+e*M)*S,t[14]=(d*y-m*x-v*p)*S,t[15]=(c*x-u*y+h*p)*S,t):null}function _(t,n,o){let i=n[0],e=n[1],r=n[2],a=n[3],l=n[4],s=n[5],f=n[6],c=n[7],u=n[8],h=n[9],_=n[10],m=n[11],d=n[12],v=n[13],g=n[14],p=n[15],y=o[0],w=o[1],x=o[2],A=o[3];return t[0]=y*i+w*l+x*u+A*d,t[1]=y*e+w*s+x*h+A*v,t[2]=y*r+w*f+x*_+A*g,t[3]=y*a+w*c+x*m+A*p,y=o[4],w=o[5],x=o[6],A=o[7],t[4]=y*i+w*l+x*u+A*d,t[5]=y*e+w*s+x*h+A*v,t[6]=y*r+w*f+x*_+A*g,t[7]=y*a+w*c+x*m+A*p,y=o[8],w=o[9],x=o[10],A=o[11],t[8]=y*i+w*l+x*u+A*d,t[9]=y*e+w*s+x*h+A*v,t[10]=y*r+w*f+x*_+A*g,t[11]=y*a+w*c+x*m+A*p,y=o[12],w=o[13],x=o[14],A=o[15],t[12]=y*i+w*l+x*u+A*d,t[13]=y*e+w*s+x*h+A*v,t[14]=y*r+w*f+x*_+A*g,t[15]=y*a+w*c+x*m+A*p,t}function m(t,n,o,i,e){let r,a=1/Math.tan(n/2);return t[0]=a/o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=e&&e!==1/0?(r=1/(i-e),t[10]=(e+i)*r,t[14]=2*e*i*r):(t[10]=-1,t[14]=-2*i),t}function d(t,n){return t[0]=n[8],t[1]=n[9],t[2]=n[10],z(t,t)}function v(t,n){return t[0]=n[12],t[1]=n[13],t[2]=n[14],t}function g(t,n){let o=function(t,n){let o=n[4],i=n[5],e=n[6],r=n[8],a=n[9],l=n[10];return t[0]=Math.hypot(n[0],n[1],n[2]),t[1]=Math.hypot(o,i,e),t[2]=Math.hypot(r,a,l),t}([0,0,0],n),i=1/o[0],e=1/o[1],r=1/o[2],a=n[0]*i,l=n[1]*e,s=n[2]*r,f=n[4]*i,c=n[5]*e,u=n[6]*r,h=n[8]*i,_=n[9]*e,m=n[10]*r,d=a+c+m,v=0;return d>0?(v=2*Math.sqrt(d+1),t[3]=.25*v,t[0]=(u-_)/v,t[1]=(h-s)/v,t[2]=(l-f)/v):a>c&&a>m?(v=2*Math.sqrt(1+a-c-m),t[3]=(u-_)/v,t[0]=.25*v,t[1]=(l+f)/v,t[2]=(h+s)/v):c>m?(v=2*Math.sqrt(1+c-a-m),t[3]=(h-s)/v,t[0]=(l+f)/v,t[1]=.25*v,t[2]=(u+_)/v):(v=2*Math.sqrt(1+m-a-c),t[3]=(l-f)/v,t[0]=(h+s)/v,t[1]=(u+_)/v,t[2]=.25*v),t}function p(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t}function y(t,n,o){return t[0]=n[0]+o[0],t[1]=n[1]+o[1],t[2]=n[2]+o[2],t}function w(t,n,o){return t[0]=n[0]-o[0],t[1]=n[1]-o[1],t[2]=n[2]-o[2],t}function x(t,n,o){return t[0]=n[0]*o,t[1]=n[1]*o,t[2]=n[2]*o,t}function A(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t}function z(t,n){let o=n[0],i=n[1],e=n[2],r=o*o+i*i+e*e;return r>0&&(r=1/Math.sqrt(r)),t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t}function M(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function T(t,n,o){let i=n[0],e=n[1],r=n[2],a=o[3]*i+o[7]*e+o[11]*r+o[15];return a=a||1,t[0]=(o[0]*i+o[4]*e+o[8]*r+o[12])/a,t[1]=(o[1]*i+o[5]*e+o[9]*r+o[13])/a,t[2]=(o[2]*i+o[6]*e+o[10]*r+o[14])/a,t}function F(t,n,o){return w(t,T([0,0,0],n,o),v([0,0,0],o))}function b(t,n,o,i){let e=n[0],r=n[1],a=n[2];return t[0]=e+i*(o[0]-e),t[1]=r+i*(o[1]-r),t[2]=a+i*(o[2]-a),t}function C(t,n,o){let i=n[0],e=n[1],r=n[2],a=n[3],l=o[0],s=o[1],f=o[2],c=o[3];return t[0]=i*c+a*l+e*f-r*s,t[1]=e*c+a*s+r*l-i*f,t[2]=r*c+a*f+i*s-e*l,t[3]=a*c-i*l-e*s-r*f,t}function I(t,n,o,i){let e=Math.sin(n/2*go),r=Math.cos(n/2*go),a=Math.sin(o/2*go),l=Math.cos(o/2*go),s=Math.sin(i/2*go),f=Math.cos(i/2*go);return t[0]=e*l*f+r*a*s,t[1]=r*a*f-e*l*s,t[2]=r*l*s-e*a*f,t[3]=r*l*f+e*a*s,t}function S(t,n,o,i){let e,r,a,l,s,f=n[0],c=n[1],u=n[2],h=n[3],_=o[0],m=o[1],d=o[2],v=o[3];return r=f*_+c*m+u*d+h*v,r<0&&(r=-r,_=-_,m=-m,d=-d,v=-v),1-r>1e-6?(e=Math.acos(r),a=Math.sin(e),l=Math.sin((1-i)*e)/a,s=Math.sin(i*e)/a):(l=1-i,s=i),t[0]=l*f+s*_,t[1]=l*c+s*m,t[2]=l*u+s*d,t[3]=l*h+s*v,t}function k(t,n,o){let i=t.o.M[n],e=t.o.T[n];if(e.F){let t=e.C[e.F];t&&t!==e.I&&(0===e.I.S?e.I=t:1&e.I.k&&(e.I.S=0,e.I=t)),e.F=void 0}let r=null,a=null;for(let t of e.I.P){if(e.I.S<t.B){a=t;break}r=t}if(r&&a){let t=(e.I.S-r.B)/(a.B-r.B);a.R&&(t=a.R(t)),r.L&&a.L&&(b(i.L,r.L,a.L,t),i.V=!0),r.K&&a.K&&(S(i.K,r.K,a.K,t),i.V=!0),r.W&&a.W&&(b(i.W,r.W,a.W,t),i.V=!0)}let l=e.I.S+o;if(l<e.I.D)e.I.S=l;else{if(e.I.S=0,4&e.I.k)for(let t of e.I.P.reverse())t.B=e.I.D-t.B;2&e.I.k||(e.I=e.C.idle)}}function P(t,n){let o=t.o.M[n];var i,e;v(xo,o.o),d(Ao,o.o),(i=zo)[0]=(e=o.o)[4],i[1]=e[5],i[2]=e[6],z(i,i);let r=t.Audio.listener;r.positionX?(r.positionX.value=xo[0],r.positionY.value=xo[1],r.positionZ.value=xo[2],r.forwardX.value=Ao[0],r.forwardY.value=Ao[1],r.forwardZ.value=Ao[2],r.upX.value=zo[0],r.upY.value=zo[1],r.upZ.value=zo[2]):(r.setPosition(...xo),r.setOrientation(...Ao,...zo))}function B(t,n,o,i,e){let r=t.currentTime+e,a=0;n&&n.connect(t.destination);let l,s,f=t.createGain();if(f.gain.value=(o[0]/9)**3,o[5]&&(s=t.createOscillator(),s.type=o[5],s.frequency.value=(o[7]/3)**3,l=t.createGain(),l.gain.value=(o[6]+3)**3,s.connect(l)),o[1]){let i=t.createBiquadFilter();i.type=o[1],i.frequency.value=2**o[2],i.Q.value=o[3]**1.5,l&&o[4]&&l.connect(i.detune),f.connect(i),i.connect(n||t.destination)}else f.connect(n||t.destination);for(let n of o[8]){let o=t.createGain();o.connect(f);let e=(n[1]/9)**3,s=(n[2]/9)**3,c=(n[3]/9)**3,u=s+c+(n[4]/6)**3;if(o.gain.setValueAtTime(0,r),o.gain.linearRampToValueAtTime(e,r+s),o.gain.setValueAtTime(e,r+s+c),o.gain.exponentialRampToValueAtTime(1e-5,r+u),n[0]){let e=t.createOscillator();e.type=n[0],e.connect(o),e.detune.value=3*(n[5]-7.5)**3,l&&n[6]&&l.connect(e.detune);let a=440*2**((i-69)/12);if(n[7]){let t=(n[8]/9)**3,o=(n[9]/9)**3,i=(n[10]/6)**3;e.frequency.linearRampToValueAtTime(0,r),e.frequency.linearRampToValueAtTime(a,r+t),e.frequency.setValueAtTime(a,r+t+o),e.frequency.exponentialRampToValueAtTime(1e-5,r+t+o+i)}else e.frequency.setValueAtTime(a,r);e.start(r),e.stop(r+u)}else{let n=t.createBufferSource();n.buffer=R(t),n.loop=!0,n.connect(o),n.start(r),n.stop(r+u)}u>a&&(a=u)}s&&(s.start(r),s.stop(r+a))}function R(t){if(!wo){wo=t.createBuffer(1,2*t.sampleRate,t.sampleRate);let n=wo.getChannelData(0);for(let t=0;t<n.length;t++)n[t]=2*Math.random()-1}return wo}function L(t,n,o){let i=t.o.X[n],e=t.o.M[n];if(i.I&&(i.S+=o,i.S>i.I.N?i.I=void 0:i.H&&V(i.H,e)),i.F&&!i.I){switch(i.F.$){case 0:!function(t,n,o){let i=t.createBufferSource();i.buffer=o.G,n?(i.connect(n),n.connect(t.destination)):i.connect(t.destination),i.start()}(t.Audio,i.H,i.F);break;case 1:!function(t,n,o){let i=60/(o.U||120)/4;for(let e of o.j)for(let o=0;o<e.Y.length;o++)e.Y[o]&&B(t,n,e.O,e.Y[o],o*i)}(t.Audio,i.H,i.F)}i.I=i.F,i.S=0,i.H&&V(i.H,e)}i.F=i.q}function V(t,n){v(To,n.o),d(Fo,n.o),t.positionX?(t.positionX.value=To[0],t.positionY.value=To[1],t.positionZ.value=To[2],t.orientationX.value=Fo[0],t.orientationY.value=Fo[1],t.orientationZ.value=Fo[2]):(t.setPosition(...To),t.setOrientation(...Fo))}function K(t,n){n>1?(m(t.J,t.Z,n,t.tt,t.nt),h(t.ot,t.J)):(m(t.J,t.Z/n,n,t.tt,t.nt),h(t.ot,t.J))}function W(t){!function(t,n,o,i,e,r,a){let l=1/(e-o),s=1/(i-n),f=1/(r-a);t[0]=-2*l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*f,t[11]=0,t[12]=(e+o)*l,t[13]=(n+i)*s,t[14]=(a+r)*f,t[15]=1}(t.J,t.it,t.it,-t.it,-t.it,t.tt,t.nt),h(t.ot,t.J)}function D(t,n){let o,i,e,r,a,l;v(n.et,t),o=r=n.et[0],i=a=n.et[1],e=l=n.et[2];let s=[0,0,0];for(let f=0;f<8;f++){let c=Co[f];s[0]=c[0]*n.rt[0],s[1]=c[1]*n.rt[1],s[2]=c[2]*n.rt[2],T(s,s,t),s[0]<o&&(o=s[0]),s[0]>r&&(r=s[0]),s[1]<i&&(i=s[1]),s[1]>a&&(a=s[1]),s[2]<e&&(e=s[2]),s[2]>l&&(l=s[2])}n.at=[o,i,e],n.lt=[r,a,l],n.st[0]=(r-o)/2,n.st[1]=(a-i)/2,n.st[2]=(l-e)/2}function E(t,n){let o=t.et[0]-n.et[0],i=t.st[0]+n.st[0]-Math.abs(o),e=t.et[1]-n.et[1],r=t.st[1]+n.st[1]-Math.abs(e),a=t.et[2]-n.et[2],l=t.st[2]+n.st[2]-Math.abs(a);return i<r&&i<l?[i*Math.sign(o),0,0]:r<l?[0,r*Math.sign(e),0]:[0,0,l*Math.sign(a)]}function X(t,n){return t.at[0]<n.lt[0]&&t.lt[0]>n.at[0]&&t.at[1]<n.lt[1]&&t.lt[1]>n.at[1]&&t.at[2]<n.lt[2]&&t.lt[2]>n.at[2]}function N(t,n,o){for(let i=0;i<o;i++){let o=n[i],e=t.i&o.ft,r=o.i&t.ft;if((e||r)&&X(t,o)){let n=E(t,o);e&&t.ct.push({ut:o.Entity,ht:n}),r&&o.ct.push({ut:t.Entity,ht:A([0,0,0],n)})}}}function H(t,n){let o=t.o._t[n],i=t.o.dt[n];o.vt&&i.gt.push(o.vt.slice()),o.K&&i.yt.push(o.K.slice())}function $(t,n){let i=t.o.wt[n];if(i.dt){let o=t.o.dt[n];t.xt.ArrowLeft&&o.gt.push([0,0,-1]),t.xt.ArrowRight&&o.gt.push([0,0,1])}if(i.At){let o=t.o.M[n];t.xt.ArrowLeft&&i.zt&&(i.zt=!1,o.K=[0,1,0,0],o.V=!0),t.xt.ArrowRight&&!i.zt&&(i.zt=!0,o.K=[0,0,0,1],o.V=!0)}if(i.T){let i="idle";t.xt.ArrowLeft&&(i="walk"),t.xt.ArrowRight&&(i="walk");for(let e of o(t.o,n,1))t.o.T[e].F=i}}function G(t,n){let o=t.o.dt[n];if(t.o.wt[n].dt&&1===t.xt.Touch0){let n=Math.min(t.Mt,t.Tt)/4,i=(t.xt.Touch0X-ko[0])/n,e=(t.xt.Touch0Y-ko[1])/n;Math.abs(i)>.01&&o.gt.push([c(-1,1,-i),0,0]),Math.abs(e)>.01&&o.gt.push([0,0,c(-1,1,-e)])}}function U(t,n){if(t.o.wt[n].dt){let o=t.o.dt[n];Math.abs(t.Ft.pad0_axis_1)>.1&&o.gt.push([-t.Ft.pad0_axis_1,0,0]),Math.abs(t.Ft.pad0_axis_2)>.1&&o.gt.push([0,0,-t.Ft.pad0_axis_2])}}function j(t,n){t.bt.textAlign="center",t.bt.font=n.Ct,t.bt.fillStyle=n.It,t.bt.fillText(n.Text,0,0)}function Y(t,n){t.bt.strokeStyle=n.St,t.bt.strokeRect(-n.rt/2,-n.rt/2,n.rt,n.rt)}function O(t,n,o){let r=t.o.kt[n];r.Pt-=o,r.Pt<0&&(r.Bt&&e(t,r.Bt,n),i(t.o,n))}function q(t,n,o){let i=t.o.Rt[n];v(Ro,t.o.M[n].o),1===i.$&&z(Ro,Ro),t.Lt[4*o+0]=Ro[0],t.Lt[4*o+1]=Ro[1],t.Lt[4*o+2]=Ro[2],t.Lt[4*o+3]=i.$,t.Vt[4*o+0]=i.St[0],t.Vt[4*o+1]=i.St[1],t.Vt[4*o+2]=i.St[2],t.Vt[4*o+3]=i.Kt}function J(t,n,o){let i=t.o.M[n],e=t.o.dt[n];if(e.gt.length){let n=e.gt.reduce(Q),r=Math.min(1,function(t){return Math.hypot(t[0],t[1],t[2])}(n));F(n,n,i.o),void 0!==i.Wt&&F(n,n,t.o.M[i.Wt].Dt),z(n,n),x(n,n,r*e.Et*o),y(i.L,i.L,n),i.V=!0,e.gt=[]}if(e.yt.length){let t=e.yt.reduce(Z);S(t,Ko,t,Math.min(1,e.Xt/Math.PI*o)),C(i.K,t,i.K),i.V=!0,e.yt=[]}if(e.Nt.length){let t=e.Nt.reduce(Z);S(t,Ko,t,Math.min(1,e.Xt/Math.PI*o)),C(i.K,i.K,t),i.V=!0,e.Nt=[]}}function Q(t,n){return y(t,t,n)}function Z(t,n){return C(t,t,n)}function tt(t,n,o,i=0,e=[1,1,1,1],r=2304){return(a,l)=>{if(!Wo.has(n)){let o=a.Ht.createVertexArray();a.Ht.bindVertexArray(o),a.Ht.bindBuffer(gn,n.$t),a.Ht.enableVertexAttribArray(t.Ut.Gt),a.Ht.vertexAttribPointer(t.Ut.Gt,3,Tn,!1,0,0),a.Ht.bindBuffer(gn,n.jt),a.Ht.enableVertexAttribArray(t.Ut.Yt),a.Ht.vertexAttribPointer(t.Ut.Yt,3,Tn,!1,0,0),a.Ht.bindBuffer(pn,n.Ot),a.Ht.bindVertexArray(null),Wo.set(n,o)}a.o.i[l]|=65536,a.o.qt[l]={$:1,Jt:t,Qt:n,Zt:r,tn:Wo.get(n),nn:o,on:e,en:i}}}function nt(t,n,o,i=0,e=[1,1,1,1],r=2304){return(a,l)=>{if(!Do.has(n)){let o=a.Ht.createVertexArray();a.Ht.bindVertexArray(o),a.Ht.bindBuffer(gn,n.$t),a.Ht.enableVertexAttribArray(t.Ut.Gt),a.Ht.vertexAttribPointer(t.Ut.Gt,3,Tn,!1,0,0),a.Ht.bindBuffer(gn,n.jt),a.Ht.enableVertexAttribArray(t.Ut.Yt),a.Ht.vertexAttribPointer(t.Ut.Yt,3,Tn,!1,0,0),a.Ht.bindBuffer(pn,n.Ot),a.Ht.bindVertexArray(null),Do.set(n,o)}a.o.i[l]|=65536,a.o.qt[l]={$:2,Jt:t,Qt:n,Zt:r,tn:Do.get(n),nn:o,on:e,en:i}}}function ot(t,n,o,i=0,e=[1,1,1,1],r=2304){return(a,l)=>{if(!Eo.has(n)){let o=a.Ht.createVertexArray();a.Ht.bindVertexArray(o),a.Ht.bindBuffer(gn,n.$t),a.Ht.enableVertexAttribArray(t.Ut.Gt),a.Ht.vertexAttribPointer(t.Ut.Gt,3,Tn,!1,0,0),a.Ht.bindBuffer(gn,n.jt),a.Ht.enableVertexAttribArray(t.Ut.Yt),a.Ht.vertexAttribPointer(t.Ut.Yt,3,Tn,!1,0,0),a.Ht.bindBuffer(gn,n.rn),a.Ht.enableVertexAttribArray(t.Ut.an),a.Ht.vertexAttribPointer(t.Ut.an,4,Tn,!1,0,0),a.Ht.bindBuffer(pn,n.Ot),a.Ht.bindVertexArray(null),Eo.set(n,o)}a.o.i[l]|=65536,a.o.qt[l]={$:3,Jt:t,Qt:n,Zt:r,tn:Eo.get(n),nn:o,on:e,en:i}}}function it(t,n,o,i){return(e,r)=>{let a=e.ln,l=e.Ht.createVertexArray();e.Ht.bindVertexArray(l),e.Ht.bindBuffer(gn,t.$t),e.Ht.enableVertexAttribArray(a.Ut.Gt),e.Ht.vertexAttribPointer(a.Ut.Gt,3,Tn,!1,0,0),e.Ht.bindBuffer(gn,t.jt),e.Ht.enableVertexAttribArray(a.Ut.Yt),e.Ht.vertexAttribPointer(a.Ut.Yt,3,Tn,!1,0,0);let s=e.Ht.createBuffer();e.Ht.bindBuffer(gn,s),e.Ht.bufferData(gn,n,vn),e.Ht.enableVertexAttribArray(a.Ut.sn),e.Ht.vertexAttribPointer(a.Ut.sn,4,Tn,!1,0,0),e.Ht.vertexAttribDivisor(a.Ut.sn,1);let f=e.Ht.createBuffer();e.Ht.bindBuffer(gn,f),e.Ht.bufferData(gn,o,vn),e.Ht.enableVertexAttribArray(a.Ut.fn),e.Ht.vertexAttribPointer(a.Ut.fn,4,Tn,!1,0,0),e.Ht.vertexAttribDivisor(a.Ut.fn,1),e.Ht.bindBuffer(pn,t.Ot),e.Ht.bindVertexArray(null),e.o.i[r]|=65536,e.o.qt[r]={$:11,Jt:a,Qt:t,Zt:yn,tn:l,cn:n.length/4,un:i,hn:s,_n:f}}}function et(t,n,o){let i=t.o.mn[n],e=t.o.M[n];i.dn+=o,i.dn>i.vn&&(i.dn=0,v(No,e.o),d(Ho,e.o),i.gn.push(...No,0),i.gn.push(...Ho,Math.random()));for(let t=0;t<i.gn.length;)i.gn[t+3]+=o,i.gn[t+3]>i.kt?i.gn.splice(t,8):t+=8}function rt(t,n,o){let i=t.o.M[n],e=t.o.pn[n];if(1===e.$){p(e.yn,e.wn),x(e.xn,e.xn,o),y(e.yn,e.yn,e.xn),e.yn[1]+=-9.81*o;let t=[0,0,0];x(t,e.yn,o),y(i.L,i.L,t),i.V=!0,(r=e.xn)[0]=0,r[1]=0,r[2]=0}var r}function at(t,n,o){let i=t.o.pn[n];if(2===i.$){let e=[0,0,0];v(e,t.o.M[n].o);let r=[0,0,0];w(r,e,i.An),x(i.yn,r,1/o),p(i.An,e)}}function lt(t,n){let o=t.o.M[n],i=t.o.zn[n],e=t.o.pn[n];if(1===e.$){let n=!1;for(let r=0;r<i.ct.length;r++){let a=i.ct[r];if(131072&t.o.i[a.ut]){n=!0,y(o.L,o.L,a.ht),o.V=!0;let i=t.o.pn[a.ut];switch(i.$){case 0:z(jo,a.ht),x(jo,jo,-2*M(e.yn,jo)),y(e.wn,e.yn,jo);break;case 1:case 2:p(e.wn,i.yn)}x(e.wn,e.wn,e.Mn),a.ht[1]>0&&e.wn[1]<1&&(e.wn[1]=0)}}n||p(e.wn,e.yn)}}function st(t,n){if(32&t.i[n]){let o=t.l[n];for(let n of o.l)if(1048576&t.i[n])return!0}return!1}function ft(t,n){let o=null,i=null;t.Ht.bindFramebuffer(zn,n.Tn.m),t.Ht.viewport(0,0,n.Tn.v,n.Tn.g),t.Ht.clearColor(...n.Fn),t.Ht.clear(16640);for(let e=0;e<t.o.i.length;e++)if((t.o.i[e]&Oo)===Oo){let r=t.o.M[e],a=t.o.qt[e];if(a.Jt!==o)switch(o=a.Jt,a.$){case 8:case 9:case 10:break;case 11:ht(t,n);break;default:ct(t,n)}switch(a.Zt!==i&&(i=a.Zt,t.Ht.frontFace(a.Zt)),a.$){case 8:case 9:case 10:break;case 11:_t(t,r,a);break;default:ut(t,r,a)}}}function ct(t,n){t.Ht.useProgram(t.Cn.bn),t.Ht.uniformMatrix4fv(t.Cn.Ut.In,!1,n.In)}function ut(t,n,o){let i=t.Cn;t.Ht.uniformMatrix4fv(i.Ut.o,!1,n.o),t.Ht.bindBuffer(gn,o.Qt.$t),t.Ht.enableVertexAttribArray(i.Ut.Gt),t.Ht.vertexAttribPointer(i.Ut.Gt,3,Tn,!1,0,0),t.Ht.bindBuffer(pn,o.Qt.Ot),t.Ht.drawElements(i.Sn,o.Qt.kn,Mn,0)}function ht(t,n){t.Ht.useProgram(t.Pn.bn),t.Ht.uniformMatrix4fv(t.Pn.Ut.In,!1,n.In)}function _t(t,n,o){let i=t.Pn;t.Ht.uniformMatrix4fv(i.Ut.o,!1,n.o),t.Ht.bindBuffer(gn,o.Qt.$t),t.Ht.enableVertexAttribArray(i.Ut.Gt),t.Ht.vertexAttribPointer(i.Ut.Gt,3,Tn,!1,0,0),t.Ht.bindBuffer(gn,o.hn),t.Ht.enableVertexAttribArray(i.Ut.sn),t.Ht.vertexAttribPointer(i.Ut.sn,4,Tn,!1,0,0),t.Ht.vertexAttribDivisor(i.Ut.sn,1),t.Ht.bindBuffer(gn,o._n),t.Ht.enableVertexAttribArray(i.Ut.fn),t.Ht.vertexAttribPointer(i.Ut.fn,4,Tn,!1,0,0),t.Ht.vertexAttribDivisor(i.Ut.fn,1),t.Ht.bindBuffer(pn,o.Qt.Ot),t.Ht.drawElementsInstanced(t.Pn.Sn,o.Qt.kn,Mn,0,o.cn)}function mt(t,n,o=0){for(let i=o;i<t.i.length;i++)if((t.i[i]&n)===n)return i}function dt(t,n){t.Ht.bindFramebuffer(zn,null),t.Ht.viewport(0,0,t.Mt,t.Tt),t.Ht.clearColor(...n.Fn),t.Ht.clear(16640),gt(t,n)}function vt(t,n){t.Ht.bindFramebuffer(zn,n.Tn.m),t.Ht.viewport(0,0,n.Tn.v,n.Tn.g),t.Ht.clearColor(...n.Fn),t.Ht.clear(16640),gt(t,n,n.Tn.Bn)}function gt(t,n,o){let i=null,e=null;for(let r=0;r<t.o.i.length;r++)if((t.o.i[r]&qo)===qo){let a=t.o.M[r],l=t.o.qt[r];if(l.Jt!==i)switch(i=l.Jt,l.$){case 0:pt(t,l.Jt,n);break;case 1:wt(t,l.Jt,n);break;case 5:At(t,l.Jt,n);break;case 6:Mt(t,l.Jt,n);break;case 8:Ft(t,l.Jt,n);break;case 7:Ct(t,l.Jt,n);break;case 2:St(t,l.Jt,n);break;case 3:Pt(t,l.Jt,n);break;case 9:Rt(t,l.Jt,n);break;case 10:Vt(t,l.Jt,n);break;case 11:Wt(t,l.Jt,n)}switch(l.Zt!==e&&(e=l.Zt,t.Ht.frontFace(l.Zt)),l.$){case 0:yt(t,a,l);break;case 1:xt(t,a,l);break;case 5:l.Rn!==o&&zt(t,a,l);break;case 6:l.Rn!==o&&Tt(t,a,l);break;case 8:bt(t,a,l);break;case 7:It(t,a,l);break;case 2:kt(t,a,l);break;case 3:Bt(t,r,a,l);break;case 9:{let n=t.o.mn[r];n.gn.length&&Lt(t,l,n);break}case 10:{let n=t.o.mn[r];n.gn.length&&Kt(t,l,n);break}case 11:Dt(t,a,l)}}}function pt(t,n,o){t.Ht.useProgram(n.bn),t.Ht.uniformMatrix4fv(n.Ut.In,!1,o.In)}function yt(t,n,o){t.Ht.uniformMatrix4fv(o.Jt.Ut.o,!1,n.o),t.Ht.uniform4fv(o.Jt.Ut.St,o.St),t.Ht.bindVertexArray(o.tn),t.Ht.drawElements(o.Jt.Sn,o.Qt.kn,Mn,0),t.Ht.bindVertexArray(null)}function wt(t,n,o){t.Ht.useProgram(n.bn),t.Ht.uniformMatrix4fv(n.Ut.In,!1,o.In),t.Ht.uniform3fv(n.Ut.Ln,o.Vn),t.Ht.uniform4fv(n.Ut.Lt,t.Lt),t.Ht.uniform4fv(n.Ut.Vt,t.Vt),t.Ht.uniform4fv(n.Ut.Kn,o.Fn),t.Ht.uniform1f(n.Ut.Wn,o.J.nt)}function xt(t,n,o){t.Ht.uniformMatrix4fv(o.Jt.Ut.o,!1,n.o),t.Ht.uniformMatrix4fv(o.Jt.Ut.Dt,!1,n.Dt),t.Ht.uniform4fv(o.Jt.Ut.nn,o.nn),t.Ht.uniform4fv(o.Jt.Ut.on,o.on),t.Ht.uniform1f(o.Jt.Ut.en,o.en),t.Ht.bindVertexArray(o.tn),t.Ht.drawElements(o.Jt.Sn,o.Qt.kn,Mn,0),t.Ht.bindVertexArray(null)}function At(t,n,o){t.Ht.useProgram(n.bn),t.Ht.uniformMatrix4fv(n.Ut.In,!1,o.In)}function zt(t,n,o){t.Ht.uniformMatrix4fv(o.Jt.Ut.o,!1,n.o),t.Ht.activeTexture(An),t.Ht.bindTexture(xn,o.Rn),t.Ht.uniform1i(o.Jt.Ut.Dn,0),t.Ht.uniform4fv(o.Jt.Ut.St,o.St),t.Ht.bindVertexArray(o.tn),t.Ht.drawElements(o.Jt.Sn,o.Qt.kn,Mn,0),t.Ht.bindVertexArray(null)}function Mt(t,n,o){t.Ht.useProgram(n.bn),t.Ht.uniformMatrix4fv(n.Ut.In,!1,o.In),t.Ht.uniform3fv(n.Ut.Ln,o.Vn),t.Ht.uniform4fv(n.Ut.Lt,t.Lt),t.Ht.uniform4fv(n.Ut.Vt,t.Vt)}function Tt(t,n,o){t.Ht.uniformMatrix4fv(o.Jt.Ut.o,!1,n.o),t.Ht.uniformMatrix4fv(o.Jt.Ut.Dt,!1,n.Dt),t.Ht.uniform4fv(o.Jt.Ut.nn,o.nn),t.Ht.uniform4fv(o.Jt.Ut.on,o.on),t.Ht.uniform1f(o.Jt.Ut.en,o.en),t.Ht.activeTexture(An),t.Ht.bindTexture(xn,o.Rn),t.Ht.uniform1i(o.Jt.Ut.En,0),t.Ht.bindVertexArray(o.tn),t.Ht.drawElements(o.Jt.Sn,o.Qt.kn,Mn,0),t.Ht.bindVertexArray(null)}function Ft(t,n,o){t.Ht.useProgram(n.bn),t.Ht.uniformMatrix4fv(n.Ut.In,!1,o.In)}function bt(t,n,o){t.Ht.uniformMatrix4fv(o.Jt.Ut.o,!1,n.o),t.Ht.uniform4fv(o.Jt.Ut.St,o.St),t.Ht.bindBuffer(gn,o.$t),t.Ht.enableVertexAttribArray(o.Jt.Ut.Gt),t.Ht.vertexAttribPointer(o.Jt.Ut.Gt,3,Tn,!1,0,0),t.Ht.drawArrays(o.Jt.Sn,0,o.kn)}function Ct(t,n,o){t.Ht.useProgram(n.bn),t.Ht.uniformMatrix4fv(n.Ut.In,!1,o.In),t.Ht.uniform3fv(n.Ut.Ln,o.Vn),t.Ht.uniform4fv(n.Ut.Lt,t.Lt),t.Ht.uniform4fv(n.Ut.Vt,t.Vt)}function It(t,n,o){t.Ht.uniformMatrix4fv(o.Jt.Ut.o,!1,n.o),t.Ht.uniformMatrix4fv(o.Jt.Ut.Dt,!1,n.Dt),t.Ht.uniform4fv(o.Jt.Ut.nn,o.nn),t.Ht.activeTexture(33985),t.Ht.bindTexture(xn,o.En),t.Ht.uniform1i(o.Jt.Ut.En,1),t.Ht.activeTexture(33986),t.Ht.bindTexture(xn,o.Xn),t.Ht.uniform1i(o.Jt.Ut.Xn,2),t.Ht.activeTexture(33987),t.Ht.bindTexture(xn,o.Nn),t.Ht.uniform1i(o.Jt.Ut.Nn,3),t.Ht.bindVertexArray(o.tn),t.Ht.drawElements(o.Jt.Sn,o.Qt.kn,Mn,0),t.Ht.bindVertexArray(null)}function St(t,n,o){t.Ht.useProgram(n.bn),t.Ht.uniformMatrix4fv(n.Ut.In,!1,o.In),t.Ht.uniform3fv(n.Ut.Ln,o.Vn),t.Ht.uniform4fv(n.Ut.Lt,t.Lt),t.Ht.uniform4fv(n.Ut.Vt,t.Vt),t.Ht.uniform4fv(n.Ut.Kn,o.Fn),t.Ht.uniform1f(n.Ut.Wn,o.J.nt),t.Ht.activeTexture(An),t.Ht.bindTexture(xn,t.$n.Hn.A),t.Ht.uniform1i(n.Ut.Gn,0);let i=mt(t.o,4112);i&&t.Ht.uniformMatrix4fv(n.Ut.Un,!1,t.o.jn[i].In)}function kt(t,n,o){t.Ht.uniformMatrix4fv(o.Jt.Ut.o,!1,n.o),t.Ht.uniformMatrix4fv(o.Jt.Ut.Dt,!1,n.Dt),t.Ht.uniform4fv(o.Jt.Ut.nn,o.nn),t.Ht.uniform4fv(o.Jt.Ut.on,o.on),t.Ht.uniform1f(o.Jt.Ut.en,o.en),t.Ht.bindVertexArray(o.tn),t.Ht.drawElements(o.Jt.Sn,o.Qt.kn,Mn,0),t.Ht.bindVertexArray(null)}function Pt(t,n,o){t.Ht.useProgram(n.bn),t.Ht.uniformMatrix4fv(n.Ut.In,!1,o.In),t.Ht.uniform3fv(n.Ut.Ln,o.Vn),t.Ht.uniform4fv(n.Ut.Lt,t.Lt),t.Ht.uniform4fv(n.Ut.Vt,t.Vt)}function Bt(t,n,i,e){t.Ht.uniformMatrix4fv(e.Jt.Ut.o,!1,i.o),t.Ht.uniformMatrix4fv(e.Jt.Ut.Dt,!1,i.Dt),t.Ht.uniform4fv(e.Jt.Ut.nn,e.nn),t.Ht.uniform4fv(e.Jt.Ut.on,e.on),t.Ht.uniform1f(e.Jt.Ut.en,e.en);let r=[];if(32&t.o.i[n])for(let i of o(t.o,n,4194312))r.push(i);else{let o=n;for(let n=0;n<5;n++){let n=mt(t.o,4194312,o);n&&(r.push(n),o=n+1)}}for(let n of r){let o=t.o.M[n],i=t.o.Yn[n];_(Jo.subarray(16*i.On),o.o,i.qn)}t.Ht.uniformMatrix4fv(e.Jt.Ut.Jn,!1,Jo),t.Ht.bindVertexArray(e.tn),t.Ht.drawElements(e.Jt.Sn,e.Qt.kn,Mn,0),t.Ht.bindVertexArray(null)}function Rt(t,n,o){t.Ht.useProgram(n.bn),t.Ht.uniformMatrix4fv(n.Ut.In,!1,o.In)}function Lt(t,n,o){t.Ht.uniform4fv(n.Jt.Ut.Qn,n.Qn),t.Ht.uniform4fv(n.Jt.Ut.Zn,n.Zn),t.Ht.uniform4f(n.Jt.Ut.no,o.kt,o.oo,...n.rt);let i=Float32Array.from(o.gn);t.Ht.bindBuffer(gn,n.G),t.Ht.bufferSubData(gn,0,i),t.Ht.enableVertexAttribArray(n.Jt.Ut.io),t.Ht.vertexAttribPointer(n.Jt.Ut.io,4,Tn,!1,32,0),t.Ht.enableVertexAttribArray(n.Jt.Ut.vt),t.Ht.vertexAttribPointer(n.Jt.Ut.vt,3,Tn,!1,32,16),t.Ht.drawArrays(n.Jt.Sn,0,o.gn.length/8)}function Vt(t,n,o){t.Ht.useProgram(n.bn),t.Ht.uniformMatrix4fv(n.Ut.In,!1,o.In)}function Kt(t,n,o){t.Ht.uniform4fv(n.Jt.Ut.Qn,n.Qn),t.Ht.uniform4fv(n.Jt.Ut.Zn,n.Zn),t.Ht.activeTexture(An),t.Ht.bindTexture(xn,n.Rn),t.Ht.uniform1i(n.Jt.Ut.Dn,0),t.Ht.uniform4f(n.Jt.Ut.no,o.kt,o.oo,...n.rt);let i=Float32Array.from(o.gn);t.Ht.bindBuffer(gn,n.G),t.Ht.bufferSubData(gn,0,i),t.Ht.enableVertexAttribArray(n.Jt.Ut.io),t.Ht.vertexAttribPointer(n.Jt.Ut.io,4,Tn,!1,32,0),t.Ht.enableVertexAttribArray(n.Jt.Ut.eo),t.Ht.vertexAttribPointer(n.Jt.Ut.eo,4,Tn,!1,32,16),t.Ht.drawArrays(n.Jt.Sn,0,o.gn.length/8)}function Wt(t,n,o){t.Ht.useProgram(n.bn),t.Ht.uniformMatrix4fv(n.Ut.In,!1,o.In),t.Ht.uniform3fv(n.Ut.Ln,o.Vn),t.Ht.uniform4fv(n.Ut.Lt,t.Lt),t.Ht.uniform4fv(n.Ut.Vt,t.Vt),t.Ht.uniform4fv(n.Ut.Kn,o.Fn),t.Ht.uniform1f(n.Ut.Wn,o.J.nt)}function Dt(t,n,o){t.Ht.uniformMatrix4fv(o.Jt.Ut.o,!1,n.o),t.Ht.uniformMatrix4fv(o.Jt.Ut.Dt,!1,n.Dt),t.Ht.uniform3fv(o.Jt.Ut.un,o.un),t.Ht.bindVertexArray(o.tn),t.Ht.drawElementsInstanced(o.Jt.Sn,o.Qt.kn,Mn,0,o.cn),t.Ht.bindVertexArray(null)}function Et(t,n){let o=t.o.ro[n],i=t.o.M[n];i.L=[Math.random()-.5,Math.random()-.5,Math.random()-.5],x(i.L,i.L,2*o.ao),i.V=!0}function Xt(t=[0,0,0],n=[0,0,0,1],o=[1,1,1]){return(i,e)=>{i.o.i[e]|=4194304,i.o.M[e]={o:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Dt:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],L:t,K:n,W:o,V:!0}}}function Nt(n,o,i){let e=n.o.lo[o];if(e.dn+=i,e.dn>e.so){e.dn=0;let i=n.o.M[o],r=[0,0,0];v(r,i.o);let a=[0,0,0,0];g(a,i.o),t(n,[...e.fo(n),Xt(r,a)])}}function Ht(t,n,o){let i=t.o.co[n];i.dn+=o,i.dn>i.vn&&(i.dn=0,i.uo?(i.uo=!1,t.o.i[n]&=~i.ho):(i.uo=!0,t.o.i[n]|=i.ho))}function $t(t,n){for(let n=0;n<t.o.i.length;n++)if((t.o.i[n]&ni)===ni){let o=t.o.M[n];o.V&&Gt(t.o,n,o)}}function Gt(t,n,o){if(o.V=!1,function(t,n,o,i){let e=n[0],r=n[1],a=n[2],l=n[3],s=e+e,f=r+r,c=a+a,u=e*s,h=e*f,_=e*c,m=r*f,d=r*c,v=a*c,g=l*s,p=l*f,y=l*c,w=i[0],x=i[1],A=i[2];t[0]=(1-(m+v))*w,t[1]=(h+y)*w,t[2]=(_-p)*w,t[3]=0,t[4]=(h-y)*x,t[5]=(1-(u+v))*x,t[6]=(d+g)*x,t[7]=0,t[8]=(_+p)*A,t[9]=(d-g)*A,t[10]=(1-(u+m))*A,t[11]=0,t[12]=o[0],t[13]=o[1],t[14]=o[2],t[15]=1}(o.o,o.K,o.L,o.W),void 0!==o.Wt&&_(o.o,t.M[o.Wt].o,o.o),h(o.Dt,o.o),32&t.i[n]){let o=t.l[n];for(let i of o.l)if(4194304&t.i[i]){let o=t.M[i];o.Wt=n,Gt(t,i,o)}}}function Ut(t,n){let o=t.o.zn[n],i=t.o.F[n];for(let r of o.ct)i.ho&t.o.zn[r.ut].ft&&e(t,i.Bt,[n,r.ut])}function jt(t,...n){return t.reduce(((t,o)=>t+function(t){let n=t.shift();return"boolean"==typeof n||null==n?"":Array.isArray(n)?n.join(""):n}(n)+o))}function Yt(){return ri=16807*ri%2147483647,(ri-1)/2147483646}function Ot(t=0,n=1){return~~(Yt()*(n-t+1)+t)}function qt(t=0,n=1){return Yt()*(n-t)+t}function Jt(t,n,o,i=[.9,.9,.9,1]){return(e,r)=>{e.o.i[r]|=16,e.o.jn[r]={$:0,J:{$:0,Z:t,tt:n,nt:o,J:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],ot:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},_o:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],In:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Vn:[0,0,0],Fn:i}}}function Qt(t,n,o,i,e=[0,0,0,1]){return(r,a)=>{r.o.i[a]|=16,r.o.jn[a]={$:3,Tn:t,J:{$:1,it:n,tt:o,nt:i,J:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],ot:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},_o:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],In:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Vn:[0,0,0],Fn:e}}}function Zt(t){return[n([Xt([0,.800000011920929,0],void 0,[4,1,2]),tt(t.mo,t.do,[.8,.024,.016,1])],[Xt([1.2764941453933716,.5,0],[.7071068286895752,0,0,.7071068286895752],[2,4.400000095367432,2]),tt(t.mo,t.vo,[0,0,0,1])],[Xt([-1.100000023841858,.5,0],[.7071068286895752,0,0,.7071068286895752],[2,4.400000095367432,2]),tt(t.mo,t.vo,[0,0,0,1])],[Xt([-.5,2,.8999999761581421],void 0,[.20000000298023224,1.399999976158142,.20000000298023224]),tt(t.mo,t.do,[.8,.024,.016,1])],[Xt([-.5,2,-.8999999761581421],void 0,[.20000000298023224,1.399999976158142,.20000000298023224]),tt(t.mo,t.do,[.8,.024,.016,1])],[Xt([1.899999976158142,2,.8999999761581421],void 0,[.20000000298023224,1.399999976158142,.20000000298023224]),tt(t.mo,t.do,[.8,.024,.016,1])],[Xt([1.899999976158142,2,-.8999999761581421],void 0,[.20000000298023224,1.399999976158142,.20000000298023224]),tt(t.mo,t.do,[.8,.024,.016,1])],[Xt([.7000470161437988,2.799999952316284,0],void 0,[2.5999999046325684,.20000000298023224,2]),tt(t.mo,t.do,[.8,.024,.016,1])],[Xt([-2,1,-.6000000238418579],[.5,.5,-.5,.4999999701976776],[.800000011920929,.4000000059604645,.800000011920929]),tt(t.mo,t.vo,[.8,.784,.019,1])],[Xt([-2,1,.6000000238418579],[.5,.5,-.5,.4999999701976776],[.800000011920929,.4000000059604645,.800000011920929]),tt(t.mo,t.vo,[.8,.784,.019,1])],[Xt([.26432204246520996,1.5499989986419678,.550000011920929],void 0,[.20000000298023224,.5,.800000011920929]),tt(t.mo,t.do,[0,0,0,1])],[Xt([.26432204246520996,1.5499989986419678,-.550000011920929],void 0,[.20000000298023224,.5,.800000011920929]),tt(t.mo,t.do,[0,0,0,1])])]}function tn(t){return[n([Xt([0,1.7000000476837158,0],void 0,[3,3,3]),tt(t.mo,t.do,[.095,.095,.095,1])],[Xt([-2.25,1.7000000476837158,0],void 0,[1.5,.10000000149011612,3]),tt(t.mo,t.do,[.069,.154,.8,1])],[Xt([-.800000011920929,.10000000149011612,0],void 0,[4.900000095367432,.20000000298023224,3.4000000953674316]),tt(t.mo,t.do,[.095,.095,.095,1])],[Xt([-2.814239978790283,.949999988079071,0],void 0,[.10000000149011612,1.5,.10000000149011612]),tt(t.mo,t.do,[.095,.095,.095,1])])]}function nn(t){return 1-(1-t)**4}function on(t){return t<.5?8*t**4:1-(-2*t+2)**4/2}function en(t){return(n,o)=>{let i={};for(let n in t){let{P:o,k:e=7}=t[n],r=o[o.length-1].B;i[n]={P:o.map((t=>({...t}))),k:e,D:r,S:0}}n.o.i[o]|=1,n.o.T[o]={C:i,I:i.idle}}}function rn(t,n){return(o,i)=>{o.o.i[i]|=8,o.o.Yn[i]={On:t,V:void 0===n,qn:n||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}}}function an(t,n){return(o,i)=>{o.o.i[i]|=128,o.o._t[i]={vt:t,K:n}}}function ln(t,n,o){return(i,e)=>{i.o.i[e]|=256,i.o.wt[e]={dt:t,At:n,T:o,zt:!0}}}function sn(t,n=.1){return(o,i)=>{o.o.i[i]|=8192,o.o.po[i]={Tn:t,yo:n}}}function fn(t,n){return(o,i)=>{o.o.i[i]|=16384,o.o.dt[i]={Et:t,Xt:n,gt:[],yt:[],Nt:[]}}}function cn(t){return[ot(t.wo,t.xo,[1,.5,0,1],0),n([Xt([0,.35,-.47],[.672,0,0,.74]),rn(0,[1,0,0,0,0,.096,-.995,0,0,.995,.096,0,0,.433,.395,1]),en({idle:{P:[{B:1/0,L:[0,.35,-.47],K:[.672,0,0,.74]}]},jump:{P:[{B:0,L:[0,.63,0]},{B:.2,L:[0,1.13,0],R:on},{B:.4,L:[0,.63,0],R:nn}],k:0}}),n([Xt([0,.46,0],[-.4,0,0,.92]),rn(1,[1,0,0,0,0,.795,-.606,0,0,.606,.795,0,0,-.306,.251,1]),en({idle:{P:[{B:0,K:I([0,0,0,1],-30,15,0),R:on},{B:1,K:I([0,0,0,1],-30,-15,0),R:on}]},walk:{P:[{B:0,K:I([0,0,0,1],-30,0,5)},{B:.2,K:I([0,0,0,1],-30,0,-5)}]},jump:{P:[{B:0,K:[0,0,0,1]},{B:.2,K:I([0,0,0,1],-15,0,0),R:on},{B:.4,K:I([0,0,0,1],0,0,0),R:nn}],k:0}})],[Xt([.07,.46,0],[.74,0,0,.672]),rn(2,[1,0,0,0,0,-1,0,0,0,-0,-1,0,-.073,.395,-.015,1]),en({idle:{P:[{B:0}]},walk:{P:[{B:0,K:I([0,0,0,1],80,0,0)},{B:.2,K:I([0,0,0,1],125,0,0)}]},jump:{P:[{B:0,K:[0,0,0,1]},{B:.2,K:I([0,0,0,1],0,0,135),R:on},{B:.4,K:[0,0,0,1],R:nn}],k:0}})],[Xt([-.07,.46,0],[.74,0,0,.672]),rn(3,[1,0,0,0,0,-1,0,0,0,-0,-1,0,.073,.395,-.015,1]),en({idle:{P:[{B:0}]},walk:{P:[{B:0,K:I([0,0,0,1],125,0,0)},{B:.2,K:I([0,0,0,1],80,0,0)}]},jump:{P:[{B:0,K:[0,0,0,1]},{B:.2,K:I([0,0,0,1],0,0,-135),R:on},{B:.4,K:[0,0,0,1],R:nn}],k:0}})],[Xt([.07,0,0],[.753,0,0,.658]),rn(4,[1,0,0,0,0,-.992,.124,0,0,-.124,-.992,0,-.073,.291,-.509,1]),en({idle:{P:[{B:0}]},walk:{P:[{B:0,K:I([0,0,0,1],125,0,0)},{B:.2,K:I([0,0,0,1],80,0,0)}]},jump:{P:[{B:0,K:[0,0,0,1]},{B:.2,K:I([0,0,0,1],0,0,45),R:on},{B:.4,K:[0,0,0,1],R:nn}],k:0}})],[Xt([-.07,0,0],[.753,0,0,.658]),rn(5,[1,0,0,0,0,-.992,.124,0,0,-.124,-.992,0,.073,.291,-.509,1]),en({idle:{P:[{B:0}]},walk:{P:[{B:0,K:I([0,0,0,1],80,0,0)},{B:.2,K:I([0,0,0,1],125,0,0)}]},jump:{P:[{B:0,K:[0,0,0,1]},{B:.2,K:I([0,0,0,1],0,0,-45),R:on},{B:.4,K:[0,0,0,1],R:nn}],k:0}})])])]}function un(t){return[n([Xt([0,2,0],void 0,[.5,8,.5]),tt(t.mo,t.vo,[.119,.027,.012,1])],[Xt([0,3.7051446437835693,-.125],void 0,[1.5,.22499999403953552,.10000000149011612]),tt(t.mo,t.do,[.119,.027,.012,1])],[Xt([0,3.7051446437835693,.125],void 0,[1.5,.22499999403953552,.10000000149011612]),tt(t.mo,t.do,[.119,.027,.012,1])],[Xt([0,3.1643192768096924,-.125],void 0,[1.5,.22499999403953552,.10000000149011612]),tt(t.mo,t.do,[.119,.027,.012,1])],[Xt([.6499999761581421,3.875,-.125],void 0,[.20000000298023224,.30000001192092896,.20000000298023224]),tt(t.mo,t.vo,[.367,.367,.367,1])],[Xt([.5,3.875,-.125],void 0,[.20000000298023224,.30000001192092896,.20000000298023224]),tt(t.mo,t.vo,[.367,.367,.367,1])],[Xt([.6499999761581421,3.3499999046325684,-.125],void 0,[.20000000298023224,.30000001192092896,.20000000298023224]),tt(t.mo,t.vo,[.367,.367,.367,1])],[Xt([.5,3.3499999046325684,-.125],void 0,[.20000000298023224,.30000001192092896,.20000000298023224]),tt(t.mo,t.vo,[.367,.367,.367,1])],[Xt([-.1698063760995865,2.8801214694976807,-.12012429535388947],[0,0,-.38340887427330017,.9235787391662598],[.6000000238418579,.10000000149011612,.02500000037252903]),tt(t.mo,t.do,[.367,.367,.367,1])],[Xt([-.5,3.875,.125],void 0,[.20000000298023224,.30000001192092896,.20000000298023224]),tt(t.mo,t.vo,[.367,.367,.367,1])],[Xt([-.6499999761581421,3.875,.125],void 0,[.20000000298023224,.30000001192092896,.20000000298023224]),tt(t.mo,t.vo,[.367,.367,.367,1])])]}function hn(t=[1,1,1],n=1){return(o,i)=>{o.o.i[i]|=4096,o.o.Rt[i]={$:1,St:t,Kt:n**2}}}function _n(t){return[an(null,[0,1,0,0]),fn(0,.03),n([Xt([0,10,10],I([0,0,0,1],-45,0,0)),hn([1,1,1],.9),Qt(t.$n.Hn,10,1,100)])]}function mn(t,o=.7,i=2.5){let e=qt(.5,.9),r=Ot(400,600),a=qt(o,i),l=[],s=[];for(let t=0;t<r;t++)l.push(qt(-e,e),qt(-e,e),qt(-e,e),Ot(0,7)),s.push(...I([0,0,0,0],qt(-90,90),qt(-90,90),qt(-90,90)));return[n([Xt([0,a/2,0],void 0,[.25,2*a,.25]),tt(t.mo,t.vo,[.64,.16,.16,1])],[Xt([0,a,0]),it(t.Ao,Float32Array.from(l),Float32Array.from(s),ai)])]}function dn(t){let n=qt(.5,.9),o=Ot(400,600),i=[],e=[];for(let t=0;t<o;t++)i.push(qt(-n,n),qt(-n,n),qt(-n,n),Ot(0,7)),e.push(...I([0,0,0,0],qt(-90,90),qt(-90,90),qt(-90,90)));return[it(t.Ao,Float32Array.from(i),Float32Array.from(e),ai)]}const vn=35044,gn=34962,pn=34963,yn=2304,wn=9729,xn=3553,An=33984,zn=36160,Mn=5123,Tn=5126,Fn=document.getElementById("update"),bn=document.getElementById("delta"),Cn=document.getElementById("fps"),In=1/60;let Sn=Float32Array.from([-.5,-.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,-.5,-.5,.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5]),kn=Float32Array.from([-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,1,0,0,1,0,0,1,0,0,1,0,0,0,0,1,0,0,1,0,0,1,0,0,1,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,1,0,0,1,0,0,1,0,0,1,0]),Pn=Float32Array.from([.666667,.333333,.333333,.333333,.333333,0,.666667,0,.333333,.666667,0,.666667,0,.333333,.333333,.333333,.333333,.333333,0,.333333,0,0,.333333,0,.333333,.666667,.333333,.333333,.666667,.333333,.666667,.666667,1,.333333,.666667,.333333,.666667,0,1,0,.333333,.666667,.333333,1,0,1,0,.666667]),Bn=Float32Array.from([]),Rn=Uint16Array.from([23,22,20,22,21,20,19,18,16,18,17,16,15,14,12,14,13,12,11,10,8,10,9,8,7,6,4,6,5,4,3,2,0,2,1,0]),Ln=Float32Array.from([0,-.25,-.25,0,.25,-.25,.176777,.25,-.176777,.176777,-.25,-.176777,.176777,-.25,-.176777,.176777,.25,-.176777,.25,.25,0,.25,-.25,0,.25,-.25,0,.25,.25,0,.176777,.25,.176777,.176777,-.25,.176777,.176777,-.25,.176777,.176777,.25,.176777,0,.25,.25,0,-.25,.25,0,-.25,.25,0,.25,.25,-.176777,.25,.176777,-.176777,-.25,.176777,-.176777,-.25,.176777,-.176777,.25,.176777,-.25,.25,0,-.25,-.25,0,.176777,.25,-.176777,0,.25,-.25,-.176777,.25,-.176777,-.25,.25,0,-.176777,.25,.176777,0,.25,.25,.176777,.25,.176777,.25,.25,0,-.25,-.25,0,-.25,.25,0,-.176777,.25,-.176777,-.176777,-.25,-.176777,-.176777,-.25,-.176777,-.176777,.25,-.176777,0,.25,-.25,0,-.25,-.25,0,-.25,-.25,.176777,-.25,-.176777,.25,-.25,0,.176777,-.25,.176777,0,-.25,.25,-.176777,-.25,.176777,-.25,-.25,0,-.176777,-.25,-.176777]),Vn=Float32Array.from([.3827,0,-.9239,.3827,0,-.9239,.3827,0,-.9239,.3827,0,-.9239,.9239,0,-.3827,.9239,0,-.3827,.9239,0,-.3827,.9239,0,-.3827,.9239,0,.3827,.9239,0,.3827,.9239,0,.3827,.9239,0,.3827,.3827,0,.9239,.3827,0,.9239,.3827,0,.9239,.3827,0,.9239,-.3827,0,.9239,-.3827,0,.9239,-.3827,0,.9239,-.3827,0,.9239,-.9239,0,.3827,-.9239,0,.3827,-.9239,0,.3827,-.9239,0,.3827,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,-.9239,0,-.3827,-.9239,0,-.3827,-.9239,0,-.3827,-.9239,0,-.3827,-.3827,0,-.9239,-.3827,0,-.9239,-.3827,0,-.9239,-.3827,0,-.9239,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0]),Kn=Float32Array.from([1,.5,1,1,.875,1,.875,.5,.875,.5,.875,1,.75,1,.75,.5,.75,.5,.75,1,.625,1,.625,.5,.625,.5,.625,1,.5,1,.5,.5,.5,.5,.5,1,.375,1,.375,.5,.375,.5,.375,1,.25,1,.25,.5,.419706,.419706,.25,.49,.080294,.419706,.01,.25,.080294,.080294,.25,.01,.419706,.080294,.49,.25,.25,.5,.25,1,.125,1,.125,.5,.125,.5,.125,1,0,1,0,.5,.75,.49,.919706,.419706,.99,.25,.919706,.080294,.75,.01,.580294,.080294,.51,.25,.580294,.419706]),Wn=Float32Array.from([]),Dn=Uint16Array.from([47,46,45,45,44,47,44,43,47,43,42,47,42,41,47,41,40,47,39,38,36,38,37,36,35,34,32,34,33,32,31,30,29,29,28,31,28,27,31,27,26,31,26,25,31,25,24,31,23,22,20,22,21,20,19,18,16,18,17,16,15,14,12,14,13,12,11,10,8,10,9,8,7,6,4,6,5,4,3,2,0,2,1,0]),En=Float32Array.from([-.008597,.008676,0,.008402,.007591,0,0,.416493,.06595,-.008597,.008676,0,0,-.416493,.06595,.008402,.007591,0]),Xn=Float32Array.from([-.0102,-.1594,.9872,-.0102,-.1594,.9872,-.0102,-.1594,.9872,.0098,.1535,.9881,.0098,.1535,.9881,.0098,.1535,.9881]),Nn=Float32Array.from([0,0,1,1,0,1,0,0,1,0,1,1]),Hn=Float32Array.from([]),$n=Uint16Array.from([5,4,3,2,1,0]),Gn=Float32Array.from([.040103,0,.044704,-.054562,0,-.050619,-.124883,.01643,.126198,.040103,0,.044704,.12554,.021688,-.126198,-.054562,0,-.050619]),Un=Float32Array.from([.0665,.9956,-.0661,.0665,.9956,-.0661,.0665,.9956,-.0661,-.0844,.9929,.0838,-.0844,.9929,.0838,-.0844,.9929,.0838]),jn=Float32Array.from([1,0,0,1,0,0,1,0,1,1,0,1]),Yn=Float32Array.from([]),On=Uint16Array.from([5,4,3,2,1,0]),qn=Float32Array.from([.147,.44,.021,.073,-0,-.008,.132,.234,-.28,.088,.409,-.55,.073,-.001,-.521,.103,.688,.168,.176,.893,.08,-.147,.44,.021,0,.482,-.037,0,.219,-.012,-.073,-0,-.008,-.132,.234,-.28,0,.219,-.53,-.088,.409,-.55,0,.432,-.585,-.073,-.001,-.521,-.103,.688,.168,0,.571,.373,-.176,.893,.08,0,.746,.168]),Jn=Float32Array.from([.997,.009,.083,-.007,-.962,.275,.797,-.599,-.074,.688,.428,-.586,.035,-.971,-.235,.726,.191,.661,.417,.903,-.104,-.997,.009,.083,0,.785,-.62,0,-.59,.807,.007,-.962,.275,-.797,-.599,-.074,0,-.472,-.882,-.688,.428,-.586,0,.571,-.821,-.035,-.971,-.235,-.726,.191,.661,0,-.039,.999,-.417,.903,-.104,0,.932,.363]),Qn=Float32Array.from([]),Zn=Float32Array.from([2,.918,1,.082,2,1,0,0,4,.5,2,.5,4,.907,0,.093,4,1,0,0,1,.893,2,.107,1,1,0,0,3,.918,1,.082,1,1,0,0,2,.5,3,.5,3,1,0,0,5,.5,3,.5,0,1,0,0,5,.907,0,.093,0,1,0,0,5,1,0,0,1,.893,3,.107,1,1,0,0,1,1,0,0,1,1,0,0]),to=Uint16Array.from([18,19,16,19,17,16,7,13,8,16,17,7,19,18,8,8,18,7,7,17,9,7,18,16,12,11,9,11,15,13,12,15,11,12,14,13,13,15,12,11,13,7,13,14,8,9,10,7,11,10,9,7,10,11,19,6,5,17,19,5,3,0,8,17,5,0,6,19,8,6,8,0,17,0,9,6,0,5,2,12,9,4,2,3,4,12,2,14,12,3,4,3,12,3,2,0,14,3,8,1,9,0,1,2,9,1,0,2]),no=Float32Array.from([-.3,1.2,-.15,.45,1.47,0,.3,1.2,-.15,.27,.63,0,0,.63,.15,.15,0,0,.3,1.2,.15,1.05,1.35,0,-1.05,1.35,0,-.45,1.47,0,-.3,1.2,.15,0,.63,-.15,-.15,0,0,-.27,.63,0,0,2.25,-.15,0,2.25,.45]),oo=Float32Array.from([-.424,-.0402,-.9048,.3556,.9341,-.0314,.424,-.0402,-.9048,.9544,-.2985,0,0,-.2684,.9633,.0912,-.9958,0,.424,-.0402,.9048,.9979,.0645,0,-.9979,.0645,0,-.3556,.9341,-.0314,-.424,-.0402,.9048,0,-.2684,-.9633,-.0912,-.9958,0,-.9544,-.2985,0,0,.767,-.6416,0,.6255,.7802]),io=Float32Array.from([]),eo=Float32Array.from([3,1,0,0,1,.75,2,.25,2,1,0,0,4,1,0,0,4,.5,5,.5,4,1,0,0,2,1,0,0,2,1,0,0,3,1,0,0,1,.75,3,.25,3,1,0,0,4,.5,5,.5,5,1,0,0,5,1,0,0,1,1,0,0,1,1,0,0]),ro=Uint16Array.from([15,9,14,1,15,14,9,15,1,1,14,9,2,7,1,9,1,6,6,7,2,7,6,1,6,2,3,6,3,4,5,4,3,11,3,2,4,5,11,4,11,12,11,5,3,12,13,4,13,12,11,10,6,4,10,4,13,6,10,9,8,9,10,0,11,2,0,13,11,1,9,0,10,0,8,0,10,13,9,8,0,2,1,0]),ao=Float32Array.from([-.111,.575,-.859,-0,.384,-.481,-0,.251,-.862,.131,.518,-.819,-.152,.634,-1.248,-.008,.196,-1.3,.216,.518,-1.191,-.247,.793,-1.762,-0,.141,-1.608,.242,.549,-1.756,-.208,.738,-2.194,-0,.234,-2.101,.167,.495,-2.202,-.076,.65,-2.622,-0,.376,-2.482,.137,.502,-2.539,-.038,.426,-2.917]),lo=Float32Array.from([-.701,.652,.289,-.03,-.161,.986,-.097,-.964,.248,.848,.425,.317,-.708,.678,.198,-.131,-.98,.148,.94,.301,.159,-.662,.749,-.02,-.089,-.996,.005,.956,.294,-.017,-.643,.705,-.298,-.11,-.97,-.215,.976,.155,-.154,-.456,.779,-.431,-.203,-.949,-.242,.966,.102,-.237,-.139,-.245,-.96]),so=Float32Array.from([]),fo=Float32Array.from([0,.933,1,.067,0,1,0,0,0,.946,1,.054,0,.953,1,.047,1,.942,2,.058,1,.877,2,.123,1,.97,2,.03,2,.858,3,.142,2,.911,3,.089,2,.932,3,.068,3,.917,4,.083,3,.937,4,.063,3,.945,4,.055,4,.983,3,.017,4,.917,3,.083,4,.956,3,.044,4,1,0,0]),co=Uint16Array.from([16,15,13,16,14,15,16,13,14,13,15,10,15,12,10,15,14,12,14,11,12,14,13,11,13,10,11,12,11,9,11,8,9,11,10,8,10,7,8,8,7,5,7,4,5,7,9,4,9,6,4,10,12,7,12,9,7,6,5,3,5,2,3,5,4,2,4,0,2,4,6,0,6,3,0,9,8,6,8,5,6,1,0,3,1,3,2,2,0,1]),uo=Float32Array.from([.5,0,.5,-.5,0,-.5,-.5,0,.5,.5,0,-.5]),ho=Float32Array.from([0,1,0,0,1,0,0,1,0,0,1,0]),_o=Float32Array.from([1,0,0,1,0,0,1,1]),mo=Float32Array.from([]),vo=Uint16Array.from([1,3,0,2,1,0]);const go=Math.PI/180,po=4194305,yo=4194306;let wo,xo=[0,0,0],Ao=[0,0,0],zo=[0,0,0];const Mo=4194308,To=[0,0,0],Fo=[0,0,0],bo=4194320,Co=[[.5,.5,.5],[.5,.5,-.5],[-.5,.5,-.5],[-.5,.5,.5],[.5,-.5,.5],[.5,-.5,-.5],[-.5,-.5,-.5],[-.5,-.5,.5]],Io=4194368,So=4210816,ko=[0,0],Po=4194816,Bo=4198400;let Ro=[0,0,0];const Lo=4202496,Vo=4210688,Ko=[0,0,0,1],Wo=new WeakMap,Do=new WeakMap,Eo=new WeakMap,Xo=4195328;let No=[0,0,0],Ho=[0,0,0];const $o=4325376,Go=4325376,Uo=4325440;let jo=[0,0,0];const Yo=1048576,Oo=4259840,qo=4259840,Jo=new Float32Array(96),Qo=4456448,Zo=4718592,ti=2097152,ni=4194304,oi=12582976;let ii;class ei extends class{constructor(){this.i=[],this.zo=[]}t(){return this.zo.length>0?this.zo.pop():this.i.push(0)-1}u(t){this.i[t]=0,this.zo.push(t)}}{constructor(){super(...arguments),this.T=[],this.X=[],this.Yn=[],this.jn=[],this.l=[],this.zn=[],this._t=[],this.wt=[],this.Mo=[],this.mn=[],this.kt=[],this.Rt=[],this.po=[],this.dt=[],this.To=[],this.qt=[],this.pn=[],this.ro=[],this.lo=[],this.Fo=[],this.co=[],this.M=[],this.F=[]}}let ri=1;const ai=[0,1,0,0,.36,0,0,.5,0,.48,.98,0,1,.84,0,1,.54,0,.84,.21,.21];let li=new class extends class extends class{constructor(){this.bo=0,this.Co=0,this.Mt=window.innerWidth,this.Tt=window.innerHeight,this.Io=!0,this.xt={MouseX:0,MouseY:0},this.Ft={MouseX:0,MouseY:0},this.So={Mouse:0,Mouse0:0,Mouse1:0,Mouse2:0,Touch0:0,Touch1:0},this.ko={},this.Po=document.querySelector("main"),document.addEventListener("visibilitychange",(()=>document.hidden?this.Bo():this.Ro())),this.Po.addEventListener("contextmenu",(t=>t.preventDefault())),this.Po.addEventListener("mousedown",(t=>{this.xt["Mouse"+t.button]=1,this.Ft["Mouse"+t.button]=1})),this.Po.addEventListener("mouseup",(t=>{this.xt["Mouse"+t.button]=0,this.Ft["Mouse"+t.button]=-1})),this.Po.addEventListener("mousemove",(t=>{this.xt.MouseX=t.clientX,this.xt.MouseY=t.clientY,this.Ft.MouseX=t.movementX,this.Ft.MouseY=t.movementY})),this.Po.addEventListener("wheel",(t=>{t.preventDefault(),this.Ft.WheelY=t.deltaY})),this.Po.addEventListener("touchstart",(t=>{t.preventDefault(),1===t.touches.length&&(this.ko={});for(let n=0;n<t.touches.length;n++)this.ko[t.touches[n].identifier]=n;for(let n=0;n<t.changedTouches.length;n++){let o=t.changedTouches[n],i=this.ko[o.identifier];this.xt["Touch"+i]=1,this.xt[`Touch${i}X`]=o.clientX,this.xt[`Touch${i}Y`]=o.clientY,this.Ft["Touch"+i]=1,this.Ft[`Touch${i}X`]=0,this.Ft[`Touch${i}Y`]=0}})),this.Po.addEventListener("touchmove",(t=>{t.preventDefault();for(let n=0;n<t.changedTouches.length;n++){let o=t.changedTouches[n],i=this.ko[o.identifier];this.Ft[`Touch${i}X`]=o.clientX-this.xt[`Touch${i}X`],this.Ft[`Touch${i}Y`]=o.clientY-this.xt[`Touch${i}Y`],this.xt[`Touch${i}X`]=o.clientX,this.xt[`Touch${i}Y`]=o.clientY}})),this.Po.addEventListener("touchend",(t=>{t.preventDefault();for(let n=0;n<t.changedTouches.length;n++){let o=this.ko[t.changedTouches[n].identifier];this.xt["Touch"+o]=0,this.Ft["Touch"+o]=-1}})),this.Po.addEventListener("touchcancel",(t=>{t.preventDefault();for(let n=0;n<t.changedTouches.length;n++){let o=this.ko[t.changedTouches[n].identifier];this.xt["Touch"+o]=0,this.Ft["Touch"+o]=-1}})),window.addEventListener("keydown",(t=>{t.repeat||(this.xt[t.code]=1,this.Ft[t.code]=1)})),window.addEventListener("keyup",(t=>{this.xt[t.code]=0,this.Ft[t.code]=-1}))}Ro(){let t=0,n=performance.now(),o=i=>{let e=(i-n)/1e3;for(this.Lo(e),t+=e;t>=In;)t-=In,this.Vo(In);this.Ko(e),this.Wo(e),n=i,this.bo=requestAnimationFrame(o)};this.Bo(),o(n)}Bo(){cancelAnimationFrame(this.bo),this.bo=0}Lo(t){this.Co=performance.now();let n=Math.abs(this.Ft.MouseX)+Math.abs(this.Ft.MouseY);this.So.Mouse+=n,1===this.xt.Mouse0&&(this.So.Mouse0+=n),1===this.xt.Mouse1&&(this.So.Mouse1+=n),1===this.xt.Mouse2&&(this.So.Mouse2+=n),1===this.xt.Touch0&&(this.So.Touch0+=Math.abs(this.Ft.Touch0X)+Math.abs(this.Ft.Touch0Y)),1===this.xt.Touch1&&(this.So.Touch1+=Math.abs(this.Ft.Touch1X)+Math.abs(this.Ft.Touch1Y))}Vo(t){}Ko(t){}Wo(t){this.Io=!1,-1===this.Ft.Mouse0&&(this.So.Mouse0=0),-1===this.Ft.Mouse1&&(this.So.Mouse1=0),-1===this.Ft.Mouse2&&(this.So.Mouse2=0),-1===this.Ft.Touch0&&(this.So.Touch0=0),-1===this.Ft.Touch1&&(this.So.Touch1=0);for(let t in this.Ft)this.Ft[t]=0;let n=performance.now()-this.Co;Fn&&(Fn.textContent=n.toFixed(1)),bn&&(bn.textContent=(1e3*t).toFixed(1)),Cn&&(Cn.textContent=(1/t).toFixed())}}{constructor(){super(),this.Do=document.querySelector("#billboard"),this.bt=this.Do.getContext("2d"),this.Eo=document.querySelector("#scene"),this.Ht=this.Eo.getContext("webgl2"),this.Audio=new AudioContext,this.Ht.enable(2929),this.Ht.enable(2884)}}{constructor(){super(...arguments),this.o=new ei,this.mo=function(t){let n=s(t,"#version 300 es\n\n\nuniform mat4 pv;\nuniform mat4 world;\nuniform mat4 self;\n\nin vec3 attr_position;\nin vec3 attr_normal;\n\nout vec4 vert_position;\nout vec3 vert_normal;\n\nvoid main() {\nvert_position = world * vec4(attr_position, 1.0);\nvert_normal = (vec4(attr_normal, 1.0) * self).xyz;\ngl_Position = pv * vert_position;\n}\n","#version 300 es\n\nprecision mediump float;\n\n\nconst int MAX_LIGHTS = 8;\n\nuniform vec3 eye;\nuniform vec4 diffuse_color;\nuniform vec4 specular_color;\nuniform float shininess;\nuniform vec4 light_positions[MAX_LIGHTS];\nuniform vec4 light_details[MAX_LIGHTS];\nuniform vec4 fog_color;\nuniform float fog_distance;\n\nin vec4 vert_position;\nin vec3 vert_normal;\n\nout vec4 frag_color;\n\nconst float bands = 2.0;\nfloat posterize(float factor) {\nreturn floor(factor * bands) / bands;\n}\n\nvoid main() {\nvec3 world_normal = normalize(vert_normal);\n\nvec3 view_dir = eye - vert_position.xyz;\nvec3 view_normal = normalize(view_dir);\n\n\nvec3 light_acc = diffuse_color.rgb * 0.3;\n\nfor (int i = 0; i < MAX_LIGHTS; i++) {\nif (light_positions[i].w == 0.0) {\nbreak;\n}\n\nvec3 light_color = light_details[i].rgb;\nfloat light_intensity = light_details[i].a;\n\nvec3 light_normal;\nif (light_positions[i].w == 1.0) {\n\nlight_normal = light_positions[i].xyz;\n} else {\nvec3 light_dir = light_positions[i].xyz - vert_position.xyz;\nfloat light_dist = length(light_dir);\nlight_normal = light_dir / light_dist;\n\nlight_intensity /= (light_dist * light_dist);\n}\n\nfloat diffuse_factor = dot(world_normal, light_normal);\nif (diffuse_factor > 0.0) {\n\nlight_acc += diffuse_color.rgb * light_color * posterize(diffuse_factor * light_intensity);\n\nif (shininess > 0.0) {\n\n\n\n\n\n\nvec3 h = normalize(light_normal + view_normal);\nfloat specular_angle = max(dot(h, world_normal), 0.0);\nfloat specular_factor = pow(specular_angle, shininess);\n\n\nlight_acc += specular_color.rgb * light_color * posterize(specular_factor * light_intensity);\n}\n}\n}\n\nfrag_color = vec4(light_acc, 1.0);\n\nfloat eye_distance = length(view_dir);\nfloat fog_amount = clamp(0.0, 1.0, eye_distance / fog_distance);\nfrag_color = mix(frag_color, fog_color, smoothstep(0.0, 1.0, fog_amount));\n}\n");return{Sn:4,bn:n,Ut:{In:t.getUniformLocation(n,"pv"),o:t.getUniformLocation(n,"world"),Dt:t.getUniformLocation(n,"self"),nn:t.getUniformLocation(n,"diffuse_color"),on:t.getUniformLocation(n,"specular_color"),en:t.getUniformLocation(n,"shininess"),Ln:t.getUniformLocation(n,"eye"),Lt:t.getUniformLocation(n,"light_positions"),Vt:t.getUniformLocation(n,"light_details"),Kn:t.getUniformLocation(n,"fog_color"),Wn:t.getUniformLocation(n,"fog_distance"),Gt:t.getAttribLocation(n,"attr_position"),Yt:t.getAttribLocation(n,"attr_normal")}}}(this.Ht),this.Xo=function(t){let n=s(t,"#version 300 es\n\n\nuniform mat4 pv;\nuniform mat4 world;\nuniform mat4 self;\n\nin vec3 attr_position;\nin vec3 attr_normal;\n\nout vec4 vert_position;\nout vec3 vert_normal;\n\nvoid main() {\nvert_position = world * vec4(attr_position, 1.0);\nvert_normal = (vec4(attr_normal, 1.0) * self).xyz;\ngl_Position = pv * vert_position;\n}\n","#version 300 es\n\nprecision mediump float;\nprecision lowp sampler2DShadow;\n\n\nconst int MAX_LIGHTS = 8;\n\nuniform vec3 eye;\nuniform vec4 diffuse_color;\nuniform vec4 specular_color;\nuniform float shininess;\nuniform vec4 light_positions[MAX_LIGHTS];\nuniform vec4 light_details[MAX_LIGHTS];\nuniform mat4 shadow_space;\nuniform sampler2DShadow shadow_map;\nuniform vec4 fog_color;\nuniform float fog_distance;\n\nin vec4 vert_position;\nin vec3 vert_normal;\n\nout vec4 frag_color;\n\n\n\nfloat shadow_factor(vec4 world_pos, float min) {\nvec4 shadow_space_pos = shadow_space * world_pos;\nvec3 shadow_space_ndc = shadow_space_pos.xyz / shadow_space_pos.w;\n\nshadow_space_ndc = shadow_space_ndc * 0.5 + 0.5;\n\n\nshadow_space_ndc.z -= 0.001;\n\nreturn texture(shadow_map, shadow_space_ndc) * (1.0 - min) + min;\n}\n\nvoid main() {\nvec3 world_normal = normalize(vert_normal);\n\nvec3 view_dir = eye - vert_position.xyz;\nvec3 view_normal = normalize(view_dir);\n\n\nvec3 light_acc = diffuse_color.rgb * 0.1;\n\nfor (int i = 0; i < MAX_LIGHTS; i++) {\nif (light_positions[i].w == 0.0) {\nbreak;\n}\n\nvec3 light_color = light_details[i].rgb;\nfloat light_intensity = light_details[i].a;\n\nvec3 light_normal;\nif (light_positions[i].w == 1.0) {\n\nlight_normal = light_positions[i].xyz;\n} else {\nvec3 light_dir = light_positions[i].xyz - vert_position.xyz;\nfloat light_dist = length(light_dir);\nlight_normal = light_dir / light_dist;\n\nlight_intensity /= (light_dist * light_dist);\n}\n\nfloat diffuse_factor = dot(world_normal, light_normal);\nif (diffuse_factor > 0.0) {\n\nlight_acc += diffuse_color.rgb * diffuse_factor * light_color * light_intensity;\n\nif (shininess > 0.0) {\n\n\n\n\n\n\nvec3 h = normalize(light_normal + view_normal);\nfloat specular_angle = max(dot(h, world_normal), 0.0);\nfloat specular_factor = pow(specular_angle, shininess);\n\n\nlight_acc += specular_color.rgb * specular_factor * light_color * light_intensity;\n}\n}\n}\n\nvec3 shaded_rgb = light_acc * shadow_factor(vert_position, 0.5);\nfrag_color= vec4(shaded_rgb, 1.0);\n\nfloat eye_distance = length(view_dir);\nfloat fog_amount = clamp(0.0, 1.0, eye_distance / fog_distance);\nfrag_color = mix(frag_color, fog_color, smoothstep(0.0, 1.0, fog_amount));\n}\n");return{Sn:4,bn:n,Ut:{In:t.getUniformLocation(n,"pv"),o:t.getUniformLocation(n,"world"),Dt:t.getUniformLocation(n,"self"),nn:t.getUniformLocation(n,"diffuse_color"),on:t.getUniformLocation(n,"specular_color"),en:t.getUniformLocation(n,"shininess"),Ln:t.getUniformLocation(n,"eye"),Lt:t.getUniformLocation(n,"light_positions"),Vt:t.getUniformLocation(n,"light_details"),Un:t.getUniformLocation(n,"shadow_space"),Gn:t.getUniformLocation(n,"shadow_map"),Kn:t.getUniformLocation(n,"fog_color"),Wn:t.getUniformLocation(n,"fog_distance"),Gt:t.getAttribLocation(n,"attr_position"),Yt:t.getAttribLocation(n,"attr_normal")}}}(this.Ht),this.wo=function(t){let n=s(t,"#version 300 es\n\nuniform mat4 pv;\nuniform mat4 world;\nuniform mat4 self;\nuniform mat4 bones[6];\n\nin vec3 attr_position;\nin vec3 attr_normal;\nin vec4 attr_weights;\n\nout vec4 vert_position;\nout vec3 vert_normal;\n\nmat4 world_weighted(vec4 weights) {\nreturn weights[1] * bones[int(weights[0])] + weights[3] * bones[int(weights[2])];\n}\n\nvoid main() {\nmat4 bone_world = world_weighted(attr_weights);\nvert_position = bone_world * vec4(attr_position, 1.0);\nvert_normal = normalize(mat3(bone_world) * attr_normal);\ngl_Position = pv * vert_position;\n}\n","#version 300 es\n\nprecision mediump float;\n\n\nconst int MAX_LIGHTS = 8;\n\nuniform vec3 eye;\nuniform vec4 diffuse_color;\nuniform vec4 specular_color;\nuniform float shininess;\nuniform vec4 light_positions[MAX_LIGHTS];\nuniform vec4 light_details[MAX_LIGHTS];\n\nin vec4 vert_position;\nin vec3 vert_normal;\n\nout vec4 frag_color;\n\nconst float bands = 2.0;\nfloat posterize(float factor) {\nreturn floor(factor * bands) / bands;\n}\n\nvoid main() {\nvec3 world_normal = normalize(vert_normal);\n\nvec3 view_dir = eye - vert_position.xyz;\nvec3 view_normal = normalize(view_dir);\n\n\nvec3 light_acc = diffuse_color.rgb * 0.3;\n\nfor (int i = 0; i < MAX_LIGHTS; i++) {\nif (light_positions[i].w == 0.0) {\nbreak;\n}\n\nvec3 light_color = light_details[i].rgb;\nfloat light_intensity = light_details[i].a;\n\nvec3 light_normal;\nif (light_positions[i].w == 1.0) {\n\nlight_normal = light_positions[i].xyz;\n} else {\nvec3 light_dir = light_positions[i].xyz - vert_position.xyz;\nfloat light_dist = length(light_dir);\nlight_normal = light_dir / light_dist;\n\nlight_intensity /= (light_dist * light_dist);\n}\n\nfloat diffuse_factor = dot(world_normal, light_normal);\nif (diffuse_factor > 0.0) {\n\nlight_acc += diffuse_color.rgb * light_color * posterize(diffuse_factor * light_intensity);\n\nif (shininess > 0.0) {\n\n\n\n\n\n\nvec3 h = normalize(light_normal + view_normal);\nfloat specular_angle = max(dot(h, world_normal), 0.0);\nfloat specular_factor = pow(specular_angle, shininess);\n\n\nlight_acc += specular_color.rgb * light_color * posterize(specular_factor * light_intensity);\n}\n}\n}\n\nfrag_color = vec4(light_acc, 1.0);\n}\n");return{Sn:4,bn:n,Ut:{In:t.getUniformLocation(n,"pv"),o:t.getUniformLocation(n,"world"),Dt:t.getUniformLocation(n,"self"),nn:t.getUniformLocation(n,"diffuse_color"),on:t.getUniformLocation(n,"specular_color"),en:t.getUniformLocation(n,"shininess"),Ln:t.getUniformLocation(n,"eye"),Lt:t.getUniformLocation(n,"light_positions"),Vt:t.getUniformLocation(n,"light_details"),Gt:t.getAttribLocation(n,"attr_position"),Yt:t.getAttribLocation(n,"attr_normal"),Jn:t.getUniformLocation(n,"bones"),an:t.getAttribLocation(n,"attr_weights")}}}(this.Ht),this.No=function(t){let n=s(t,"#version 300 es\n\nuniform mat4 pv;\nuniform vec4 color_start;\nuniform vec4 color_end;\n\nuniform vec4 details;\n\n\nin vec4 attr_origin_age;\nin vec3 attr_direction;\n\nout vec4 vert_color;\n\nvoid main() {\n\nvec3 velocity = attr_direction * details.y;\ngl_Position = pv * vec4(attr_origin_age.xyz + velocity * attr_origin_age.w, 1.0);\n\n\nfloat t = attr_origin_age.w / details.x;\ngl_PointSize = mix(details.z, details.w, t);\nvert_color = mix(color_start, color_end, t);\n}\n","#version 300 es\n\nprecision mediump float;\n\nin vec4 vert_color;\n\nout vec4 frag_color;\n\nvoid main() {\nfrag_color = vert_color;\n}\n");return{Sn:0,bn:n,Ut:{In:t.getUniformLocation(n,"pv"),Qn:t.getUniformLocation(n,"color_start"),Zn:t.getUniformLocation(n,"color_end"),no:t.getUniformLocation(n,"details"),io:t.getAttribLocation(n,"attr_origin_age"),vt:t.getAttribLocation(n,"attr_direction")}}}(this.Ht),this.Ho=function(t){let n=s(t,"#version 300 es\n\nuniform mat4 pv;\nuniform vec4 color_start;\nuniform vec4 color_end;\n\nuniform vec4 details;\n\n\nin vec4 attr_origin_age;\n\nin vec4 attr_direction_seed;\n\nout vec4 vert_color;\nout float vert_rand;\n\nvoid main() {\n\nvec3 velocity = attr_direction_seed.xyz * details.y;\ngl_Position = pv * vec4(attr_origin_age.xyz + velocity * attr_origin_age.w, 1.0);\n\n\nfloat t = attr_origin_age.w / details.x;\ngl_PointSize = mix(details.z, details.w, t);\nvert_color = mix(color_start, color_end, t);\n\n\nvert_rand = 3.14 * t + attr_direction_seed.w;\n}\n","#version 300 es\n\nprecision mediump float;\n\nuniform sampler2D texture_map;\n\nin vec4 vert_color;\nin float vert_rand;\n\nout vec4 frag_color;\n\nvoid main() {\n\nvec2 uv = gl_PointCoord + floor(vec2(cos(vert_rand) + 0.5, sin(vert_rand) + 0.5));\nfrag_color = vert_color * texture(texture_map, uv / 2.0);\n}\n");return{Sn:0,bn:n,Ut:{In:t.getUniformLocation(n,"pv"),Dn:t.getUniformLocation(n,"texture_map"),Qn:t.getUniformLocation(n,"color_start"),Zn:t.getUniformLocation(n,"color_end"),no:t.getUniformLocation(n,"details"),io:t.getAttribLocation(n,"attr_origin_age"),eo:t.getAttribLocation(n,"attr_direction_seed")}}}(this.Ht),this.Cn=function(t){let n=s(t,"#version 300 es\n\n\nuniform mat4 pv;\nuniform mat4 world;\n\nin vec3 attr_position;\n\nvoid main() {\ngl_Position = pv * world * vec4(attr_position, 1.0);\n}\n","#version 300 es\n\nprecision mediump float;\n\nout vec4 frag_color;\n\nvoid main() {\n\nfloat z = gl_FragCoord.z * 10.0;\nfrag_color = vec4(z, z, z, 1.0);\n}\n");return{Sn:4,bn:n,Ut:{In:t.getUniformLocation(n,"pv"),o:t.getUniformLocation(n,"world"),Gt:t.getAttribLocation(n,"attr_position")}}}(this.Ht),this.Pn=function(t){let n=s(t,"#version 300 es\n\n\nuniform mat4 pv;\nuniform mat4 world;\n\nin vec3 attr_position;\nin vec4 attr_offset;\nin vec4 attr_rotation;\n\nvoid main() {\nfloat x = attr_rotation.x;\nfloat y = attr_rotation.y;\nfloat z = attr_rotation.z;\nfloat w = attr_rotation.w;\n\nfloat x2 = x + x;\nfloat y2 = y + y;\nfloat z2 = z + z;\nfloat xx = x * x2;\nfloat yx = y * x2;\nfloat yy = y * y2;\nfloat zx = z * x2;\nfloat zy = z * y2;\nfloat zz = z * z2;\nfloat wx = w * x2;\nfloat wy = w * y2;\nfloat wz = w * z2;\n\nfloat m0 = 1.0 - yy - zz;\nfloat m1 = yx + wz;\nfloat m2 = zx - wy;\nfloat m3 = 0.0;\nfloat m4 = yx - wz;\nfloat m5 = 1.0 - xx - zz;\nfloat m6 = zy + wx;\nfloat m7 = 0.0;\nfloat m8 = zx + wy;\nfloat m9 = zy - wx;\nfloat m10 = 1.0 - xx - yy;\nfloat m11 = 0.0;\nfloat m12 = 0.0;\nfloat m13 = 0.0;\nfloat m14 = 0.0;\nfloat m15 = 1.0;\n\nmat4 rotation = mat4(\nm0, m1, m2, m3,\nm4, m5, m6, m7,\nm8, m9, m10, m11,\nm12, m13, m14, m15\n);\n\nvec4 world_position = world * rotation * vec4(attr_position + attr_offset.xyz, 1.0);\ngl_Position = pv * world_position;\n}\n","#version 300 es\n\nprecision mediump float;\n\nout vec4 frag_color;\n\nvoid main() {\n\nfloat z = gl_FragCoord.z * 10.0;\nfrag_color = vec4(z, z, z, 1.0);\n}\n");return{Sn:4,bn:n,Ut:{In:t.getUniformLocation(n,"pv"),o:t.getUniformLocation(n,"world"),Gt:t.getAttribLocation(n,"attr_position"),sn:t.getAttribLocation(n,"attr_offset"),fn:t.getAttribLocation(n,"attr_rotation")}}}(this.Ht),this.ln=function(t){let n=s(t,"#version 300 es\n\n\nconst int MAX_LIGHTS = 8;\n\nuniform mat4 pv;\nuniform mat4 world;\nuniform mat4 self;\nuniform vec3 palette[16];\n\nuniform int light_count;\nuniform vec4 light_positions[MAX_LIGHTS];\nuniform vec4 light_details[MAX_LIGHTS];\n\nuniform vec3 eye;\nuniform vec4 fog_color;\nuniform float fog_distance;\n\nin vec3 attr_position;\nin vec3 attr_normal;\nin vec4 attr_offset;\nin vec4 attr_rotation;\n\nout vec4 vert_color;\n\nvoid main() {\nfloat x = attr_rotation.x;\nfloat y = attr_rotation.y;\nfloat z = attr_rotation.z;\nfloat w = attr_rotation.w;\n\nfloat x2 = x + x;\nfloat y2 = y + y;\nfloat z2 = z + z;\nfloat xx = x * x2;\nfloat yx = y * x2;\nfloat yy = y * y2;\nfloat zx = z * x2;\nfloat zy = z * y2;\nfloat zz = z * z2;\nfloat wx = w * x2;\nfloat wy = w * y2;\nfloat wz = w * z2;\n\nfloat m0 = 1.0 - yy - zz;\nfloat m1 = yx + wz;\nfloat m2 = zx - wy;\nfloat m3 = 0.0;\nfloat m4 = yx - wz;\nfloat m5 = 1.0 - xx - zz;\nfloat m6 = zy + wx;\nfloat m7 = 0.0;\nfloat m8 = zx + wy;\nfloat m9 = zy - wx;\nfloat m10 = 1.0 - xx - yy;\nfloat m11 = 0.0;\nfloat m12 = 0.0;\nfloat m13 = 0.0;\nfloat m14 = 0.0;\nfloat m15 = 1.0;\n\nmat4 rotation = mat4(\nm0, m1, m2, m3,\nm4, m5, m6, m7,\nm8, m9, m10, m11,\nm12, m13, m14, m15\n);\n\nvec4 world_position = world * rotation * vec4(attr_position + attr_offset.xyz, 1.0);\nvec3 world_normal = normalize((rotation * vec4(attr_normal, 0.0) * self).xyz);\ngl_Position = pv * world_position;\n\n\nvec3 color = palette[int(attr_offset[3])];\nvec3 light_acc = color * 0.1;\n\nfor (int i = 0; i < MAX_LIGHTS; i++) {\nif (light_positions[i].w == 0.0) {\nbreak;\n}\n\nvec3 light_color = light_details[i].rgb;\nfloat light_intensity = light_details[i].a;\n\nvec3 light_normal;\nif (light_positions[i].w == 1.0) {\n\nlight_normal = light_positions[i].xyz;\n} else {\nvec3 light_dir = light_positions[i].xyz - world_position.xyz;\nfloat light_dist = length(light_dir);\nlight_normal = light_dir / light_dist;\n\nlight_intensity /= (light_dist * light_dist);\n}\n\nfloat diffuse_factor = dot(world_normal, light_normal);\nif (diffuse_factor > 0.0) {\n\nlight_acc += color * diffuse_factor * light_color * light_intensity;\n}\n}\n\nvert_color = vec4(light_acc, 1.0);\n\nfloat eye_distance = length(eye - world_position.xyz);\nfloat fog_amount = clamp(0.0, 1.0, eye_distance / fog_distance);\nvert_color = mix(vert_color, fog_color, smoothstep(0.0, 1.0, fog_amount));\n}\n\n","#version 300 es\n\nprecision mediump float;\nin vec4 vert_color;\nout vec4 frag_color;\n\nvoid main() {\nfrag_color = vert_color;\n}\n\n");return{Sn:4,bn:n,Ut:{In:t.getUniformLocation(n,"pv"),o:t.getUniformLocation(n,"world"),Dt:t.getUniformLocation(n,"self"),un:t.getUniformLocation(n,"palette"),Ln:t.getUniformLocation(n,"eye"),Lt:t.getUniformLocation(n,"light_positions"),Vt:t.getUniformLocation(n,"light_details"),Kn:t.getUniformLocation(n,"fog_color"),Wn:t.getUniformLocation(n,"fog_distance"),Gt:t.getAttribLocation(n,"attr_position"),Yt:t.getAttribLocation(n,"attr_normal"),sn:t.getAttribLocation(n,"attr_offset"),fn:t.getAttribLocation(n,"attr_rotation")}}}(this.Ht),this.Ao=function(t){let n=t.createBuffer();t.bindBuffer(gn,n),t.bufferData(gn,Gn,vn);let o=t.createBuffer();t.bindBuffer(gn,o),t.bufferData(gn,Un,vn);let i=t.createBuffer();t.bindBuffer(gn,i),t.bufferData(gn,jn,vn);let e=t.createBuffer();t.bindBuffer(gn,e),t.bufferData(gn,Yn,vn);let r=t.createBuffer();return t.bindBuffer(pn,r),t.bufferData(pn,On,vn),{$t:n,$o:Gn,jt:o,Go:Un,Uo:i,jo:jn,rn:e,Yo:Yn,Ot:r,Oo:On,kn:On.length}}(this.Ht),this.qo=function(t){let n=t.createBuffer();t.bindBuffer(gn,n),t.bufferData(gn,En,vn);let o=t.createBuffer();t.bindBuffer(gn,o),t.bufferData(gn,Xn,vn);let i=t.createBuffer();t.bindBuffer(gn,i),t.bufferData(gn,Nn,vn);let e=t.createBuffer();t.bindBuffer(gn,e),t.bufferData(gn,Hn,vn);let r=t.createBuffer();return t.bindBuffer(pn,r),t.bufferData(pn,$n,vn),{$t:n,$o:En,jt:o,Go:Xn,Uo:i,jo:Nn,rn:e,Yo:Hn,Ot:r,Oo:$n,kn:$n.length}}(this.Ht),this.Jo=function(t){let n=t.createBuffer();t.bindBuffer(gn,n),t.bufferData(gn,uo,vn);let o=t.createBuffer();t.bindBuffer(gn,o),t.bufferData(gn,ho,vn);let i=t.createBuffer();t.bindBuffer(gn,i),t.bufferData(gn,_o,vn);let e=t.createBuffer();t.bindBuffer(gn,e),t.bufferData(gn,mo,vn);let r=t.createBuffer();return t.bindBuffer(pn,r),t.bufferData(pn,vo,vn),{$t:n,$o:uo,jt:o,Go:ho,Uo:i,jo:_o,rn:e,Yo:mo,Ot:r,Oo:vo,kn:vo.length}}(this.Ht),this.do=function(t){let n=t.createBuffer();t.bindBuffer(gn,n),t.bufferData(gn,Sn,vn);let o=t.createBuffer();t.bindBuffer(gn,o),t.bufferData(gn,kn,vn);let i=t.createBuffer();t.bindBuffer(gn,i),t.bufferData(gn,Pn,vn);let e=t.createBuffer();t.bindBuffer(gn,e),t.bufferData(gn,Bn,vn);let r=t.createBuffer();return t.bindBuffer(pn,r),t.bufferData(pn,Rn,vn),{$t:n,$o:Sn,jt:o,Go:kn,Uo:i,jo:Pn,rn:e,Yo:Bn,Ot:r,Oo:Rn,kn:Rn.length}}(this.Ht),this.Qo=function(t){let n=t.createBuffer();t.bindBuffer(gn,n),t.bufferData(gn,no,vn);let o=t.createBuffer();t.bindBuffer(gn,o),t.bufferData(gn,oo,vn);let i=t.createBuffer();t.bindBuffer(gn,i),t.bufferData(gn,io,vn);let e=t.createBuffer();t.bindBuffer(gn,e),t.bufferData(gn,eo,vn);let r=t.createBuffer();return t.bindBuffer(pn,r),t.bufferData(pn,ro,vn),{$t:n,$o:no,jt:o,Go:oo,Uo:i,jo:io,rn:e,Yo:eo,Ot:r,Oo:ro,kn:ro.length}}(this.Ht),this.xo=function(t){let n=t.createBuffer();t.bindBuffer(gn,n),t.bufferData(gn,qn,vn);let o=t.createBuffer();t.bindBuffer(gn,o),t.bufferData(gn,Jn,vn);let i=t.createBuffer();t.bindBuffer(gn,i),t.bufferData(gn,Qn,vn);let e=t.createBuffer();t.bindBuffer(gn,e),t.bufferData(gn,Zn,vn);let r=t.createBuffer();return t.bindBuffer(pn,r),t.bufferData(pn,to,vn),{$t:n,$o:qn,jt:o,Go:Jn,Uo:i,jo:Qn,rn:e,Yo:Zn,Ot:r,Oo:to,kn:to.length}}(this.Ht),this.Zo=function(t){let n=t.createBuffer();t.bindBuffer(gn,n),t.bufferData(gn,ao,vn);let o=t.createBuffer();t.bindBuffer(gn,o),t.bufferData(gn,lo,vn);let i=t.createBuffer();t.bindBuffer(gn,i),t.bufferData(gn,so,vn);let e=t.createBuffer();t.bindBuffer(gn,e),t.bufferData(gn,fo,vn);let r=t.createBuffer();return t.bindBuffer(pn,r),t.bufferData(pn,co,vn),{$t:n,$o:ao,jt:o,Go:lo,Uo:i,jo:so,rn:e,Yo:fo,Ot:r,Oo:co,kn:co.length}}(this.Ht),this.vo=function(t){let n=t.createBuffer();t.bindBuffer(gn,n),t.bufferData(gn,Ln,vn);let o=t.createBuffer();t.bindBuffer(gn,o),t.bufferData(gn,Vn,vn);let i=t.createBuffer();t.bindBuffer(gn,i),t.bufferData(gn,Kn,vn);let e=t.createBuffer();t.bindBuffer(gn,e),t.bufferData(gn,Wn,vn);let r=t.createBuffer();return t.bindBuffer(pn,r),t.bufferData(pn,Dn,vn),{$t:n,$o:Ln,jt:o,Go:Vn,Uo:i,jo:Kn,rn:e,Yo:Wn,Ot:r,Oo:Dn,kn:Dn.length}}(this.Ht),this.Lt=new Float32Array(32),this.Vt=new Float32Array(32),this.ti=[],this.$n={Hn:l(this.Ht,2048,2048)},this.h=0,this._=0}Vo(t){!function(t,n){for(let o=0;o<t.o.i.length;o++)(t.o.i[o]&$o)===$o&&rt(t,o,n)}(this,t),$t(this),function(t,n){for(let o=0;o<t.o.i.length;o++)(t.o.i[o]&Go)===Go&&at(t,o,n)}(this,t),function(t,n){let o=[],i=[];for(let n=0;n<t.o.i.length;n++)if((t.o.i[n]&Io)===Io){let e=t.o.M[n],r=t.o.zn[n];r.ct=[],r.ni?(r.ni=!1,D(e.o,r)):r.oi?(D(e.o,r),i.push(r)):o.push(r)}for(let t=0;t<i.length;t++)N(i[t],o,o.length),N(i[t],i,t)}(this),function(t,n){for(let n=0;n<t.o.i.length;n++)(t.o.i[n]&Uo)===Uo&&lt(t,n)}(this),$t(this),function(t,n){for(let n=0;n<t.o.i.length;n++)(t.o.i[n]&oi)===oi&&Ut(t,n)}(this)}Ko(t){!function(t,n){let o=[];for(let i=0;i<t.o.i.length;i++)if((t.o.i[i]&Yo)===Yo){if(st(t.o,i))continue;let e=t.o.Fo[i];switch(e.$){case 0:e.ii(i)&&o.push(i);break;case 1:e.Pt-=n,e.Pt<0&&o.push(i)}}for(let n of o){t.o.i[n]&=-1048577,0===t.o.i[n]&&t.o.u(n);let o=t.o.Fo[n];o.ei&&o.ei(n),delete t.o.Fo[n]}}(this,t),function(t,n){for(let n=0;n<t.o.i.length;n++)256==(256&t.o.i[n])&&$(t,n)}(this),function(t,n){1===t.Ft.Touch0&&(ko[0]=t.xt.Touch0X,ko[1]=t.xt.Touch0Y);for(let n=0;n<t.o.i.length;n++)16640==(16640&t.o.i[n])&&G(t,n)}(this),function(t,n){for(let n of navigator.getGamepads())n&&(t.Ft[`pad${n.index}_axis_1`]=n.axes[0],t.Ft[`pad${n.index}_axis_2`]=n.axes[1],t.Ft[`pad${n.index}_axis_3`]=n.axes[2],t.Ft[`pad${n.index}_axis_4`]=n.axes[3]);for(let n=0;n<t.o.i.length;n++)16640==(16640&t.o.i[n])&&U(t,n)}(this),function(t,n){for(let n=0;n<t.o.i.length;n++)(t.o.i[n]&So)===So&&H(t,n)}(this),function(t,n){for(let o=0;o<t.o.i.length;o++)(t.o.i[o]&po)===po&&k(t,o,n)}(this,t),function(t,n){for(let o=0;o<t.o.i.length;o++)(t.o.i[o]&Vo)===Vo&&J(t,o,n)}(this,t),function(t,n){for(let n=0;n<t.o.i.length;n++)if((t.o.i[n]&Lo)===Lo){let o=t.o.M[n],i=t.o.po[n],e=t.o.M[i.Tn],r=v([0,0,0],e.o),a=g([0,0,0,0],e.o);b(o.L,o.L,r,i.yo),S(o.K,o.K,a,i.yo),o.V=!0}}(this),function(t,n){for(let o=0;o<t.o.i.length;o++)2048==(2048&t.o.i[o])&&O(t,o,n)}(this,t),function(t,n){for(let n=0;n<t.o.i.length;n++)(t.o.i[n]&Qo)==Qo&&Et(t,n)}(this),function(t,n){for(let o=0;o<t.o.i.length;o++)(t.o.i[o]&ti)==ti&&Ht(t,o,n)}(this,t),function(t,n){for(let o=0;o<t.o.i.length;o++)(t.o.i[o]&Zo)==Zo&&Nt(t,o,n)}(this,t),function(t,n){for(let o=0;o<t.o.i.length;o++)(t.o.i[o]&Xo)==Xo&&et(t,o,n)}(this,t),$t(this),function(t,n){for(let n=0;n<t.o.i.length;n++)(t.o.i[n]&yo)===yo&&P(t,n)}(this),function(t,n){for(let o=0;o<t.o.i.length;o++)(t.o.i[o]&Mo)===Mo&&L(t,o,n)}(this,t),function(t,n){t.Mt==window.innerWidth&&t.Tt==window.innerHeight||(t.Io=!0),t.Io&&(t.Mt=t.Eo.width=t.Do.width=window.innerWidth,t.Tt=t.Eo.height=t.Do.height=window.innerHeight)}(this),function(t,n){t.ti=[];for(let n=0;n<t.o.i.length;n++)if((t.o.i[n]&bo)===bo){let o=t.o.jn[n],i=t.o.M[n],e=o.J;if(t.Io)switch(e.$){case 0:K(e,0===o.$?t.Mt/t.Tt:o.Tn.v/o.Tn.g);break;case 1:W(e)}u(o._o,i.Dt),_(o.In,e.J,o._o),v(o.Vn,i.o),t.ti.push(n)}}(this),function(t,n){t.Lt.fill(0),t.Vt.fill(0);let o=0;for(let n=0;n<t.o.i.length;n++)(t.o.i[n]&Bo)===Bo&&q(t,n,o++)}(this),function(t,n){for(let n of t.ti){let o=t.o.jn[n];switch(o.$){case 3:ft(t,o)}}}(this),function(t,n){for(let n of t.ti){let o=t.o.jn[n];switch(o.$){case 0:dt(t,o);break;case 2:vt(t,o)}}}(this),function(t,n){t.bt.resetTransform(),t.bt.clearRect(0,0,t.Mt,t.Tt);let o=[0,0,0],i=t.o.jn[t.ti[0]];if(i)for(let n=0;n<t.o.i.length;n++)if((t.o.i[n]&Po)==Po){if(v(o,t.o.M[n].o),T(o,o,i.In),o[2]<-1||o[2]>1)continue;t.bt.setTransform(1,0,0,1,.5*(o[0]+1)*t.Mt,.5*(1-o[1])*t.Tt);let e=t.o.Mo[n];switch(e.$){case 0:j(t,e);break;case 2:Y(t,e)}}}(this),function(t,n){let o=jt`<div>${jt`
<div
style="
position: absolute;
top: 1vmin;
left: 1vmin;
background: #000;
color: #fff;
font: 13px Arial;
"
>
<button
onclick="$(${0})"
style="
padding: 1vmin;
background: #000;
color: #fff;
border: none;
"
>
${document.fullscreenElement?"Exit Fullscreen":"Enter Fullscreen"}
</button>
</div>
`}</div>`;o!==ii&&(t.Po.innerHTML=ii=o)}(this)}};!function(o){var i;o.o=new ei,o.Io=!0,t(o,[...(i=[145/255,85/255,61/255,1],[n([Xt(void 0,I([0,0,0,1],-15,180,0)),Jt(1,.1,15,i)])]),Xt([0,1,6],I([0,0,0,1],-25,180,0))]),t(o,[Xt(void 0,I([0,0,0,1],0,90,0)),..._n(o)]),t(o,[Xt(void 0,void 0,[16,0,16]),nt(o.Xo,o.do,[.5,.5,.5,1])]);for(let n=0;n<8;n++){let n=qt(-8,-.5);t(o,[Xt([qt(-8,8),0,n]),...mn(o)])}let e=[],r=[];for(let t=0;t<80;t++)e.push(qt(-16,16),.2,qt(-8,8),Ot(0,2)),r.push(...I([0,0,0,1],0,0,0));t(o,[Xt([0,0,0],void 0,[.5,.5,.5]),it(o.qo,Float32Array.from(e),Float32Array.from(r),[1,.54,0,1,.84,0])]),function(o,i){let e=t(o,[ln(!0,!1,!1),fn(1.5,0),n([Xt(),ln(!1,!0,!1)]),Xt([-1,0,1],I([0,0,0,1],0,90,0))]),r=o.o.l[e].l[0],a=0;var l;t(o,[Xt([-10,0,.5]),sn(r,.2),n([...cn(o),Xt(),ln(!1,!1,!0)],[Xt(),ot(o.wo,o.Zo,[1,.5,0,1])],[Xt([0,.4,-.4],I([0,0,0,0],-90,0,0)),n([Xt(),an(null,[0,1,0,0]),fn(0,5),n([Xt(),(l=(t,n)=>a=n,(t,n)=>{l(0,n)})])])])]);{let n=t(o,[Xt(),sn(a,.1),rn(0,[1,-0,-0,0,0,0,1,0,0,-1,0,0,-0,-.701,-.428,1])]),i=t(o,[Xt(),sn(n,.08),rn(1,[1,-0,-0,0,0,.132,.991,0,0,-.991,.132,0,-0,-1.1,-.285,1])]),e=t(o,[Xt(),sn(i,.06),rn(2,[1,-0,-0,0,0,0,1,0,0,-1,0,0,-0,-1.492,-.487,1])]),r=t(o,[Xt(),sn(e,.04),rn(3,[-1,-0,-0,0,0,.137,-.991,0,0,-.991,-.137,0,-0,-2.009,.214,1])]);t(o,[Xt(),sn(r,.02),rn(4,[-1,0,-0,0,0,-.204,-.979,0,-0,-.979,.204,0,-0,-2.224,1.021,1])])}}(o);for(let n=0;n<2;n++)t(o,[Xt([qt(-8,8),0,qt(-3,0)],I([0,0,0,1],0,qt(-180,180),0)),...un(o)]);t(o,[Xt([-4,0,-1],I([0,0,0,1],0,145,0),[.6,.6,.6]),...Zt(o)]),t(o,[Xt([20,-12,-5],I([0,0,0,1],0,90,0),[30,30,30]),nt(o.Xo,o.Zo,[.5,.5,.5,1])]),t(o,[Xt([55,-10,-5.5],I([0,0,0,1],0,90,0),[20,20,20]),nt(o.Xo,o.Zo,[.5,.5,.5,1])]),t(o,[Xt([4.4,0,-2],I([0,0,0,1],0,12,0),[1,1,1]),n([Xt(),...tn(o)],[Xt([.5,0,1.5]),...dn(o)])]),t(o,[Xt([-4,-.3,.5]),...dn(o)]),t(o,[Xt([2.5,.2,3.5]),...dn(o)])}(li),li.Ro(),window.$=e.bind(null,li),window.game=li}();
