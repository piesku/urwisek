<!DOCTYPE html><meta charset=utf8><meta name=viewport content="width=device-width, user-scalable=0"><meta name=apple-mobile-web-app-capable content=yes><meta name=theme-color content=#915530><title>Urwisek</title><style>body,html{color:#fff;font-family:Arial;margin:0;overflow:hidden}canvas,main{height:100vh;overflow:hidden;position:absolute;touch-action:none;user-select:none;width:100vw;word-break:break-word}nav div{opacity:.5;transition:opacity .2s}nav div:hover{opacity:1}[onclick]{cursor:pointer}@keyframes intro{0%{transform:translateY(0)}to{transform:translateY(-100vh)}}@keyframes fadein{0%{opacity:0}to{opacity:1}}</style><canvas id=scene></canvas><canvas id=billboard></canvas><main></main><script>!function(){function t(t,n){let o=t.o.t();for(let i of n)i(t,o);return o}function n(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function o(t,n){let o=n[0],i=n[1],e=n[2],r=n[3],a=n[4],l=n[5],s=n[6],f=n[7],c=n[8],u=n[9],d=n[10],h=n[11],m=n[12],v=n[13],_=n[14],p=n[15],g=o*l-i*a,y=o*s-e*a,w=o*f-r*a,x=i*s-e*l,T=i*f-r*l,A=e*f-r*s,b=c*v-u*m,F=c*_-d*m,R=c*p-h*m,M=u*_-d*v,z=u*p-h*v,k=d*p-h*_,C=g*k-y*z+w*M+x*R-T*F+A*b;return C?(C=1/C,t[0]=(l*k-s*z+f*M)*C,t[1]=(e*z-i*k-r*M)*C,t[2]=(v*A-_*T+p*x)*C,t[3]=(d*T-u*A-h*x)*C,t[4]=(s*R-a*k-f*F)*C,t[5]=(o*k-e*R+r*F)*C,t[6]=(_*w-m*A-p*y)*C,t[7]=(c*A-d*w+h*y)*C,t[8]=(a*z-l*R+f*b)*C,t[9]=(i*R-o*z-r*b)*C,t[10]=(m*T-v*w+p*g)*C,t[11]=(u*w-c*T-h*g)*C,t[12]=(l*F-a*M-s*b)*C,t[13]=(o*M-i*F+e*b)*C,t[14]=(v*y-m*x-_*g)*C,t[15]=(c*x-u*y+d*g)*C,t):null}function i(t,n,o){let i=n[0],e=n[1],r=n[2],a=n[3],l=n[4],s=n[5],f=n[6],c=n[7],u=n[8],d=n[9],h=n[10],m=n[11],v=n[12],_=n[13],p=n[14],g=n[15],y=o[0],w=o[1],x=o[2],T=o[3];return t[0]=y*i+w*l+x*u+T*v,t[1]=y*e+w*s+x*d+T*_,t[2]=y*r+w*f+x*h+T*p,t[3]=y*a+w*c+x*m+T*g,y=o[4],w=o[5],x=o[6],T=o[7],t[4]=y*i+w*l+x*u+T*v,t[5]=y*e+w*s+x*d+T*_,t[6]=y*r+w*f+x*h+T*p,t[7]=y*a+w*c+x*m+T*g,y=o[8],w=o[9],x=o[10],T=o[11],t[8]=y*i+w*l+x*u+T*v,t[9]=y*e+w*s+x*d+T*_,t[10]=y*r+w*f+x*h+T*p,t[11]=y*a+w*c+x*m+T*g,y=o[12],w=o[13],x=o[14],T=o[15],t[12]=y*i+w*l+x*u+T*v,t[13]=y*e+w*s+x*d+T*_,t[14]=y*r+w*f+x*h+T*p,t[15]=y*a+w*c+x*m+T*g,t}function e(t,n,o,i,e){let r,a=1/Math.tan(n/2);return t[0]=a/o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=e&&e!==1/0?(r=1/(i-e),t[10]=(e+i)*r,t[14]=2*e*i*r):(t[10]=-1,t[14]=-2*i),t}function r(t,n){return t[0]=n[8],t[1]=n[9],t[2]=n[10],h(t,t)}function a(t,n){return t[0]=n[12],t[1]=n[13],t[2]=n[14],t}function l(t,n){let o=function(t,n){let o=n[4],i=n[5],e=n[6],r=n[8],a=n[9],l=n[10];return t[0]=Math.hypot(n[0],n[1],n[2]),t[1]=Math.hypot(o,i,e),t[2]=Math.hypot(r,a,l),t}([0,0,0],n),i=1/o[0],e=1/o[1],r=1/o[2],a=n[0]*i,l=n[1]*e,s=n[2]*r,f=n[4]*i,c=n[5]*e,u=n[6]*r,d=n[8]*i,h=n[9]*e,m=n[10]*r,v=a+c+m,_=0;return v>0?(_=2*Math.sqrt(v+1),t[3]=.25*_,t[0]=(u-h)/_,t[1]=(d-s)/_,t[2]=(l-f)/_):a>c&&a>m?(_=2*Math.sqrt(1+a-c-m),t[3]=(u-h)/_,t[0]=.25*_,t[1]=(l+f)/_,t[2]=(d+s)/_):c>m?(_=2*Math.sqrt(1+c-a-m),t[3]=(d-s)/_,t[0]=(l+f)/_,t[1]=.25*_,t[2]=(u+h)/_):(_=2*Math.sqrt(1+m-a-c),t[3]=(l-f)/_,t[0]=(d+s)/_,t[1]=(u+h)/_,t[2]=.25*_),t}function s(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t}function f(t,n,o){return t[0]=n[0]+o[0],t[1]=n[1]+o[1],t[2]=n[2]+o[2],t}function c(t,n,o){return t[0]=n[0]-o[0],t[1]=n[1]-o[1],t[2]=n[2]-o[2],t}function u(t,n,o){return t[0]=n[0]*o,t[1]=n[1]*o,t[2]=n[2]*o,t}function d(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t}function h(t,n){let o=n[0],i=n[1],e=n[2],r=o*o+i*i+e*e;return r>0&&(r=1/Math.sqrt(r)),t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t}function m(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function v(t,n,o){let i=n[0],e=n[1],r=n[2],a=o[3]*i+o[7]*e+o[11]*r+o[15];return a=a||1,t[0]=(o[0]*i+o[4]*e+o[8]*r+o[12])/a,t[1]=(o[1]*i+o[5]*e+o[9]*r+o[13])/a,t[2]=(o[2]*i+o[6]*e+o[10]*r+o[14])/a,t}function _(t,n,o){return c(t,v([0,0,0],n,o),a([0,0,0],o))}function p(t,n,o,i){let e=n[0],r=n[1],a=n[2];return t[0]=e+i*(o[0]-e),t[1]=r+i*(o[1]-r),t[2]=a+i*(o[2]-a),t}function g(t,n,o,i,e){return t[0]=n,t[1]=o,t[2]=i,t[3]=e,t}function y(t,n,o){let i=n[0],e=n[1],r=n[2],a=n[3],l=o[0],s=o[1],f=o[2],c=o[3];return t[0]=i*c+a*l+e*f-r*s,t[1]=e*c+a*s+r*l-i*f,t[2]=r*c+a*f+i*s-e*l,t[3]=a*c-i*l-e*s-r*f,t}function w(t,n,o,i){let e=Math.sin(n/2*no),r=Math.cos(n/2*no),a=Math.sin(o/2*no),l=Math.cos(o/2*no),s=Math.sin(i/2*no),f=Math.cos(i/2*no);return t[0]=e*l*f+r*a*s,t[1]=r*a*f-e*l*s,t[2]=r*l*s-e*a*f,t[3]=r*l*f+e*a*s,t}function x(t,n,o,i){let e,r,a,l,s,f=n[0],c=n[1],u=n[2],d=n[3],h=o[0],m=o[1],v=o[2],_=o[3];return r=f*h+c*m+u*v+d*_,r<0&&(r=-r,h=-h,m=-m,v=-v,_=-_),1-r>1e-6?(e=Math.acos(r),a=Math.sin(e),l=Math.sin((1-i)*e)/a,s=Math.sin(i*e)/a):(l=1-i,s=i),t[0]=l*f+s*h,t[1]=l*c+s*m,t[2]=l*u+s*v,t[3]=l*d+s*_,t}function T(t,n,o,i=[.9,.9,.9,1]){return(e,r)=>{e.o.i[r]|=16,e.o.l[r]={u:0,h:{u:0,m:t,v:n,_:o,h:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],p:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},g:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],T:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],A:[0,0,0],F:i}}}function A(t,n,o,i,e=[0,0,0,1]){return(r,a)=>{r.o.i[a]|=16,r.o.l[a]={u:3,R:t,h:{u:1,M:n,v:o,_:i,h:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],p:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},g:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],T:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],A:[0,0,0],F:e}}}function b(...n){return(o,i)=>{let e=[];for(let i of n){let n=t(o,i);e.push(n)}o.o.i[i]|=32,o.o.k[i]={k:e}}}function*F(t,n,o){if((t.i[n]&o)===o&&(yield n),32&t.i[n])for(let i of t.k[n].k)yield*F(t,i,o)}function R(t,n){if(32&t.i[n])for(let o of t.k[n].k)R(t,o);t.C(n)}function M(t=[0,0,0],n=[0,0,0,1],o=[1,1,1]){return(i,e)=>{i.o.i[e]|=8388608,i.o.I[e]={o:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],K:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],S:t,B:n,P:o,N:!0}}}function*z(t,n,o){(t.i[n]&o)===o&&(yield n);let i=t.I[n].$;void 0!==i&&(yield*z(t,i,o))}function k(t,n){return[b([M([0,0,5]),T(1,.1,15,n)])]}function C(t){return 1-(1-t)**4}function I(t){return t<.5?8*t**4:1-(-2*t+2)**4/2}function E(t){return(n,o)=>{let i={};for(let n in t){let{V:o,D:e=7}=t[n],r=o[o.length-1].L;i[n]={V:o.map((t=>({...t}))),D:e,W:r,j:0}}n.o.i[o]|=1,n.o.H[o]={X:i,O:i.idle}}}function K(t,n){return(o,i)=>{o.o.i[i]|=8,o.o.U[i]={G:t,N:void 0===n,Y:n||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}}}function S(t){return(n,o)=>{n.o.i[o]|=512,n.o.q[o]={J:t}}}function B(t){return(n,o)=>{n.o.i[o]|=65536,n.o.Z[o]={tt:t}}}function P(t,n,o=0){for(let i=o;i<t.i.length;i++)if(65536&t.i[i]&&t.Z[i].tt===n)return i;throw`No entity named ${n}.`}function N(t,n,o,i=0,e=[1,1,1,1],r=2304){return(a,l)=>{if(!oo.has(n)){let o=a.nt.createVertexArray();a.nt.bindVertexArray(o),a.nt.bindBuffer(Wn,n.ot),a.nt.enableVertexAttribArray(t.et.it),a.nt.vertexAttribPointer(t.et.it,3,qn,!1,0,0),a.nt.bindBuffer(Wn,n.rt),a.nt.enableVertexAttribArray(t.et.at),a.nt.vertexAttribPointer(t.et.at,3,qn,!1,0,0),a.nt.bindBuffer(jn,n.lt),a.nt.bindVertexArray(null),oo.set(n,o)}a.o.i[l]|=131072,a.o.st[l]={u:1,ft:t,ct:n,ut:r,dt:oo.get(n),ht:o,vt:e,_t:i}}}function $(t,n,o,i=0,e=[1,1,1,1],r=2304){return(a,l)=>{if(!io.has(n)){let o=a.nt.createVertexArray();a.nt.bindVertexArray(o),a.nt.bindBuffer(Wn,n.ot),a.nt.enableVertexAttribArray(t.et.it),a.nt.vertexAttribPointer(t.et.it,3,qn,!1,0,0),a.nt.bindBuffer(Wn,n.rt),a.nt.enableVertexAttribArray(t.et.at),a.nt.vertexAttribPointer(t.et.at,3,qn,!1,0,0),a.nt.bindBuffer(Wn,n.gt),a.nt.enableVertexAttribArray(t.et.yt),a.nt.vertexAttribPointer(t.et.yt,4,qn,!1,0,0),a.nt.bindBuffer(jn,n.lt),a.nt.bindVertexArray(null),io.set(n,o)}a.o.i[l]|=131072,a.o.st[l]={u:2,ft:t,ct:n,ut:r,dt:io.get(n),ht:o,vt:e,_t:i}}}function V(t,n,o,i){return(e,r)=>{let a=e.nt.createBuffer();e.nt.bindBuffer(Wn,a),e.nt.bufferData(Wn,6400,35048),e.o.i[r]|=131072,e.o.st[r]={u:3,ft:e.wt,xt:a,Tt:t,At:o,bt:[n,i],ut:Xn}}}function D(t,n,o,i){return(e,r)=>{let a=e.Ft,l=e.nt.createVertexArray();e.nt.bindVertexArray(l),e.nt.bindBuffer(Wn,t.ot),e.nt.enableVertexAttribArray(a.et.it),e.nt.vertexAttribPointer(a.et.it,3,qn,!1,0,0);let s=e.nt.createBuffer();e.nt.bindBuffer(Wn,s),e.nt.bufferData(Wn,n,Ln),e.nt.enableVertexAttribArray(a.et.Rt),e.nt.vertexAttribPointer(a.et.Rt,4,qn,!1,0,0),e.nt.vertexAttribDivisor(a.et.Rt,1);let f=e.nt.createBuffer();e.nt.bindBuffer(Wn,f),e.nt.bufferData(Wn,o,Ln),e.nt.enableVertexAttribArray(a.et.Mt),e.nt.vertexAttribPointer(a.et.Mt,4,qn,!1,0,0),e.nt.vertexAttribDivisor(a.et.Mt,1),e.nt.bindBuffer(jn,t.lt),e.nt.bindVertexArray(null),e.o.i[r]|=131072,e.o.st[r]={u:4,ft:a,ct:t,ut:Xn,dt:l,zt:n.length/4,kt:i,Ct:s,It:f}}}function L(t,n=[1,.5,0,1],o=1,i){return[$(t.Et,t.Kt,n,0),b([M([0,.35,-.47],[.672,0,0,.74]),b([M(),B(1===o?"tail anchor":""),K(0,[1,0,0,0,0,.096,-.995,0,0,.995,.096,0,0,.433,.395,1]),S(1),E({idle:{V:[{L:0,S:[0,0,0],B:[0,0,0,1]},{L:9*o,S:[0,0,0],B:[0,0,0,1]},{L:10*o,S:[0,-.044,.289],B:[-.288,0,0,.958],St:I},{L:15*o,S:[0,-.044,.289],B:[-.288,0,0,.958]},{L:16*o,S:[0,0,0],B:[0,0,0,1],St:I}],D:3},walk:{V:[{L:0,S:[0,0,0],B:[0,0,0,1]}],D:5},jump:{V:[{L:0,S:[0,0,0],B:[0,0,0,1]},{L:eo*o,S:[0,0,0],B:[-.131,0,0,.991],St:C},{L:ro*o,S:[0,0,0],B:[.087,0,0,.996]},{L:1*o,S:[0,0,0],B:[0,0,0,1],St:C}],D:1}}),b([M([0,.46,0],[-.4,0,0,.92]),b([M(),S(1),E({idle:{V:[{L:0,B:[0,0,0,1]},{L:9*o,B:[0,0,0,1]},{L:10*o,B:[.371,0,0,.929],St:I},{L:15*o,B:[.371,0,0,.929]},{L:16*o,B:[0,0,0,1],St:I}],D:3},walk:{V:[{L:0,B:[0,0,0,1]}],D:5},jump:{V:[{L:0,B:[0,0,0,1]}],D:1}}),b([M(),K(1,[1,0,0,0,0,.795,-.606,0,0,.606,.795,0,0,-.306,.251,1]),S(1),E({idle:{V:[{L:0,B:[0,.088,.116,.989],St:I},{L:1*o,B:[0,-.088,-.116,.989],St:I}]},walk:{V:[{L:0,B:[.087,0,0,.996]},{L:.2*o,B:[0,0,0,1]}],D:5},jump:{V:[{L:0,B:[0,0,0,1]},{L:eo*o,B:[.216,0,0,.976],St:C},{L:ro*o,B:[.216,0,0,.976]},{L:1*o,B:[0,0,0,1],St:C}],D:1}})])])],[M([.07,.46,0],[.74,0,0,.672]),b([M(),K(2,[1,0,0,0,0,-1,0,0,0,-0,-1,0,-.073,.395,-.015,1]),S(1),E({idle:{V:[{L:0,B:[0,0,0,1]}]},walk:{V:[{L:0,B:[-.174,0,0,.985],Bt:i},{L:.2*o,B:[.131,0,0,.991],Bt:i}],D:5},jump:{V:[{L:0,B:[0,0,0,1]},{L:eo*o,B:[-.259,0,0,.966],St:C},{L:ro*o,B:[-.259,0,0,.966]},{L:1*o,B:[0,0,0,1],St:C}],D:1}})])],[M([-.07,.46,0],[.74,0,0,.672]),b([M(),K(3,[1,0,0,0,0,-1,0,0,0,-0,-1,0,.073,.395,-.015,1]),S(1),E({idle:{V:[{L:0,B:[0,0,0,1]}]},walk:{V:[{L:0,B:[.131,0,0,.991]},{L:.2*o,B:[-.174,0,0,.985]}],D:5},jump:{V:[{L:0,B:[0,0,0,1]},{L:eo*o,B:[-.301,0,0,.954],St:C},{L:ro*o,B:[-.301,0,0,.954]},{L:1*o,B:[0,0,0,1],St:C}],D:1}})])],[M([.07,0,0],[.753,0,0,.658]),b([M(),K(4,[1,0,0,0,0,-.992,.124,0,0,-.124,-.992,0,-.073,.291,-.509,1]),S(1),E({idle:{V:[{L:0,B:[0,0,0,1]},{L:9*o,B:[0,0,0,1]},{L:10*o,B:[-.492,0,0,.87],St:I},{L:15*o,B:[-.492,0,0,.87]},{L:16*o,B:[0,0,0,1],St:I}],D:3},walk:{V:[{L:0,B:[.131,0,0,.991]},{L:.2*o,B:[-.131,0,0,.991]}],D:5},jump:{V:[{L:0,B:[0,0,0,1]},{L:eo*o,B:[.383,0,0,.924],St:C},{L:ro*o,B:[.383,0,0,.924]},{L:1*o,B:[0,0,0,1],St:C}],D:1}})])],[M([-.07,0,0],[.753,0,0,.658]),b([M(),K(5,[1,0,0,0,0,-.992,.124,0,0,-.124,-.992,0,.073,.291,-.509,1]),S(1),E({idle:{V:[{L:0,B:[0,0,0,1]},{L:9*o,B:[0,0,0,1]},{L:10*o,B:[-.468,0,0,.884],St:I},{L:15*o,B:[-.468,0,0,.884]},{L:16*o,B:[0,0,0,1],St:I}],D:3},walk:{V:[{L:0,B:[-.131,0,0,.991]},{L:.2*o,B:[.131,0,0,.991]}],D:5},jump:{V:[{L:0,B:[0,0,0,1]},{L:eo*o,B:[.301,0,0,.954],St:C},{L:ro*o,B:[.301,0,0,.954]},{L:1*o,B:[0,0,0,1],St:C}],D:1}})])])])])]}function W(t,n,o){return(i,e)=>{i.o.i[e]|=2048,i.o.Pt[e]={Nt:t,$t:n,Vt:o,Dt:[],Lt:0}}}function j(t,n=.1){return(o,i)=>{o.o.i[i]|=16384,o.o.Wt[i]={R:t,jt:n}}}function H(t){return(n,o)=>{n.o.i[o]|=524288,n.o.Ht[o]={Xt:t}}}function X(t,n){return(o,i)=>{o.o.i[i]|=2097152,o.o.Ot[i]={u:1,Ut:t,Gt:n}}}function O(t){return[j(P(t.o,"pixie anchor"),.02),b([M(),H(.1),W(1,.1,.1),V([1,1,1,1],4,[.5,.5,1,1],1)]),X(7,(n=>{t.o.Wt[n].R=P(t.o,"exit")}))]}function U(t,n){return(o,i)=>{let e=t?o.Audio.createPanner():void 0;o.o.i[i]|=4,o.o.Yt[i]={qt:e,Qt:n,j:0}}}function G(t){return(n,o)=>{t(n,o)}}function Y(t,n,o,i=[1,1,1]){return(e,r)=>{e.o.i[r]|=64,e.o.Jt[r]={Entity:r,Zt:!0,tn:t,nn:n,i:o,bt:i,on:[0,0,0],en:[0,0,0],rn:[0,0,0],an:[0,0,0],ln:[]}}}function q(t,n,o){return(i,e)=>{i.o.i[e]|=128,i.o.sn[e]={fn:t,B:n,Animation:o}}}function Q(t){return(n,o)=>{n.o.i[o]|=256,n.o.cn[o]={D:t,un:!0,dn:null}}}function J(t,n){return(o,i)=>{o.o.i[i]|=32768,o.o.hn[i]={mn:t,vn:n,_n:[],pn:[],gn:[]}}}function Z(t,n=.5){return(o,i)=>{o.o.i[i]|=262144,o.o.yn[i]={u:t,wn:n,xn:[0,0,0],Tn:[0,0,0],An:[0,0,0],bn:[0,0,0],Fn:!1}}}function tt(n,o,i=n.Rn){let e=t(n,[U(!1),Q(1),J(3,0),Y(!0,1,6,[.6,.8,.8]),Z(1,0),b([B("mesh anchor"),M([0,-.42,0],[0,.7,0,.7]),Q(2),b([M([0,.5,1],void 0,[.1,.1,.1]),Y(!0,0,4),Q(8)])],[B("pup anchor 0"),M([0,-.42,.2],[0,.707,0,.707]),Q(2)],[B("pup anchor 1"),M([-.2,-.42,.2],[0,.707,0,.707]),Q(2)],[B("pup anchor 2"),M([-.4,-.42,.2],[0,.707,0,.707]),Q(2)],[B("camera anchor"),M([.5,.5,0],w([0,0,0,1],-10,0,0))],[B("sun anchor"),M()],[B("pixie anchor"),M([4,1,0],[0,.7,0,.7])]),M(o)]),r=0,a=0,l=0,s=0;t(n,[M([-10,0,.5]),j(P(n.o,"mesh anchor"),.2),b([...L(n),M(),Q(4)],[M(),$(n.Et,n.Mn,[1,.5,0,1])])]),t(n,[M(),j(P(n.o,"tail anchor"),1),b([M([0,-.2,-.05],[1,0,0,0]),q(null,[0,-1,0,0]),J(0,1),G(((t,n)=>r=n)),K(0,[1,-0,-0,0,0,0,1,0,0,-1,0,0,-0,-.701,-.428,1])])]),t(n,[M(),j(r,.08),K(1,[1,-0,-0,0,0,.132,.991,0,0,-.991,.132,0,-0,-1.1,-.285,1]),b([M([0,.2,.1],void 0,[.1,.1,.1]),G(((t,n)=>a=n))])]),t(n,[M(),j(a,.06),K(2,[1,-0,-0,0,0,0,1,0,0,-1,0,0,-0,-1.492,-.487,1]),b([M([0,.2,.1],void 0,[.1,.1,.1]),G(((t,n)=>l=n))])]),t(n,[M(),j(l,.04),K(3,[-1,-0,-0,0,0,.137,-.991,0,0,-.991,-.137,0,-0,-2.009,.214,1]),b([M([0,.2,.1],void 0,[.1,.1,.1]),G(((t,n)=>s=n))])]),t(n,[M(),j(s,.02),K(4,[-1,0,-0,0,0,-.204,-.979,0,-0,-.979,.204,0,-0,-2.224,1.021,1]),b([M([0,.2,.1],void 0,[.1,.1,.1]),G(((t,n)=>n))])]);for(let o=0;o<i;o++)t(n,[M(),j(P(n.o,"pup anchor "+o),.2-.02*o),b([...L(n,[1,.5,0,1],.7+.1*o),M(void 0,void 0,[.3,.3,.3]),Q(4)])]);return e}function nt(){return ao=16807*ao%2147483647,(ao-1)/2147483646}function ot(t=0,n=1){return~~(nt()*(n-t+1)+t)}function it(t=0,n=1){return nt()*(n-t)+t}function et(t){return t[ot(0,t.length-1)]}function rt(t){return(n,o)=>{n.o.i[o]&=~t}}function at(t,n){return(o,i)=>{o.o.i[i]|=4096,o.o.Nt[i]={Ut:t,zn:n}}}function lt(t){return[b([M([0,3.5,0],[0,-.707,0,.707],[1,7,1]),S(131072),N(t.kn,t.Cn,[1,1,1,1])],[M([0,7.8,0],[0,-.707,0,.707],[.8,1.6,.8]),S(131072),N(t.kn,t.Cn,[1,1,1,1])],[M([0,9.4,0],[0,-.707,0,.707],[.56,1.6,.56]),S(131072),N(t.kn,t.Cn,[1,1,1,1])],[M([0,10.2,0],[-.5,-.5,.5,.5],[1.721,.509,.593]),S(131072),N(t.kn,t.Cn,[1,1,1,1])],[M([0,8.6,0],[-.5,-.5,.5,.5],[1.12,.438,.796]),S(131072),N(t.kn,t.Cn,[0,0,0,1])],[M([0,7,0],[-.5,-.5,.5,.5],[2.61,.771,.9]),S(131072),N(t.kn,t.Cn,[0,0,0,1])])]}function st(t){return[q([0,0,1],null),J(it(1,3),0),at(25),U(!0,lo),rt(4),b([M(void 0,w([.7,0,0,.7],0,-90,-90),[.1,.1,.1]),...lt(t)],[M(void 0,[0,1,0,0]),H(.02),W(1,.01,1),V([1,.5,0,1],10,[.56,.33,.24,1],2)])]}function ft(t,n){return(o,i)=>{o.o.i[i]|=1048576,o.o.In[i]={En:t,Kn:n,Lt:n}}}function ct(t,...n){return t.reduce(((t,o)=>t+function(t){let n=t.shift();return"boolean"==typeof n||null==n?"":Array.isArray(n)?n.join(""):n}(n)+o))}function ut(t){return ct`
<div
style="
margin: 40vh 2vw 0;
font-size: 16vw;
font-weight: 600;
"
>
NOAH
</div>
<nav
style="
margin: 2vh 3vw;
font-size: 1rem;
font-style: italic;
line-height: 2;
"
>
<div onclick="$(${2})">New Game</div>
<div>${function(t){return ct`
Quality:
<select onchange="$(${1}, this)">
<option
value="${512}"
${512===t.Sn&&"selected"}
>
Low
</option>
<option
value="${1024}"
${1024===t.Sn&&"selected"}
>
Medium
</option>
<option
value="${2048}"
${2048===t.Sn&&"selected"}
>
High
</option>
<option
value="${4096}"
${4096===t.Sn&&"selected"}
>
Ultra
</option>
</select>
`}(t)}</div>
</nav>
`}function dt(t){return ct`
<div
style="
animation: 6s ease-out 1s forwards intro;
"
>
<div
style="
margin: 60vh 2vw 0;
font-size: 4vw;
"
>
Humans have destroyed Earth and ran away.<br />Reach the Ark!
</div>
</div>
`}function ht(t){return""}function mt(t){return ct`
<div
style="
margin: 20vh 2vw 0;
font-size: 12vw;
font-weight: 600;
opacity: 0;
animation: 1s 4s forwards fadein;
"
>
THE END
</div>
`}function vt(t,n,o=0){for(let i=o;i<t.i.length;i++)if((t.i[i]&n)===n)return i}function _t(t){return[b([M(void 0,void 0,void 0),S(131072),N(t.kn,t.Bn,[.342,.17,.035,1])],[M([.171,.62,0],[0,0,.574,.819],[.039,.7,1]),S(131072),N(t.kn,t.Bn,[.342,.17,.035,1])],[M([-.293,.536,0],[0,0,-.643,.766],[.039,.42,1]),S(131072),N(t.kn,t.Bn,[.342,.17,.035,1])])]}function pt(t){return[Y(!0,36,6),Z(1),j(0),rt(16384),..._t(t)]}function gt(t,n=2,o=4){let i=it(.5,.9),e=ot(400,600),r=it(n,o),a=[],l=[];for(let t=0;t<e;t++)a.push(it(-i,i),it(-i,i),it(-i,i),ot(0,7)),l.push(...w([0,0,0,0],it(-90,90),it(-90,90),it(-90,90)));return[b([M([0,r/2,0],void 0,[.25,r,.25]),S(131072),N(t.kn,t.Cn,[.8,.2,.2,1])],[M([0,r,0]),S(131072),D(t.Pn,Float32Array.from(a),Float32Array.from(l),fo)])]}function yt(t){let n=it(.5,.9),o=ot(400,600),i=[],e=[];for(let t=0;t<o;t++)i.push(it(-n,n),it(-n,n),it(-n,n),ot(0,7)),e.push(...w([0,0,0,0],it(-90,90),it(-90,90),it(-90,90)));return[S(131072),D(t.Pn,Float32Array.from(i),Float32Array.from(e),fo)]}function wt(t,n){return(o,i)=>{o.o.i[i]|=16777216,o.o.Nn[i]={J:t,zn:n}}}function xt(t){return[Y(!1,2,1,[1,100,1]),wt(1,3),b([B("exit"),M([1,1,0])],[M([1,0,0],[0,-.707,0,.707],[.3,.3,.3]),...L(t)])]}function Tt(t){let n=[],o=[];for(let t=0;t<100;t++)n.push(it(-1,1),.8,it(-.5,.5),ot(0,1)),o.push(...w([0,0,0,1],0,it(-180,180),0));return[Y(!1,18,0),Z(0),b([M(),N(t.kn,t.Bn,[82/255,39/255,5/255,1])],[M([0,0,0],void 0,[.5,.5,.5]),D(t.$n,Float32Array.from(n),Float32Array.from(o),[1,.54,0,1,.84,0])])]}function At(t){return[b([M([0,.8,0],void 0,[4,1,2]),S(131072),N(t.kn,t.Bn,[.8,.024,.016,1])],[M([1.276,.5,0],[.707,0,0,.707],[1,2.2,1]),S(131072),N(t.kn,t.Cn,[0,0,0,1])],[M([-1.1,.5,0],[.707,0,0,.707],[1,2.2,1]),S(131072),N(t.kn,t.Cn,[0,0,0,1])],[M([-.5,2,.9],void 0,[.2,1.4,.2]),S(131072),N(t.kn,t.Bn,[.8,.024,.016,1])],[M([-.5,2,-.9],void 0,[.2,1.4,.2]),S(131072),N(t.kn,t.Bn,[.8,.024,.016,1])],[M([1.9,2,.9],void 0,[.2,1.4,.2]),S(131072),N(t.kn,t.Bn,[.8,.024,.016,1])],[M([1.9,2,-.9],void 0,[.2,1.4,.2]),S(131072),N(t.kn,t.Bn,[.8,.024,.016,1])],[M([.7,2.8,0],void 0,[2.6,.2,2]),S(131072),N(t.kn,t.Bn,[.8,.024,.016,1])],[M([-2,1,-.6],[.5,.5,-.5,.5],[.4,.2,.4]),S(131072),N(t.kn,t.Cn,[.8,.784,.019,1])],[M([-2,1,.6],[.5,.5,-.5,.5],[.4,.2,.4]),S(131072),N(t.kn,t.Cn,[.8,.784,.019,1])],[M([.264,1.55,.55],void 0,[.2,.5,.8]),S(131072),N(t.kn,t.Bn,[0,0,0,1])],[M([.264,1.55,-.55],void 0,[.2,.5,.8]),S(131072),N(t.kn,t.Bn,[0,0,0,1])])]}function bt(t){return[b([M([0,1.5,0],void 0,[3,3,3]),S(131072),N(t.kn,t.Bn,[.095,.095,.095,1])],[M([-2.25,2,0],void 0,[1.5,.1,3]),S(131072),N(t.kn,t.Bn,[.069,.154,.8,1])],[M([-.8,.1,0],void 0,[4.9,.2,3.4]),S(131072),N(t.kn,t.Bn,[.095,.095,.095,1])],[M([-2.8,1,0],void 0,[.1,2,.1]),S(131072),N(t.kn,t.Bn,[.095,.095,.095,1])])]}function Ft(t){let n=it();return n<.1?[q([0,0,1],null,"walk"),J(it(1,1.2),0),at(100),b([M(void 0,void 0,[2,2,2]),S(131104),...L(t,et(co),3)])]:n<.5?[q([0,0,1],null,"walk"),J(it(2,2.2),0),at(50),b([M(void 0,void 0,[1,1.5,1]),S(131104),...L(t,et(co),1.5)])]:[q([0,0,1],null,"jump"),J(it(3,3.2),0),at(30),b([M(void 0,void 0,[.5,.5,1]),S(131104),...L(t,et(co),.8)])]}function Rt(t){return[q([0,0,1],null,"walk"),J(1,0),at(10),$(t.Et,t.Pn,et(uo),0),b([M(),b([M(),K(0,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),E({idle:{V:[{L:0,S:[0,0,0]}]},walk:{V:[{L:0,S:[0,-.05,0]},{L:.6,S:[0,.01,0]}]}}),b([M(void 0,[0,0,-.628,.778]),b([M(),K(1,[.124,.992,0,0,-.992,.124,-0,0,-0,-0,1,0,-0,-0,-0,1]),E({idle:{V:[{L:0,B:[0,0,0,1]}]},walk:{V:[{L:0,B:[0,0,.044,.999]},{L:.6,B:[0,0,-.342,.94]}]}})])],[M(void 0,[0,0,.628,.778]),b([M(),K(2,[.124,-.992,-0,0,.992,.124,-0,0,0,-0,1,0,0,-0,-0,1]),E({idle:{V:[{L:0,B:[0,0,0,1]}]},walk:{V:[{L:0,B:[0,0,-.044,.999]},{L:.6,B:[0,0,.342,.94]}]}})])])])])]}function Mt(t=[1,1,1],n=1){return(o,i)=>{o.o.i[i]|=8192,o.o.Vn[i]={u:1,Dn:t,Ln:n**2}}}function zt(t){return[b([M([10,10,10]),Mt([1,1,1],.9)])]}function kt(t){return[j(P(t.o,"sun anchor"),.01),b([M([10,10,-10],w([0,0,0,1],-35,135,0)),A(t.jn.Wn,8,1,100),Mt([1,1,1],.6)])]}function Ct(t){return[b([M([0,4,0],void 0,[.5,8,.5]),S(131072),N(t.kn,t.Cn,[.119,.027,.012,1])],[M([0,7.41,-.25],void 0,[3,.45,.2]),S(131072),N(t.kn,t.Bn,[.119,.027,.012,1])],[M([0,7.41,.25],void 0,[3,.45,.2]),S(131072),N(t.kn,t.Bn,[.119,.027,.012,1])],[M([0,6.329,-.25],void 0,[3,.45,.2]),S(131072),N(t.kn,t.Bn,[.119,.027,.012,1])],[M([1.3,7.75,-.25],void 0,[.2,.3,.2]),S(131072),N(t.kn,t.Cn,[.367,.367,.367,1])],[M([1,7.75,-.25],void 0,[.2,.3,.2]),S(131072),N(t.kn,t.Cn,[.367,.367,.367,1])],[M([1.3,6.7,-.25],void 0,[.2,.3,.2]),S(131072),N(t.kn,t.Cn,[.367,.367,.367,1])],[M([1,6.7,-.25],void 0,[.2,.3,.2]),S(131072),N(t.kn,t.Cn,[.367,.367,.367,1])],[M([-.34,5.76,-.24],[0,0,-.383,.924],[1.2,.2,.05]),S(131072),N(t.kn,t.Bn,[.367,.367,.367,1])],[M([-1,7.75,.25],void 0,[.2,.3,.2]),S(131072),N(t.kn,t.Cn,[.367,.367,.367,1])],[M([-1.3,7.75,.25],void 0,[.2,.3,.2]),S(131072),N(t.kn,t.Cn,[.367,.367,.367,1])])]}function It(n){t(n,[...zt(),M()]),t(n,[...kt(n),M()]);for(let o of Object.keys(ho)){let i=mo[o];for(let e=0;e<ho[o].length;e++)t(n,[M(ho[o][e][0],ho[o][e][1],ho[o][e][2]),...i(n)])}}function Et(n){n.o=new so,n.Hn=!0;let o=t(n,[M([0,1,-3]),B("camera anchor")]),i=tt(n,[0,.774,0]);n.o.i[i]&=-257,It(n);let e=t(n,[M([0,16,-5],w([0,0,0,1],10,0,0),[17,10,1]),b([M(),H(.5),W(20,.1,0),V([1,1,1,1],2,[.5,.5,1,1],1)])]),r=t(n,[M([-5,10,-3],w([0,0,0,1],-45,110,0)),b([M(),H(3),ft(st,3)])]),a=t(n,[...k(0,[145/255,85/255,61/255,1]),M([0,15,0],w([0,0,0,1],10,0,0)),j(P(n.o,"camera anchor"),.02),rt(16384)]),l=[t(n,[...L(n,[1,.5,0,1],.7),M([1,.5,0],[0,.707,0,.707],[.3,.3,.3]),J(1.5,0)]),t(n,[...L(n,[1,.5,0,1],.8),M([.3,.5,-.5],[0,.707,0,.707],[.3,.3,.3]),J(1.6,0)]),t(n,[...L(n,[1,.5,0,1],.9),M([-.2,.5,.3],[0,.707,0,.707],[.3,.3,.3]),J(1.7,0)])];var s,f;t(n,[(s=()=>n.Xn===dt,f=()=>{R(n.o,r),t(n,[b([X(1,(()=>{n.o.i[a]|=16384}))],[X(4,(()=>{for(let t of l)q([0,0,1],null,"jump")(n,t),at(7)(n,t)}))],[X(7,(()=>{R(n.o,e);let i=n.o.Wt[a];i.R=P(n.o,"camera anchor",o+1),i.jt=.05,t(n,[...O(n),M([-20,5,0])])}))]),X(2,(()=>{n.o.i[i]|=256}))])},(t,n)=>{t.o.i[n]|=2097152,t.o.Ot[n]={u:0,On:s,Gt:f}})])}function Kt(n){n.o=new so,n.Hn=!0,tt(n,[0,.774,0]),It(n),t(n,[...k(0,[145/255,85/255,61/255,1]),M([0,10,10]),j(P(n.o,"camera anchor"),.05)])}function St(t){return[b([M([0,1,0],void 0,[3,2,3]),S(131072),N(t.kn,t.Bn,[.406,0,0,1])],[M([0,2,.9],[.707,0,0,.707],[3,1.2,2.99]),S(131072),N(t.kn,t.Cn,[.406,0,0,1])],[M([-1.5,1,-1.5],void 0,[.1,2,.1]),S(131072),N(t.kn,t.Bn,[.8,.8,.8,1])],[M([-1.5,1,1.5],void 0,[.1,2,.1]),S(131072),N(t.kn,t.Bn,[.8,.8,.8,1])],[M([1.5,1,-1.5],void 0,[.1,2,.1]),S(131072),N(t.kn,t.Bn,[0,0,0,1])],[M([1.5,1,1.5],void 0,[.1,2,.1]),S(131072),N(t.kn,t.Bn,[.8,.8,.8,1])],[M([0,2,1.49],void 0,[3.099,.1,.1]),S(131072),N(t.kn,t.Bn,[.8,.8,.8,1])],[M([0,2,-1.5],void 0,[3.099,.1,.1]),S(131072),N(t.kn,t.Bn,[.8,.8,.8,1])],[M([1.5,2,-.001],[0,.707,0,.707],[3.099,.1,.1]),S(131072),N(t.kn,t.Bn,[.8,.8,.8,1])],[M([-1.498,2,-.001],[0,.707,0,.707],[3.099,.1,.1]),S(131072),N(t.kn,t.Bn,[.8,.8,.8,1])],[M([-1.28,2.524,1.49],[0,0,.547,.837],[1.159,.1,.1]),S(131072),N(t.kn,t.Bn,[.8,.8,.8,1])],[M([-1.28,2.524,-1.494],[0,0,.547,.837],[1.159,.1,.1]),S(131072),N(t.kn,t.Bn,[.8,.8,.8,1])],[M([1.273,2.524,1.49],[0,0,-.547,.837],[1.159,.1,.1]),S(131072),N(t.kn,t.Bn,[.8,.8,.8,1])],[M([1.273,2.524,-1.524],[0,0,-.547,.837],[1.159,.1,.1]),S(131072),N(t.kn,t.Bn,[.8,.8,.8,1])],[M([.507,3.274,-1.524],[0,0,-.191,.982],[1.159,.1,.1]),S(131072),N(t.kn,t.Bn,[.8,.8,.8,1])],[M([.507,3.274,1.527],[0,0,-.191,.982],[1.159,.1,.1]),S(131072),N(t.kn,t.Bn,[.8,.8,.8,1])],[M([-.521,3.274,1.527],[0,0,.191,.982],[1.159,.1,.1]),S(131072),N(t.kn,t.Bn,[.8,.8,.8,1])],[M([-.521,3.274,-1.525],[0,0,.191,.982],[1.159,.1,.1]),S(131072),N(t.kn,t.Bn,[.8,.8,.8,1])],[M([0,1.5,1.6],void 0,[1.8,.1,.1]),S(131072),N(t.kn,t.Bn,[.8,.8,.8,1])],[M([.854,.7,1.6],[0,0,-.707,.707],[1.5,.1,.1]),S(131072),N(t.kn,t.Bn,[.8,.8,.8,1])],[M([-.85,.7,1.6],[0,0,-.707,.707],[1.5,.1,.1]),S(131072),N(t.kn,t.Bn,[.8,.8,.8,1])],[M([0,.7,1.59],[0,0,-.383,.924],[2.2,.1,.1]),S(131072),N(t.kn,t.Bn,[.8,.8,.8,1])],[M([0,.7,1.58],[0,0,.383,.924],[2.2,.1,.1]),S(131072),N(t.kn,t.Bn,[.8,.8,.8,1])],[M([-1.247,2.524,-.011],[0,0,.547,.837],[1.159,.1,2.99]),S(131072),N(t.kn,t.Bn,[.07,.07,.07,1])],[M([1.242,2.524,-.011],[0,0,-.547,.837],[1.159,.1,2.99]),S(131072),N(t.kn,t.Bn,[.07,.07,.07,1])],[M([.508,3.242,-.011],[0,0,-.191,.982],[1.159,.1,2.99]),S(131072),N(t.kn,t.Bn,[.07,.07,.07,1])],[M([-.515,3.242,-.011],[0,0,.191,.982],[1.159,.1,2.99]),S(131072),N(t.kn,t.Bn,[.07,.07,.07,1])])]}function Bt(t){return[b([M([0,.6,0],void 0,[.1,1.2,.1]),S(131072),N(t.kn,t.Bn,[.8,.8,.8,1])],[M([0,1.21,.5],[.707,0,0,.707],[.1,2,.1]),S(131072),N(t.kn,t.Bn,[.8,.8,.8,1])],[M([0,.6,1],void 0,[.1,1.2,.1]),S(131072),N(t.kn,t.Bn,[.8,.8,.8,1])],[M([0,.8,.5],[.707,0,0,.707],[.1,2,.1]),S(131072),N(t.kn,t.Bn,[.8,.8,.8,1])],[M([0,.4,.5],[.707,0,0,.707],[.1,2,.1]),S(131072),N(t.kn,t.Bn,[.8,.8,.8,1])])]}function Pt(n){n.o=new so,n.Hn=!0,tt(n,[0,.774,0]),function(n){t(n,[...zt(),M()]),t(n,[...kt(n),M()]);for(let o of Object.keys(vo)){let i=_o[o];for(let e=0;e<vo[o].length;e++)t(n,[M(vo[o][e][0],vo[o][e][1],vo[o][e][2]),...i(n)])}}(n),t(n,[...O(n),M([-20,5,0])]),t(n,[...k(0,[1,208/255,0,1]),M([0,10,10]),j(P(n.o,"camera anchor"),.05)])}function Nt(t){return[S(131072),N(t.kn,t.Cn,[.8,.2,.2,1])]}function $t(t){return[b([M([0,.5,0],void 0,[1.01,.5,1]),S(131072),N(t.kn,t.Bn,[1,1,1,1])],[M([0,.25,0],[0,0,-.707,.707],[.5,1,1]),S(131072),N(t.kn,t.Cn,[1,1,1,1])],[M([.25,.75,0],[0,0,-.707,.707],[1,.5,1]),S(131072),N(t.kn,t.Cn,[1,1,1,1])])]}function Vt(n){n.o=new so,n.Hn=!0,tt(n,[0,-2,0]),function(n){t(n,[...zt(),M()]),t(n,[...kt(n),M()]);for(let o of Object.keys(po)){let i=go[o];for(let e=0;e<po[o].length;e++)t(n,[M(po[o][e][0],po[o][e][1],po[o][e][2]),...i(n)])}}(n),t(n,[M([0,10,10]),j(P(n.o,"camera anchor"),.05),b([M(),...k(0,[.4,.6,.4,1]),H(.03),(t,n)=>{t.o.i[n]|=4194304,t.o.Un[n]={J:524288,W:.5,Gn:5,Lt:5,Yn:!1}}])])}function Dt(t,n,o){switch(n){case 0:document.fullscreenElement?document.exitFullscreen():document.body.requestFullscreen();break;case 1:t.Sn=parseInt(o.value);break;case 2:t.Xn=dt;break;case 3:switch(t.qn){case Et:case Kt:t.qn=Pt;break;case Pt:t.qn=Vt}t.Rn++,t.qn(t),t.Xn=ht;break;case 4:{let[n]=o;t.o.i[n]&=-16777217;for(let n=0;n<t.o.i.length;n++)t.o.i[n]&=-257;t.Xn=mt;break}}}function Lt(t,n,o,i){return t.bindTexture(Un,n),t.texImage2D(Un,0,32856,o,i,0,6408,5121,null),t.texParameteri(Un,10241,On),t.texParameteri(Un,10240,On),n}function Wt(t,n,o,i){return t.bindTexture(Un,n),t.texImage2D(Un,0,33190,o,i,0,6402,5125,null),t.texParameteri(Un,10241,On),t.texParameteri(Un,10240,On),t.texParameteri(Un,34892,34894),t.texParameteri(Un,10242,33071),t.texParameteri(Un,10243,33071),n}function jt(t,n,o){let i={Qn:t.createFramebuffer(),Jn:n,Zn:o,no:Lt(t,t.createTexture(),n,o),oo:Wt(t,t.createTexture(),n,o)};t.bindFramebuffer(Gn,i.Qn),t.framebufferTexture2D(Gn,36096,Un,i.oo,0),t.framebufferTexture2D(Gn,36064,Un,i.no,0);let e=t.checkFramebufferStatus(Gn);if(36053!=e)throw Error(`Failed to set up the framebuffer (${e}).`);return i}function Ht(t,n,o){let i=t.createProgram();if(t.attachShader(i,Xt(t,35633,n)),t.attachShader(i,Xt(t,35632,o)),t.linkProgram(i),!t.getProgramParameter(i,35714))throw Error(t.getProgramInfoLog(i));return i}function Xt(t,n,o){let i=t.createShader(n);if(t.shaderSource(i,o),t.compileShader(i),!t.getShaderParameter(i,35713))throw Error(t.getShaderInfoLog(i));return i}function Ot(t,n,o){let i=t.o.I[n],e=t.o.H[n];if(e.Nn){let t=e.X[e.Nn];t&&t!==e.O&&(0===e.O.j?e.O=t:1&e.O.D&&(e.O.j=0,e.O=t)),e.Nn=void 0}let r=null,a=null;for(let t of e.O.V){if(e.O.j<t.L){a=t;break}r=t}if(r&&a){let t=(e.O.j-r.L)/(a.L-r.L);a.St&&(t=a.St(t)),r.S&&a.S&&(p(i.S,r.S,a.S,t),i.N=!0),r.B&&a.B&&(x(i.B,r.B,a.B,t),i.N=!0),r.P&&a.P&&(p(i.P,r.P,a.P,t),i.N=!0)}else r&&(r.S&&(s(i.S,r.S),i.N=!0),r.B&&(function(t,n){t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3]}(i.B,r.B),i.N=!0),r.P&&(s(i.P,r.P),i.N=!0));let l=e.O.j+o;if(l<e.O.W)e.O.j=l;else{if(e.O.j=0,4&e.O.D)for(let t of e.O.V.reverse())t.L=e.O.W-t.L;2&e.O.D||(e.O=e.X.idle)}}function Ut(t,n){let o=t.o.I[n];var i,e;a(ii,o.o),r(ei,o.o),(i=ri)[0]=(e=o.o)[4],i[1]=e[5],i[2]=e[6],h(i,i);let l=t.Audio.listener;l.positionX?(l.positionX.value=ii[0],l.positionY.value=ii[1],l.positionZ.value=ii[2],l.forwardX.value=ei[0],l.forwardY.value=ei[1],l.forwardZ.value=ei[2],l.upX.value=ri[0],l.upY.value=ri[1],l.upZ.value=ri[2]):(l.setPosition(...ii),l.setOrientation(...ei,...ri))}function Gt(t,n,o,i,e){let r=t.currentTime+e,a=0;n&&n.connect(t.destination);let l,s,f=t.createGain();if(f.gain.value=(o[0]/9)**3,o[5]&&(s=t.createOscillator(),s.type=o[5],s.frequency.value=(o[7]/3)**3,l=t.createGain(),l.gain.value=(o[6]+3)**3,s.connect(l)),o[1]){let i=t.createBiquadFilter();i.type=o[1],i.frequency.value=2**o[2],i.Q.value=o[3]**1.5,l&&o[4]&&l.connect(i.detune),f.connect(i),i.connect(n||t.destination)}else f.connect(n||t.destination);for(let n of o[8]){let o=t.createGain();o.connect(f);let e=(n[1]/9)**3,s=(n[2]/9)**3,c=(n[3]/9)**3,u=s+c+(n[4]/6)**3;if(o.gain.setValueAtTime(0,r),o.gain.linearRampToValueAtTime(e,r+s),o.gain.setValueAtTime(e,r+s+c),o.gain.exponentialRampToValueAtTime(1e-5,r+u),n[0]){let e=t.createOscillator();e.type=n[0],e.connect(o),e.detune.value=3*(n[5]-7.5)**3,l&&n[6]&&l.connect(e.detune);let a=440*2**((i-69)/12);if(n[7]){let t=(n[8]/9)**3,o=(n[9]/9)**3,i=(n[10]/6)**3;e.frequency.linearRampToValueAtTime(0,r),e.frequency.linearRampToValueAtTime(a,r+t),e.frequency.setValueAtTime(a,r+t+o),e.frequency.exponentialRampToValueAtTime(1e-5,r+t+o+i)}else e.frequency.setValueAtTime(a,r);e.start(r),e.stop(r+u)}else{let n=t.createBufferSource();n.buffer=Yt(t),n.loop=!0,n.connect(o),n.start(r),n.stop(r+u)}u>a&&(a=u)}s&&(s.start(r),s.stop(r+a))}function Yt(t){if(!oi){oi=t.createBuffer(1,2*t.sampleRate,t.sampleRate);let n=oi.getChannelData(0);for(let t=0;t<n.length;t++)n[t]=2*Math.random()-1}return oi}function qt(t,n,o){let i=t.o.Yt[n],e=t.o.I[n];if(i.O&&(i.j+=o,i.j>i.O.io?i.O=void 0:i.qt&&Qt(i.qt,e)),i.Nn&&!i.O){switch(i.Nn.u){case 0:!function(t,n,o){let i=t.createBufferSource();i.buffer=o.xt,n?(i.connect(n),n.connect(t.destination)):i.connect(t.destination),i.start()}(t.Audio,i.qt,i.Nn);break;case 1:!function(t,n,o){let i=60/(o.eo||120)/4;for(let e of o.ro)for(let o=0;o<e.ao.length;o++)e.ao[o]&&Gt(t,n,e.lo,e.ao[o],o*i)}(t.Audio,i.qt,i.Nn)}i.O=i.Nn,i.j=0,i.qt&&Qt(i.qt,e)}i.Nn=i.Qt}function Qt(t,n){a(li,n.o),r(si,n.o),t.positionX?(t.positionX.value=li[0],t.positionY.value=li[1],t.positionZ.value=li[2],t.orientationX.value=si[0],t.orientationY.value=si[1],t.orientationZ.value=si[2]):(t.setPosition(...li),t.setOrientation(...si))}function Jt(t,n){n>1?(e(t.h,t.m,n,t.v,t._),o(t.p,t.h)):(e(t.h,t.m/n,n,t.v,t._),o(t.p,t.h))}function Zt(t){!function(t,n,o,i,e,r,a){let l=1/(e-o),s=1/(i-n),f=1/(r-a);t[0]=-2*l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*f,t[11]=0,t[12]=(e+o)*l,t[13]=(n+i)*s,t[14]=(a+r)*f,t[15]=1}(t.h,t.M,t.M,-t.M,-t.M,t.v,t._),o(t.p,t.h)}function tn(t,n){let o,i,e,r,l,s;a(n.rn,t),o=r=n.rn[0],i=l=n.rn[1],e=s=n.rn[2];let f=[0,0,0];for(let a=0;a<8;a++){let c=ci[a];f[0]=c[0]*n.bt[0],f[1]=c[1]*n.bt[1],f[2]=c[2]*n.bt[2],v(f,f,t),f[0]<o&&(o=f[0]),f[0]>r&&(r=f[0]),f[1]<i&&(i=f[1]),f[1]>l&&(l=f[1]),f[2]<e&&(e=f[2]),f[2]>s&&(s=f[2])}n.on=[o,i,e],n.en=[r,l,s],n.an[0]=(r-o)/2,n.an[1]=(l-i)/2,n.an[2]=(s-e)/2}function nn(t,n){let o=t.rn[0]-n.rn[0],i=t.an[0]+n.an[0]-Math.abs(o),e=t.rn[1]-n.rn[1],r=t.an[1]+n.an[1]-Math.abs(e),a=t.rn[2]-n.rn[2],l=t.an[2]+n.an[2]-Math.abs(a);return i<r&&i<l?[i*Math.sign(o),0,0]:r<l?[0,r*Math.sign(e),0]:[0,0,l*Math.sign(a)]}function on(t,n){return t.on[0]<n.en[0]&&t.en[0]>n.on[0]&&t.on[1]<n.en[1]&&t.en[1]>n.on[1]&&t.on[2]<n.en[2]&&t.en[2]>n.on[2]}function en(t,n,o){for(let i=0;i<o;i++){let o=n[i],e=t.i&o.nn,r=o.i&t.nn;if((e||r)&&on(t,o)){let n=nn(t,o);e&&t.ln.push({so:o.Entity,fo:n}),r&&o.ln.push({so:t.Entity,fo:d([0,0,0],n)})}}}function rn(t,n){let o=t.o.sn[n],i=t.o.hn[n];if(o.fn&&i._n.push(o.fn.slice()),o.B&&i.pn.push(o.B.slice()),o.Animation)for(let i of F(t.o,n,1))t.o.H[i].Nn=o.Animation}function an(t,n){let o=t.o.cn[n];if(1&o.D){let o=t.o.hn[n],i=t.o.Jt[n],e=t.o.Yt[n],r=t.o.yn[n],a=!1;if(t.co.ArrowLeft&&(o._n.push([-1,0,0]),a=!0),t.co.ArrowRight&&(o._n.push([1,0,0]),a=!0),a&&i.ln.length>0){let n=t.o.Jt[i.ln[0].so].nn;16&n?e.Nn=hi:32&n?e.Nn=mi:64&n&&(e.Nn=vi)}r.Fn||t.co.ArrowUp&&(r.xn[1]+=500)}if(2&o.D){let i=t.o.I[n];o.dn||(t.co.ArrowLeft&&o.un&&(o.un=!1,g(i.B,0,-.7,0,.7),i.N=!0),t.co.ArrowRight&&!o.un&&(o.un=!0,g(i.B,0,.7,0,.7),i.N=!0))}if(8&o.D){let i=t.o.Jt[n];if(t.co.Space&&!o.dn&&i.ln.length>0){let o=i.ln[0].so,e=t.o.Wt[o];for(let i of z(t.o,n,256))t.o.cn[i].dn=o;t.o.i[o]|=16384,e.R=n}if(-1===t.uo.Space&&o.dn){t.o.i[o.dn]&=-16385;for(let o of z(t.o,n,256))t.o.cn[o].dn=null}}if(4&o.D){let o;(t.co.ArrowLeft||t.co.ArrowRight)&&(o="walk");let i=t.o.I[n].$;if(void 0!==i){let n=t.o.I[t.o.Wt[i].R].$;void 0!==n&&t.o.yn[n].Fn&&(o="jump")}if(o)for(let i of F(t.o,n,1))t.o.H[i].Nn=o}}function ln(t,n,o,i){let e=t.o.cn[n];if(1&e.D){let e=t.o.hn[n];Math.abs(o)>.01&&e._n.push([(r=o,Math.max(-1,Math.min(1,r))),0,0]);let a=t.o.yn[n];a.Fn||Math.abs(i)>.5&&(a.xn[1]+=500)}var r;if(2&e.D){let i=t.o.I[n];e.dn||(o<0&&e.un&&(e.un=!1,g(i.B,0,-.7,0,.7),i.N=!0),o>0&&!e.un&&(e.un=!0,g(i.B,0,.7,0,.7),i.N=!0))}if(8&e.D){let o=t.o.Jt[n];if(1===t.uo.Touch0&&pi<.2&&!e.dn&&o.ln.length>0){let i=o.ln[0].so;for(let o of z(t.o,n,256))t.o.cn[o].dn=i;t.o.i[i]|=16384,t.o.Wt[i].R=n}if(-1===t.uo.Touch0&&e.dn){t.o.i[e.dn]&=-16385;for(let o of z(t.o,n,256))t.o.cn[o].dn=null}}if(4&e.D&&0!==o)for(let o of F(t.o,n,1))t.o.H[o].Nn="walk"}function sn(t,n){if(1&t.o.cn[n].D){let o=t.o.hn[n];Math.abs(t.uo.pad0_axis_1)>.1&&o._n.push([-t.uo.pad0_axis_1,0,0]),Math.abs(t.uo.pad0_axis_2)>.1&&o._n.push([0,0,-t.uo.pad0_axis_2])}}function fn(t,n,o){let i=t.o.q[n];Math.abs(t.o.I[n].o[12]-o)>15?t.o.i[n]&=~i.J:t.o.i[n]|=i.J}function cn(t,n){t.do.textAlign="center",t.do.font=n.ho,t.do.fillStyle=n.mo,t.do.fillText(n.Text,0,0)}function un(t,n){t.do.strokeStyle=n.Dn,t.do.strokeRect(-n.bt/2,-n.bt/2,n.bt,n.bt)}function dn(t,n,o){let i=t.o.Nt[n];i.Ut-=o,i.Ut<0&&(i.zn&&Dt(t,i.zn,n),R(t.o,n))}function hn(t,n,o){let i=t.o.Vn[n];a(xi,t.o.I[n].o),1===i.u&&h(xi,xi),t.vo[4*o+0]=xi[0],t.vo[4*o+1]=xi[1],t.vo[4*o+2]=xi[2],t.vo[4*o+3]=i.u,t._o[4*o+0]=i.Dn[0],t._o[4*o+1]=i.Dn[1],t._o[4*o+2]=i.Dn[2],t._o[4*o+3]=i.Ln}function mn(t,n,o){let i=t.o.I[n],e=t.o.hn[n];if(e._n.length){let n=e._n.reduce(vn),r=Math.min(1,function(t){return Math.hypot(t[0],t[1],t[2])}(n));_(n,n,i.o),void 0!==i.$&&_(n,n,t.o.I[i.$].K),h(n,n),u(n,n,r*e.mn*o),f(i.S,i.S,n),i.N=!0,e._n=[]}if(e.pn.length){let t=e.pn.reduce(_n);x(t,bi,t,Math.min(1,e.vn/Math.PI*o)),y(i.B,t,i.B),i.N=!0,e.pn=[]}if(e.gn.length){let t=e.gn.reduce(_n);x(t,bi,t,Math.min(1,e.vn/Math.PI*o)),y(i.B,i.B,t),i.N=!0,e.gn=[]}}function vn(t,n){return f(t,t,n)}function _n(t,n){return y(t,t,n)}function pn(t,n,o){let i=t.o.Pt[n],e=t.o.I[n];i.Lt+=o,i.Lt>i.$t&&(i.Lt=0,a(Ri,e.o),r(Mi,e.o),i.Dt.push(...Ri,0),i.Dt.push(...Mi,Math.random()));for(let t=0;t<i.Dt.length;)i.Dt[t+3]+=o,i.Dt[t+3]>i.Nt?i.Dt.splice(t,8):t+=8}function gn(t,n,o){let i=t.o.I[n],e=t.o.yn[n];if(1===e.u){s(e.Tn,e.An),u(e.xn,e.xn,o),f(e.Tn,e.Tn,e.xn),e.Tn[1]+=-20*o;let t=[0,0,0];u(t,e.Tn,o),f(i.S,i.S,t),i.N=!0,(r=e.xn)[0]=0,r[1]=0,r[2]=0}var r}function yn(t,n,o){let i=t.o.yn[n];if(2===i.u){let e=[0,0,0];a(e,t.o.I[n].o);let r=[0,0,0];c(r,e,i.bn),u(i.Tn,r,1/o),s(i.bn,e)}}function wn(t,n){let o=t.o.I[n],i=t.o.Jt[n],e=t.o.yn[n];if(1===e.u){let n=!1;for(let r=0;r<i.ln.length;r++){let a=i.ln[r];if(262144&t.o.i[a.so]){n=!0,f(o.S,o.S,a.fo),o.N=!0;let i=t.o.yn[a.so];switch(i.u){case 0:h(Ii,a.fo),u(Ii,Ii,-2*m(e.Tn,Ii)),f(e.An,e.Tn,Ii);break;case 1:case 2:s(e.An,i.Tn)}u(e.An,e.An,e.wn),a.fo[1]>0&&e.An[1]<1&&(e.An[1]=0,e.Fn=!1)}}n||(s(e.An,e.Tn),e.Fn=!0)}}function xn(t,n){if(32&t.i[n]){let o=t.k[n];for(let n of o.k)if(2097152&t.i[n])return!0}return!1}function Tn(t,n){t.nt.bindFramebuffer(Gn,null),t.nt.viewport(0,0,t.po,t.yo),t.nt.clearColor(...n.F),t.nt.clear(16640),bn(t,n)}function An(t,n){t.nt.bindFramebuffer(Gn,n.R.Qn),t.nt.viewport(0,0,n.R.Jn,n.R.Zn),t.nt.clearColor(...n.F),t.nt.clear(16640),bn(t,n)}function bn(t,n){let o=null,i=null;for(let e=0;e<t.o.i.length;e++)if((t.o.i[e]&Ki)===Ki){let r=t.o.I[e],a=t.o.st[e];if(a.ft!==o)switch(o=a.ft,a.u){case 0:Fn(t,a.ft,n);break;case 1:Mn(t,a.ft,n);break;case 2:kn(t,a.ft,n);break;case 3:In(t,a.ft,n);break;case 4:Kn(t,a.ft,n)}switch(a.ut!==i&&(i=a.ut,t.nt.frontFace(a.ut)),a.u){case 0:Rn(t,r,a);break;case 1:zn(t,r,a);break;case 2:Cn(t,e,r,a);break;case 3:{let n=t.o.Pt[e];n.Dt.length&&En(t,a,n);break}case 4:Sn(t,r,a)}}}function Fn(t,n,o){t.nt.enable(Hn),t.nt.useProgram(n.wo),t.nt.uniformMatrix4fv(n.et.T,!1,o.T)}function Rn(t,n,o){t.nt.uniformMatrix4fv(o.ft.et.o,!1,n.o),t.nt.uniform4fv(o.ft.et.Dn,o.Dn),t.nt.bindVertexArray(o.dt),t.nt.drawElements(o.ft.xo,o.ct.To,Yn,0),t.nt.bindVertexArray(null)}function Mn(t,n,o){if(t.nt.enable(Hn),t.nt.useProgram(n.wo),t.nt.uniformMatrix4fv(n.et.T,!1,o.T),t.nt.uniform3fv(n.et.Ao,o.A),t.nt.uniform4fv(n.et.vo,t.vo),t.nt.uniform4fv(n.et._o,t._o),t.nt.uniform4fv(n.et.bo,o.F),t.nt.uniform1f(n.et.Fo,o.h._),3===o.u)t.nt.activeTexture(33984),t.nt.bindTexture(Un,t.jn.Ro.oo),t.nt.uniform1i(n.et.Mo,0);else{t.nt.activeTexture(33984),t.nt.bindTexture(Un,t.jn.Wn.oo),t.nt.uniform1i(n.et.Mo,0);let o=vt(t.o,8208);o&&t.nt.uniformMatrix4fv(n.et.zo,!1,t.o.l[o].T)}}function zn(t,n,o){t.nt.uniformMatrix4fv(o.ft.et.o,!1,n.o),t.nt.uniformMatrix4fv(o.ft.et.K,!1,n.K),t.nt.uniform4fv(o.ft.et.ht,o.ht),t.nt.uniform4fv(o.ft.et.vt,o.vt),t.nt.uniform1f(o.ft.et._t,o._t),t.nt.bindVertexArray(o.dt),t.nt.drawElements(o.ft.xo,o.ct.To,Yn,0),t.nt.bindVertexArray(null)}function kn(t,n,o){t.nt.enable(Hn),t.nt.useProgram(n.wo),t.nt.uniformMatrix4fv(n.et.T,!1,o.T),t.nt.uniform3fv(n.et.Ao,o.A),t.nt.uniform4fv(n.et.vo,t.vo),t.nt.uniform4fv(n.et._o,t._o),t.nt.uniform4fv(n.et.bo,o.F),t.nt.uniform1f(n.et.Fo,o.h._)}function Cn(t,n,o,e){t.nt.uniformMatrix4fv(e.ft.et.o,!1,o.o),t.nt.uniformMatrix4fv(e.ft.et.K,!1,o.K),t.nt.uniform4fv(e.ft.et.ht,e.ht),t.nt.uniform4fv(e.ft.et.vt,e.vt),t.nt.uniform1f(e.ft.et._t,e._t);let r=[];if(32&t.o.i[n])for(let o of F(t.o,n,8388616))r.push(o);else{let o=n;for(let n=0;n<5;n++){let n=vt(t.o,8388616,o);n&&(r.push(n),o=n+1)}}for(let n of r){let o=t.o.I[n],e=t.o.U[n];i(Si.subarray(16*e.G),o.o,e.Y)}t.nt.uniformMatrix4fv(e.ft.et.ko,!1,Si),t.nt.bindVertexArray(e.dt),t.nt.drawElements(e.ft.xo,e.ct.To,Yn,0),t.nt.bindVertexArray(null)}function In(t,n,o){t.nt.enable(Hn),t.nt.useProgram(n.wo),t.nt.uniformMatrix4fv(n.et.T,!1,o.T)}function En(t,n,o){t.nt.uniform4fv(n.ft.et.Tt,n.Tt),t.nt.uniform4fv(n.ft.et.At,n.At),t.nt.uniform4f(n.ft.et.Co,o.Nt,o.Vt,...n.bt);let i=Float32Array.from(o.Dt);t.nt.bindBuffer(Wn,n.xt),t.nt.bufferSubData(Wn,0,i),t.nt.enableVertexAttribArray(n.ft.et.Io),t.nt.vertexAttribPointer(n.ft.et.Io,4,qn,!1,32,0),t.nt.enableVertexAttribArray(n.ft.et.fn),t.nt.vertexAttribPointer(n.ft.et.fn,3,qn,!1,32,16),t.nt.drawArrays(n.ft.xo,0,o.Dt.length/8)}function Kn(t,n,o){t.nt.disable(Hn),t.nt.useProgram(n.wo),t.nt.uniformMatrix4fv(n.et.T,!1,o.T),t.nt.uniform3fv(n.et.Ao,o.A),t.nt.uniform4fv(n.et.bo,o.F),t.nt.uniform1f(n.et.Fo,o.h._)}function Sn(t,n,o){t.nt.uniformMatrix4fv(o.ft.et.o,!1,n.o),t.nt.uniform3fv(o.ft.et.kt,o.kt),t.nt.bindVertexArray(o.dt),t.nt.drawElementsInstanced(o.ft.xo,o.ct.To,Yn,0,Math.floor(o.zt*(t.Sn/4096))),t.nt.bindVertexArray(null)}function Bn(t,n){let o=t.o.Ht[n],i=t.o.I[n];i.S=[Math.random()-.5,Math.random()-.5,Math.random()-.5],u(i.S,i.S,2*o.Xt),i.N=!0}function Pn(n,o,i){let e=n.o.In[o],r=2048/n.Sn;if(e.Lt+=i,e.Lt>e.Kn*r){e.Lt=0;let i=n.o.I[o],r=[0,0,0];a(r,i.o);let s=[0,0,0,0];l(s,i.o),t(n,[...e.En(n),M(r,s)])}}function Nn(t,n,o){let i=t.o.Un[n];i.Lt+=o,i.Yn&&i.Lt>i.W?(i.Lt=0,i.Yn=!1,t.o.i[n]&=~i.J):!i.Yn&&i.Lt>i.Gn&&(i.Lt=0,i.Yn=!0,t.o.i[n]|=i.J)}function $n(t,n){for(let n=0;n<t.o.i.length;n++)if((t.o.i[n]&$i)===$i){let o=t.o.I[n];o.N&&Vn(t.o,n,o)}}function Vn(t,n,e){if(e.N=!1,function(t,n,o,i){let e=n[0],r=n[1],a=n[2],l=n[3],s=e+e,f=r+r,c=a+a,u=e*s,d=e*f,h=e*c,m=r*f,v=r*c,_=a*c,p=l*s,g=l*f,y=l*c,w=i[0],x=i[1],T=i[2];t[0]=(1-(m+_))*w,t[1]=(d+y)*w,t[2]=(h-g)*w,t[3]=0,t[4]=(d-y)*x,t[5]=(1-(u+_))*x,t[6]=(v+p)*x,t[7]=0,t[8]=(h+g)*T,t[9]=(v-p)*T,t[10]=(1-(u+m))*T,t[11]=0,t[12]=o[0],t[13]=o[1],t[14]=o[2],t[15]=1}(e.o,e.B,e.S,e.P),void 0!==e.$&&i(e.o,t.I[e.$].o,e.o),o(e.K,e.o),32&t.i[n]){let o=t.k[n];for(let i=0;i<o.k.length;i++){let e=o.k[i];if(8388608&t.i[e]){let o=t.I[e];o.$=n,Vn(t,e,o)}}}}function Dn(t,n){let o=t.o.Jt[n],i=t.o.Nn[n];for(let e of o.ln)i.J&t.o.Jt[e.so].nn&&Dt(t,i.zn,[n,e.so])}const Ln=35044,Wn=34962,jn=34963,Hn=2884,Xn=2304,On=9729,Un=3553,Gn=36160,Yn=5123,qn=5126,Qn=document.getElementById("update"),Jn=document.getElementById("delta"),Zn=document.getElementById("fps"),to=1/60,no=Math.PI/180,oo=new WeakMap,io=new WeakMap,eo=.2,ro=.6000000000000001;let ao=1,lo={u:1,ro:[{lo:[8,"lowpass",9,8,!1,!1,8,1,[[!1,8,5,0,9]]],ao:[77]}],io:.1};class so extends class{constructor(){this.i=[],this.Eo=[]}t(){return this.Eo.length>0?this.Eo.pop():this.i.push(0)-1}C(t){this.i[t]=0,this.Eo.push(t)}}{constructor(){super(...arguments),this.H=[],this.Yt=[],this.U=[],this.l=[],this.k=[],this.Jt=[],this.sn=[],this.cn=[],this.q=[],this.Ko=[],this.Pt=[],this.Nt=[],this.Vn=[],this.Wt=[],this.hn=[],this.Z=[],this.st=[],this.yn=[],this.Ht=[],this.In=[],this.Ot=[],this.Un=[],this.I=[],this.Nn=[]}}const fo=[0,1,0,0,.36,0,0,.5,0,.48,.98,0,1,.84,0,1,.54,0,.84,.21,.21],co=[[.1,.1,.1,1],[.2,.2,.2,1]],uo=[[.1,.1,.1,1],[.2,.2,.2,1],[.3,.3,.3,1]];let ho={ground:[[[7.53,-.5,1.45],[0,.71,0,.71],[4,2,30]],[[30.68,-1.2,1.45],[0,.71,0,.71],[4,2,17.76]],[[71.79,-1.48,1.45],[0,.71,0,.71],[4,2,6.11]],[[76.04,.52,1.45],[0,.71,0,.71],[4,2,7.05]],[[49.73,-1.5,-5.55],[0,.71,0,.71],[10,4,120]],[[53.76,-.5,1.45],[0,.71,0,.71],[4,2,30]]],ogon:[[[17.04,-3.41,-6.36],[0,.71,0,.71],[5,10,10]],[[29.07,-2.85,-6.2],[0,.71,0,.71],[5,10,10]],[[40.24,-8.32,-7.02],[0,.71,0,.71],[12,22,8]],[[69.45,-3.41,-6.36],[0,.71,0,.71],[5,10,10]],[[87.09,-10.27,-7.02],[0,.71,0,.71],[12,22,8]]],house:[[[11.67,.5,-2.49]],[[-1.9,.44,-3.7],[0,-.99,0,.17],[.5,.5,.5]],[[59.59,.44,-4.68],[0,.71,0,.71],[.5,.5,.5]],[[61.26,.44,-4.68],[0,.71,0,.71],[.5,.5,.5]],[[62.93,.44,-4.68],[0,.71,0,.71],[.5,.5,.5]]],bush:[[[8.58,.72,.59]],[[24.08,.38,-.49]],[[.56,.24,-3.39]],[[13.37,2.13,-1.2]],[[-1.27,.19,-3.2],void 0,[.5,.5,.5]],[[-4.52,.69,1.75]],[[4.62,.53,-3.36]],[[26.94,.93,-1.8]],[[31.05,.74,-1.14]],[[29.08,.39,-3.85]],[[11.58,.68,2.02]],[[22.34,.38,-.91]],[[-2.77,.38,-.99]],[[22.57,.93,-1.77]],[[42.7,.93,-2.99],[0,-.73,0,.69]],[[60.15,.56,-3.88],[0,-.73,0,.69]],[[67.32,.39,-3.85]],[[61.98,.21,2.78]],[[56.16,.61,.39],[0,-1,0,-.02]]],slup:[[[2.69,.33,-2.79]],[[-.62,4.32,-5.26],void 0,[.2,.2,.2]],[[-4.67,3.78,-5.4],void 0,[.15,.15,.15]],[[23.85,.11,-5.15]],[[21.29,6.84,-5.26],void 0,[.2,.2,.2]],[[15.39,.11,-2.79]],[[14.31,.11,3.18]],[[56.12,.24,2.71]],[[51.79,4.32,-5.26],void 0,[.2,.2,.2]],[[47.74,3.78,-5.4],void 0,[.15,.15,.15]],[[46,.11,-1.52],[0,-.73,0,.69]],[[78.02,.24,-3.54]]],tree:[[[-3.15,-.07,-5.67]],[[11.68,4.85,-5.24],void 0,[.25,.25,.25]],[[20.6,.48,-2.51]],[[28.5,.48,-2.51]],[[30.33,.08,-3.08]],[[33.68,.26,-2.99]],[[33.43,.26,-4.45]],[[31.6,.26,-1.59]],[[29.48,.26,-.83]],[[28.81,.26,-4.26]],[[34.24,.26,-5.09],void 0,[.7,.7,.7]],[[32.34,.26,-3.38]],[[28.14,.26,-1.57]],[[27.83,.26,-4]],[[30.21,.26,-4.56]],[[30.57,.26,-2.24]],[[21.22,.26,-3.27]],[[22.44,.26,-2.85]],[[23.73,.26,-3.69]],[[17.43,.48,-2.71]],[[18.73,.48,-1.71]],[[30.87,.48,3.1]],[[32.98,.48,3.34]],[[33.51,.48,3]],[[31.02,.26,-3.72]],[[31.78,.26,-4.74]],[[31.02,.26,-3.72]],[[31.78,.26,-4.74]],[[34.23,.26,-5.69],void 0,[.7,.7,.7]],[[37.32,.26,-6],void 0,[.7,.7,.7]],[[34.82,.26,-6.02],void 0,[.7,.7,.7]],[[34.69,.26,-5.57],void 0,[.7,.7,.7]],[[35.66,.26,-6.28],void 0,[.7,.7,.7]],[[35.34,.26,-5.68],void 0,[.7,.7,.7]],[[36.18,.26,-5.88],void 0,[.7,.7,.7]],[[38.56,.26,-6.61],void 0,[.4,.4,.4]],[[36.27,.26,-6.53],void 0,[.4,.4,.4]],[[36.88,.26,-7.02],void 0,[.4,.4,.4]],[[37.91,.26,-6.46],void 0,[.4,.4,.4]],[[37.39,.26,-6.92],void 0,[.4,.4,.4]],[[37.06,.26,-6.53],void 0,[.4,.4,.4]],[[38.19,.26,-6.96],void 0,[.4,.4,.4]],[[44.27,.26,-4.25],[0,-.73,0,.69]],[[43.78,.26,-3.06],[0,-.73,0,.69]],[[68.57,.08,-3.08]],[[71.92,.26,-2.99]],[[71.67,.26,-4.45]],[[72.48,.26,-5.09],void 0,[.7,.7,.7]],[[70.58,.26,-3.38]],[[68.81,.26,-2.24]],[[69.26,.26,-3.72]],[[70.02,.26,-4.74]],[[72.47,.26,-5.69],void 0,[.7,.7,.7]],[[78.66,1.21,3.1],[0,1,0,.09]],[[75.15,1.4,-.34],[0,1,0,.09]],[[73.43,1.23,3.11],[0,1,0,.09]]],obstacle_house:[[[11.69,.5,.83]],[[54.04,.5,.83]]],obstacle_car:[[[-3.95,.5,1.41],[0,.62,0,.78]],[[7.69,1,-.1],[-.15,.68,.7,.14],[.4,.4,.4]],[[56.4,1,.3],[.7,.15,.16,-.68]]],box:[[[28.61,.97,0]],[[54.23,4.09,0]],[[28.61,2.41,0]],[[41.7,2.41,0]],[[41.39,2.41,2.85]],[[41.03,2.95,-1.3],[0,0,-.71,.71]]],car2:[[[21.96,1,-2.35],[-.44,.55,.56,.43],[.4,.4,.4]],[[43.31,1,-3.57],[-.71,.06,.06,.7],[.4,.4,.4]]],exit:[[[77,1.5,0]]],spawn_bird:[[[-3,2,-2],[.01,.76,.12,.64]],[[14,2,-2],[.01,.76,.12,.64]],[[33,2,-2],[.01,.76,.12,.64]],[[53,2,-2],[.01,.76,.12,.64]],[[73,2,-2],[.01,.76,.12,.64]]],spawn_animal:[[[-7,.5,-5],[0,.71,0,.71]]]},mo={ground:Tt,ogon:function(t){return[N(t.kn,t.Mn,[.5,.5,.5,1])]},house:bt,bush:yt,slup:Ct,tree:gt,obstacle_house:function(t){return[b([M(),...bt(t)],[M([0,1.5,0],void 0,[3,3,3]),Y(!1,34,0),Z(0)],[M([-2.25,2,0],void 0,[1.5,.1,3]),Y(!1,66,0),Z(0)],[M([-.8,.1,0],void 0,[4.9,.2,3.4]),Y(!1,34,0),Z(0)])]},obstacle_car:function(t){return[b([M(),...At(t)],[M([0,.8,0],void 0,[4,1,2]),Y(!1,66,0),Z(0)])]},box:pt,car2:At,exit:xt,spawn_bird:function(t){return[b([M(),H(1),ft(Rt,.5),S(1572864)])]},spawn_animal:function(t){return[ft(Ft,1)]}},vo={ground:[[[5.4,-.5,.96],[0,.71,0,.71],[4,2,15]],[[19.35,-2.5,.96],[0,.71,0,.71],[4,2,14]],[[42.3,-.5,.96],[0,.71,0,.71],[4,2,35]],[[56.93,-1.5,-6.04],[0,.71,0,.71],[10,4,120]],[[82.63,-.5,.96],[0,.71,0,.71],[4,2,35]],[[62.53,-.8,.96],[0,.71,0,.71],[4,2,5.75]]],tree:[[[66.27,.26,-4.18]],[[13.79,.19,-3.01]],[[25.09,.4,2.79]],[[59.5,.26,.93]],[[54.9,.26,1.47]],[[50.29,.26,1.16]],[[67.94,.26,2.63]],[[79.2,.26,-.81]],[[81.95,.26,-5.34]],[[94.12,.26,-2.96]],[[96.33,.26,2.51]]],bush:[[[32.71,.39,-4.35]],[[18.12,.55,-5.59]],[[13.63,-.54,-1.59],void 0,[2,2,2]],[[62.6,.58,-7]],[[66.02,3.59,-7.08]],[[11.41,.61,-5.83]],[[29.08,.33,-4.94]],[[2.72,.61,2.53]],[[9.21,.61,2.53]],[[15.27,-1.92,2.4]],[[15.64,-.54,-1.63],void 0,[2,2,2]],[[17.73,-.54,-1.47],void 0,[2,2,2]],[[19.82,-.54,-1.78],void 0,[2,2,2]],[[21.79,-.54,-1.67],void 0,[2,2,2]],[[23.69,-.54,-2.02],void 0,[2,2,2]],[[47.85,.33,2.41]],[[58.51,.61,2.53]],[[77.58,.78,2.87]]],barn:[[[1.39,.5,-5.42],[0,.56,0,.83],[2,2,2]],[[19.23,.5,-6.94],void 0,[.8,.8,.8]],[[71.83,.5,-7.63],[0,-.44,0,.9],[.8,.8,.8]],[[31.74,.5,-6.94],void 0,[.8,.8,.8]],[[95.37,.5,-5.59],void 0,[.8,.8,.8]]],fence:[[[-.95,.5,2.69],[0,.71,0,.71]],[[1.05,.5,2.69],[0,.71,0,.71]],[[2.52,-.05,2.69],[.19,.68,-.19,.68]],[[8.46,.5,-7.56],[0,.71,0,.71]],[[10.46,.5,-7.56],[0,.71,0,.71]],[[12.46,.5,-7.56],[0,.71,0,.71]],[[14.46,.5,-7.56],[0,.71,0,.71]],[[16.46,.5,-7.56],[0,.71,0,.71]],[[18.46,.5,-7.56],[0,.71,0,.71]],[[74.69,.5,-3.81],[0,.82,0,.58],[.5,.5,.5]],[[73.83,.5,-3.49],[0,.82,0,.58],[.5,.5,.5]],[[72.94,.5,-3.3],[0,.74,0,.67],[.5,.5,.5]],[[72.02,.5,-3.24],[0,.72,0,.69],[.5,.5,.5]],[[71.07,.5,-3.19],[0,.72,0,.69],[.5,.5,.5]],[[70.14,.5,-3.3],[0,.6,0,.8],[.5,.5,.5]],[[69.34,.5,-3.74],[0,.41,0,.91],[.5,.5,.5]],[[67.36,.5,-5.59],[0,.41,0,.91],[.5,.5,.5]],[[66.55,.5,-5.93],[0,.68,0,.74],[.5,.5,.5]],[[65.62,.5,-6.02],[0,.68,0,.74],[.5,.5,.5]],[[64.69,.5,-6.02],[0,.74,0,.67],[.5,.5,.5]],[[63.79,.5,-5.93],[0,.74,0,.67],[.5,.5,.5]],[[68.03,.5,-4.98],[0,.41,0,.91],[.5,.5,.5]],[[62.88,.5,-5.92],[0,.68,0,.74],[.5,.5,.5]],[[61.96,.5,-5.92],[0,.74,0,.67],[.5,.5,.5]],[[61.12,.5,-6.12],[0,.48,0,.88],[.5,.5,.5]],[[60.44,.5,-6.74],[0,.33,0,.94],[.5,.5,.5]],[[60.09,.5,-7.58],[0,.05,0,1],[.5,.5,.5]],[[60.01,.5,-8.53],[0,.05,0,1],[.5,.5,.5]],[[68.41,.29,-4.19],[.15,.38,-.33,.85],[.5,.5,.5]],[[15.13,-1.48,1.53],[.5,.5,.5,.5]],[[24.97,.5,-7.56],[0,.71,0,.71]],[[26.97,.5,-7.56],[0,.71,0,.71]],[[28.97,.5,-7.56],[0,.71,0,.71]],[[30.97,.5,-7.56],[0,.71,0,.71]],[[21,.5,-7.56],[0,.71,0,.71]],[[23,.5,-7.56],[0,.71,0,.71]],[[54.83,.5,2.69],[0,.71,0,.71]],[[56.83,.5,2.69],[0,.71,0,.71]],[[58.3,-.05,2.69],[.19,.68,-.19,.68]],[[90.59,.5,-6.21],[0,.71,0,.71]],[[92.59,.5,-6.21],[0,.71,0,.71]],[[94.59,.5,-6.21],[0,.71,0,.71]],[[89.69,.5,-5.27],[0,1,0,0]],[[89.7,.5,-3.44],[0,1,0,0]],[[89.71,.5,-1.64],[0,1,0,0]],[[89.73,.5,2.07],[0,1,0,0]],[[89.69,1.64,-5.27],[0,1,0,0]],[[89.7,1.64,-3.44],[0,1,0,0]],[[89.71,1.64,-1.64],[0,1,0,0]],[[89.73,1.64,2.07],[0,1,0,0]]],silo:[[[7.95,.5,-5.44],[0,.17,0,.98]],[[62.05,.5,-7.33],[0,.17,0,.98],[.6,.6,.6]],[[64.08,.5,-7.33],[0,.17,0,.98],[.6,.6,.6]],[[66.14,.5,-7.33],[0,.17,0,.98],[.6,.6,.6]],[[72.23,.5,-1.57],[0,.17,0,.98]]],slup:[[[24.62,.36,-5.02],[0,.95,0,.31]],[[70.27,.36,-8.29],[0,.95,0,.31],[.7,.7,.7]],[[38.09,.36,-7.73],[0,.95,0,.31]],[[53.83,.36,-3.7],[0,.19,0,.98]],[[59.06,.36,-10.05],[0,.56,0,.83]],[[84.66,.36,-2.18],[0,.95,0,.31]]],car2:[[[11.78,.9,-6.81],[.68,.19,-.19,.68],[.4,.4,.4]]],obstacle_slup:[[[25.37,.23,0],[-.67,.67,.22,.22],[.75,.75,.75]],[[78.08,.72,-3.38],[-.32,.63,.63,-.32],[.75,.75,.75]]],box:[[[23.23,-.71,.06]],[[41.23,3.45,.06]],[[41.23,1.08,.06]],[[41.23,2.27,.06]],[[41.23,4.62,0]],[[77,1.98,0]],[[72.16,4.57,.31]]],obstacle_barn:[[[44.79,.5,-.19],[0,.71,0,.71],[2,2,2]]],obstacle_fence:[[[71.01,3,.32],[.71,.71,0,0],[2,2,2]],[[-1.91,.5,-.22]],[[-1.91,.5,1.82]],[[89.73,.5,.15],[0,1,0,0]],[[89.73,1.64,.15],[0,1,0,0]]],exit:[[[95,.5,0]]]},_o={ground:Tt,tree:gt,bush:yt,barn:St,fence:Bt,silo:function(t){return[b([M([0,3,0],void 0,[2.5,6,2.5]),S(131072),N(t.kn,t.Cn,[.406,0,0,1])],[M([0,.001,0],void 0,[2.6,.2,2.6]),S(131072),N(t.kn,t.Cn,[.8,.8,.8,1])],[M([0,6,0],void 0,[2.6,.2,2.6]),S(131072),N(t.kn,t.Cn,[.8,.8,.8,1])],[M([0,3,0],void 0,[2.6,.2,2.6]),S(131072),N(t.kn,t.Cn,[.8,.8,.8,1])],[M([0,1.5,0],void 0,[2.6,.2,2.6]),S(131072),N(t.kn,t.Cn,[.8,.8,.8,1])],[M([0,4.5,0],void 0,[2.6,.2,2.6]),S(131072),N(t.kn,t.Cn,[.8,.8,.8,1])],[M([.527,3,1.595],void 0,[.4,6,.4]),S(131072),N(t.kn,t.Cn,[.8,.8,.8,1])])]},slup:Ct,car2:At,obstacle_slup:function(t){return[b([M(),...Ct(t)],[M([0,4,0],void 0,[.5,8,.5]),Y(!1,34,0),Z(0)])]},box:pt,obstacle_barn:function(t){return[b([M(),...St(t)],[M([0,1,0],void 0,[3,2,3]),Y(!1,34,0),Z(0)])]},obstacle_fence:function(t){return[b([M(),...Bt(t)],[M([0,.7,.5],void 0,[.1,1.2,2]),Y(!1,34,0),Z(0)])]},exit:xt},po={ground:[[[3.7,-4.7,1.4],[0,.71,0,.71],[4,2,20]],[[33.68,-2.25,1.4],[0,.71,0,.71],[4,5,40]],[[68.76,-1.75,-5.6],[0,.71,0,.71],[10,4,150]],[[-3.79,-1.96,0],[0,.71,0,.71],[1.5,6.14,2]],[[103.51,-2.25,1.4],[0,.71,0,.71],[4,5,80]],[[58.57,-3.26,1.4],[0,.71,0,.71],[4,2,10]]],bush:[[[11.08,.55,-6.4]],[[-3.75,-1.04,-.37],void 0,[3,3,3]],[[20.01,.58,-6.57],void 0,[2.44,1,2.54]],[[7.74,.61,-5.39]],[[17.47,.55,-8.6]],[[20.54,.55,-1.32]],[[10.41,.55,-1.96]],[[-1.61,.55,-2.29]],[[27.7,.58,-2.78],void 0,[2.44,1,2.54]],[[29.88,.58,-9.01],void 0,[2.44,1,2.54]],[[15.8,.58,-4.06],void 0,[2.44,1,2.54]],[[23.4,.58,-.95],void 0,[2.44,1,2.54]],[[-.54,-.87,-2.02],void 0,[3,3,3]],[[2.75,-.44,-2.21],void 0,[3,3,3]],[[5.92,-.44,-2.18],void 0,[3,3,3]],[[9.13,-.44,-2.14],void 0,[3,3,3]],[[12.27,-.44,-2.1],void 0,[3,3,3]],[[15.07,-1.11,1.98],void 0,[3,3,3]],[[34.94,.58,-4.29],void 0,[2.44,1,2.54]],[[45.04,.58,-5.72],void 0,[2.44,1,2.54]],[[38.85,.58,.01],void 0,[2.44,1,2.54]],[[49.57,.58,2.4],void 0,[2.44,1,2.54]],[[58.55,.58,-9.28],void 0,[2.44,1,2.54]],[[71.9,.58,-1.62],void 0,[2.44,1,2.54]],[[61.49,.58,-1.74],void 0,[2.44,1,2.54]],[[55.29,-1.16,-1.7],void 0,[3,3,3]],[[58.35,-1.41,-1.99],void 0,[3,3,3]],[[82.06,1.24,2.5],void 0,[2,2,2]]],tree:[[[-3.89,-3.87,2.38],void 0,[20,4,20]],[[-1.29,.19,-1.99],void 0,[10,4,10]],[[10.51,-3.95,-1.49],void 0,[10,8,10]],[[6.33,.19,-1.73],void 0,[10,4,10]],[[9.53,.19,-6.08],void 0,[10,4,10]],[[9.3,.19,-2.36],void 0,[10,4,10]],[[12.56,.03,-1.46],void 0,[10,8,10]],[[13.79,.19,-3.9],void 0,[10,4,10]],[[16.76,.19,-9.07],void 0,[10,4,10]],[[16.06,.19,-3.03],void 0,[10,4,10]],[[24.79,.19,-2.7],void 0,[10,4,10]],[[19.98,.19,-3.29],void 0,[10,4,10]],[[30.83,.19,-1.45],void 0,[10,4,10]],[[33.48,.19,-8.42],void 0,[10,4,10]],[[37.64,.19,-1.22],void 0,[7.5,3,7.5]],[[41.67,-.32,-1.58],void 0,[10,4,10]],[[46.72,-.09,-1.53],void 0,[10,8,10]],[[52.76,.19,-2.09],void 0,[10,4,10]],[[56.99,.19,-2.05],void 0,[10,4,10]],[[83.13,.19,-1.66],void 0,[10,4,10]],[[61.02,.19,-9.33],void 0,[10,4,10]],[[60.33,.19,-3.3],void 0,[10,4,10]],[[64.51,.19,-2.93],void 0,[10,4,10]],[[69.06,.19,-2.97],void 0,[10,4,10]],[[70.36,.19,-8.64],void 0,[10,4,10]],[[79.32,.19,-3.25],void 0,[10,4,10]],[[77.74,.19,-8.68],void 0,[10,4,10]],[[43.48,.19,-9.07],void 0,[10,4,10]],[[90.68,.19,-2.38],void 0,[10,4,10]],[[19.14,-.33,2],void 0,[20,4,20]],[[34.71,-.33,-1.75],void 0,[10,4,10]],[[80.26,.19,2.87],void 0,[10,4,10]]],obstacle_branch:[[[10.12,-1.19,-.7],[.7,-.07,.07,.7],[.5,4,.5]],[[11.49,-.09,-.65],[.7,.06,-.06,.7],[.5,4,.5]],[[34.04,2.19,.62],[.71,-.05,.05,.71],[.5,4,.5]],[[35.14,2.92,.01],[.71,.01,-.01,.71],[.5,2,.5]],[[37.71,4.1,.04],[.5,.5,-.5,.5],[.5,4,.5]],[[41.55,5.42,-.25],[.5,.5,-.5,.5],[.5,4,.5]],[[46.82,6.49,0],[.5,.5,-.5,.5],[.5,6,.5]],[[54.12,-1.49,0],[.71,.01,-.01,.71],[.5,2,.5]],[[55.64,-.76,.49],[.7,.07,-.07,.7],[.5,2,.5]]],box:[[[12.82,-2.88,.16],void 0,[1.3,1.3,1.3]],[[44.07,1.01,0],void 0,[1.3,1.3,1.3]]],branch:[[[-1.53,2.56,-2.05],[.34,.62,-.34,.62],[.5,4,.5]],[[6.65,3.53,-1.49],[.54,.61,.19,.55],[.5,4,.5]]],monster:[[[68.3,-3.31,-3.5]]],pushable_branch:[[[48.27,7.05,0]],[[59.94,.7,1.77],[0,.66,0,.75]],[[62.77,.65,1.65],[0,.67,0,.74]],[[58.43,.7,1.77],[0,.71,0,.71]],[[61.14,.68,1.68],[0,.72,0,.69]]],end:[[[120,3,0],void 0,[1,10,1]]],crib:[[[121.6,.2,.5],[0,.38,0,-.92]]]},go={ground:Tt,bush:yt,tree:gt,obstacle_branch:function(t){return[b([M(),...Nt(t)],[M(void 0,void 0,[.5,1,.25]),Y(!1,34,0),Z(0)])]},box:pt,branch:Nt,monster:function(t){return[b([M([0,0,0],w([0,0,0,1],0,-90,0),[5,60,20]),q([0,0,1],null,"walk"),J(.5,.5),...L(t,[0,0,0,1],50)])]},pushable_branch:function(t){return[j(0),rt(16384),Z(1),Y(!0,36,6,[6,.5,.5]),b([M([0,0,0],w([0,0,0,1],0,0,90),[.5,6,.5]),...Nt(t)])]},end:function(t){return[B("exit"),Y(!1,2,1),wt(1,4)]},crib:function(t){return[b([M(),E({idle:{V:[{L:0,B:w([0,0,0,1],-25,0,0),St:I},{L:2,B:w([0,0,0,1],25,0,0),St:I}]}}),...$t(t)])]}},yo=Float32Array.from([-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,-.5]),wo=Float32Array.from([-1,0,0,0,-1,0,0,0,1,-1,0,0,0,0,1,0,1,0,-1,0,0,0,-1,0,0,0,-1,-1,0,0,0,0,-1,0,1,0,0,-1,0,0,0,1,1,0,0,0,0,1,0,1,0,1,0,0,0,-1,0,0,0,-1,1,0,0,0,0,-1,0,1,0,1,0,0]),xo=Float32Array.from([]),To=Float32Array.from([]),Ao=Uint16Array.from([16,5,22,5,11,22,1,12,7,12,18,7,2,4,13,4,15,13,14,17,20,17,23,20,19,21,8,21,10,8,6,9,0,9,3,0]),bo=Float32Array.from([0,-.5,-.5,0,.5,-.5,.354,-.5,-.354,.354,.5,-.354,.5,-.5,0,.5,.5,0,.354,-.5,.354,.354,.5,.354,-0,-.5,.5,-0,.5,.5,-.354,-.5,.354,-.354,.5,.354,-.5,-.5,-0,-.5,.5,-0,-.354,-.5,-.354,-.354,.5,-.354]),Fo=Float32Array.from([0,-.63,-.776,0,.63,-.776,.549,-.63,-.549,.549,.63,-.549,.776,-.63,0,.776,.63,0,.549,-.63,.549,.549,.63,.549,0,-.63,.776,0,.63,.776,-.549,-.63,.549,-.549,.63,.549,-.776,-.63,0,-.776,.63,0,-.549,-.63,-.549,-.549,.63,-.549]),Ro=Float32Array.from([]),Mo=Float32Array.from([]),zo=Uint16Array.from([14,10,6,6,2,14,14,12,10,10,8,6,6,4,2,2,0,14,0,1,14,1,15,14,14,15,12,15,13,12,5,9,13,13,1,5,5,7,9,9,11,13,13,15,1,1,3,5,12,13,10,13,11,10,10,11,8,11,9,8,8,9,6,9,7,6,6,7,4,7,5,4,4,5,2,5,3,2,2,3,0,3,1,0]),ko=Float32Array.from([-.009,.009,.001,0,-.422,.012,0,.405,.119,.008,.008,.001]),Co=Float32Array.from([-.001,-.138,.99,.01,.025,1,-.01,-.285,.959,0,-.125,.992]),Io=Float32Array.from([]),Eo=Float32Array.from([]),Ko=Uint16Array.from([3,1,0,2,3,0]),So=Float32Array.from([-.17,.016,0,0,0,.057,-0,0,-.071,.184,.022,-0]),Bo=Float32Array.from([.094,.996,0,-.014,1,0,-.014,1,0,-.119,.993,0]),Po=Float32Array.from([]),No=Float32Array.from([2,1,0,0,0,1,0,0,0,1,0,0,1,1,0,0]),$o=Uint16Array.from([2,3,1,0,2,1]),Vo=Float32Array.from([.147,.44,.021,.073,-0,-.008,.132,.234,-.28,.088,.409,-.55,.073,-.001,-.521,.103,.688,.168,.176,.893,.08,-.147,.44,.021,0,.482,-.037,0,.219,-.012,-.073,-0,-.008,-.132,.234,-.28,0,.219,-.53,-.088,.409,-.55,0,.432,-.585,-.073,-.001,-.521,-.103,.688,.168,0,.571,.373,-.176,.893,.08,0,.746,.168]),Do=Float32Array.from([.997,.009,.083,-.007,-.962,.275,.797,-.599,-.074,.688,.428,-.586,.035,-.971,-.235,.726,.191,.661,.417,.903,-.104,-.997,.009,.083,0,.785,-.62,0,-.59,.807,.007,-.962,.275,-.797,-.599,-.074,0,-.472,-.882,-.688,.428,-.586,0,.571,-.821,-.035,-.971,-.235,-.726,.191,.661,0,-.039,.999,-.417,.903,-.104,0,.932,.363]),Lo=Float32Array.from([]),Wo=Float32Array.from([2,.918,1,.082,2,1,0,0,4,.5,2,.5,4,.907,0,.093,4,1,0,0,1,.893,2,.107,1,1,0,0,3,.918,1,.082,1,1,0,0,2,.5,3,.5,3,1,0,0,5,.5,3,.5,0,1,0,0,5,.907,0,.093,0,1,0,0,5,1,0,0,1,.893,3,.107,1,1,0,0,1,1,0,0,1,1,0,0]),jo=Uint16Array.from([18,19,16,19,17,16,7,13,8,16,17,7,19,18,8,8,18,7,7,17,9,7,18,16,12,11,9,11,15,13,12,15,11,12,14,13,13,15,12,11,13,7,13,14,8,9,10,7,11,10,9,7,10,11,19,6,5,17,19,5,3,0,8,17,5,0,6,19,8,6,8,0,17,0,9,6,0,5,2,12,9,4,2,3,4,12,2,14,12,3,4,3,12,3,2,0,14,3,8,1,9,0,1,2,9,1,0,2]),Ho=Float32Array.from([-.111,.575,-.859,-0,.384,-.481,-0,.251,-.862,.131,.518,-.819,-.152,.634,-1.248,-.008,.196,-1.3,.216,.518,-1.191,-.247,.793,-1.762,-0,.141,-1.608,.242,.549,-1.756,-.208,.738,-2.194,-0,.234,-2.101,.167,.495,-2.202,-.076,.65,-2.622,-0,.376,-2.482,.137,.502,-2.539,-.038,.426,-2.917]),Xo=Float32Array.from([-.701,.652,.289,-.03,-.161,.986,-.097,-.964,.248,.848,.425,.317,-.708,.678,.198,-.131,-.98,.148,.94,.301,.159,-.662,.749,-.02,-.089,-.996,.005,.956,.294,-.017,-.643,.705,-.298,-.11,-.97,-.215,.976,.155,-.154,-.456,.779,-.431,-.203,-.949,-.242,.966,.102,-.237,-.139,-.245,-.96]),Oo=Float32Array.from([]),Uo=Float32Array.from([0,.933,1,.067,0,1,0,0,0,.946,1,.054,0,.953,1,.047,1,.942,2,.058,1,.877,2,.123,1,.97,2,.03,2,.858,3,.142,2,.911,3,.089,2,.932,3,.068,3,.917,4,.083,3,.937,4,.063,3,.945,4,.055,4,.983,3,.017,4,.917,3,.083,4,.956,3,.044,4,1,0,0]),Go=Uint16Array.from([16,15,13,16,14,15,16,13,14,13,15,10,15,12,10,15,14,12,14,11,12,14,13,11,13,10,11,12,11,9,11,8,9,11,10,8,10,7,8,8,7,5,7,4,5,7,9,4,9,6,4,10,12,7,12,9,7,6,5,3,5,2,3,5,4,2,4,0,2,4,6,0,6,3,0,9,8,6,8,5,6,1,0,3,1,3,2,2,0,1]),Yo=Float32Array.from([-.5,0,.5,.5,0,.5,-.5,0,-.5,.5,0,-.5]),qo=Float32Array.from([0,1,0,0,1,0,0,1,0,0,1,0]),Qo=Float32Array.from([]),Jo=Float32Array.from([]),Zo=Uint16Array.from([2,3,0,3,1,0]);const ti=8388609,ni=8388610;let oi,ii=[0,0,0],ei=[0,0,0],ri=[0,0,0];const ai=8388612,li=[0,0,0],si=[0,0,0],fi=8388624,ci=[[.5,.5,.5],[.5,.5,-.5],[-.5,.5,-.5],[-.5,.5,.5],[.5,-.5,.5],[.5,-.5,-.5],[-.5,-.5,-.5],[-.5,-.5,.5]],ui=8388672,di=8388736;let hi={u:1,ro:[{lo:[3,"lowpass",9,0,!1,!1,8,8,[["sine",8,1,1,3,8,!1,!1,8,8,8],[!1,8,2,2,2]]],ao:[48]}],io:.25},mi={u:1,ro:[{lo:[3,"lowpass",8,0,!1,!1,8,8,[["sine",8,1,1,3,8,!1,!1,8,8,8],[!1,8,1,2,3]]],ao:[48]}],io:.25},vi={u:1,ro:[{lo:[8,"bandpass",8,2,!1,!1,8,8,[["square",3,1,1,2,8,!1,!1,7,7,8],[!1,3,2,2,3]]],ao:[48]}],io:.25};const _i=[0,0];let pi=0;const gi=8389120,yi=8389632,wi=8396800;let xi=[0,0,0];const Ti=8404992,Ai=8421376,bi=[0,0,0,1],Fi=8390656;let Ri=[0,0,0],Mi=[0,0,0];const zi=8650752,ki=8650752,Ci=8650816;let Ii=[0,0,0];const Ei=2097152,Ki=8519680,Si=new Float32Array(96),Bi=8912896,Pi=9437184,Ni=4194304,$i=8388608,Vi=25165888;let Di,Li=new class extends class extends class{constructor(){this.So=0,this.Bo=0,this.po=window.innerWidth,this.yo=window.innerHeight,this.Hn=!0,this.co={Po:0,No:0},this.uo={Po:0,No:0},this.$o={},this.Vo=document.querySelector("main"),document.addEventListener("visibilitychange",(()=>document.hidden?this.Do():this.Lo())),this.Vo.addEventListener("contextmenu",(t=>t.preventDefault())),this.Vo.addEventListener("touchstart",(t=>{t.target===this.Vo&&t.preventDefault(),1===t.touches.length&&(this.$o={});for(let n=0;n<t.touches.length;n++)this.$o[t.touches[n].identifier]=n;for(let n=0;n<t.changedTouches.length;n++){let o=t.changedTouches[n],i=this.$o[o.identifier];this.co["Touch"+i]=1,this.co[`Touch${i}X`]=o.clientX,this.co[`Touch${i}Y`]=o.clientY,this.uo["Touch"+i]=1,this.uo[`Touch${i}X`]=0,this.uo[`Touch${i}Y`]=0}})),this.Vo.addEventListener("touchmove",(t=>{t.target===this.Vo&&t.preventDefault();for(let n=0;n<t.changedTouches.length;n++){let o=t.changedTouches[n],i=this.$o[o.identifier];this.uo[`Touch${i}X`]=o.clientX-this.co[`Touch${i}X`],this.uo[`Touch${i}Y`]=o.clientY-this.co[`Touch${i}Y`],this.co[`Touch${i}X`]=o.clientX,this.co[`Touch${i}Y`]=o.clientY}})),this.Vo.addEventListener("touchend",(t=>{t.target===this.Vo&&t.preventDefault();for(let n=0;n<t.changedTouches.length;n++){let o=this.$o[t.changedTouches[n].identifier];this.co["Touch"+o]=0,this.uo["Touch"+o]=-1}})),this.Vo.addEventListener("touchcancel",(t=>{for(let n=0;n<t.changedTouches.length;n++){let o=this.$o[t.changedTouches[n].identifier];this.co["Touch"+o]=0,this.uo["Touch"+o]=-1}})),window.addEventListener("keydown",(t=>{t.repeat||(this.co[t.code]=1,this.uo[t.code]=1)})),window.addEventListener("keyup",(t=>{this.co[t.code]=0,this.uo[t.code]=-1}))}Lo(){let t=0,n=performance.now(),o=i=>{let e=(i-n)/1e3;for(this.Wo(e),t+=e;t>=to;)t-=to,this.jo(to),this.Ho();this.Xo(e),this.Oo(e),n=i,this.So=requestAnimationFrame(o)};this.Do(),o(n)}Do(){cancelAnimationFrame(this.So),this.So=0}Wo(t){this.Bo=performance.now()}jo(t){}Xo(t){}Ho(){for(let t in this.uo)this.uo[t]=0}Oo(t){this.Hn=!1;let n=performance.now()-this.Bo;Qn&&(Qn.textContent=n.toFixed(1)),Jn&&(Jn.textContent=(1e3*t).toFixed(1)),Zn&&(Zn.textContent=(1/t).toFixed())}}{constructor(){super(),this.Uo=document.querySelector("#billboard"),this.do=this.Uo.getContext("2d"),this.Go=document.querySelector("#scene"),this.nt=this.Go.getContext("webgl2"),this.Audio=new AudioContext,this.nt.enable(2929),this.nt.enable(Hn)}}{constructor(){super(...arguments),this.o=new so,this.Yo=function(t,n=4){let o=Ht(t,"#version 300 es\n\nuniform mat4 pv;\nuniform mat4 world;\n\nin vec3 attr_position;\n\nvoid main() {\ngl_Position = pv * world * vec4(attr_position, 1.0);\n}\n","#version 300 es\n\nprecision mediump float;\n\nuniform vec4 color;\n\nout vec4 frag_color;\n\nvoid main() {\nfrag_color = color;\n}\n");return{xo:n,wo:o,et:{T:t.getUniformLocation(o,"pv"),o:t.getUniformLocation(o,"world"),Dn:t.getUniformLocation(o,"color"),it:t.getAttribLocation(o,"attr_position")}}}(this.nt,2),this.kn=function(t){let n=Ht(t,"#version 300 es\n\n\nuniform mat4 pv;\nuniform mat4 world;\nuniform mat4 self;\n\nin vec3 attr_position;\nin vec3 attr_normal;\n\nout vec4 vert_position;\nout vec3 vert_normal;\n\nvoid main() {\nvert_position = world * vec4(attr_position, 1.0);\nvert_normal = (vec4(attr_normal, 1.0) * self).xyz;\ngl_Position = pv * vert_position;\n}\n","#version 300 es\n\nprecision mediump float;\nprecision lowp sampler2DShadow;\n\n\nconst int MAX_LIGHTS = 8;\n\nuniform vec3 eye;\nuniform vec4 diffuse_color;\nuniform vec4 specular_color;\nuniform float shininess;\nuniform vec4 light_positions[MAX_LIGHTS];\nuniform vec4 light_details[MAX_LIGHTS];\nuniform mat4 shadow_space;\nuniform sampler2DShadow shadow_map;\nuniform vec4 fog_color;\nuniform float fog_distance;\n\nin vec4 vert_position;\nin vec3 vert_normal;\n\nout vec4 frag_color;\n\n\n\nfloat shadow_factor(vec4 world_pos, float min) {\nvec4 shadow_space_pos = shadow_space * world_pos;\nvec3 shadow_space_ndc = shadow_space_pos.xyz / shadow_space_pos.w;\n\nshadow_space_ndc = shadow_space_ndc * 0.5 + 0.5;\n\n\nshadow_space_ndc.z -= 0.001;\n\nreturn texture(shadow_map, shadow_space_ndc) * (1.0 - min) + min;\n}\n\nvoid main() {\nvec3 world_normal = normalize(vert_normal);\n\nvec3 view_dir = eye - vert_position.xyz;\nvec3 view_normal = normalize(view_dir);\n\n\nvec3 light_acc = diffuse_color.rgb * 0.1;\n\nfor (int i = 0; i < MAX_LIGHTS; i++) {\nif (light_positions[i].w == 0.0) {\nbreak;\n}\n\nvec3 light_color = light_details[i].rgb;\nfloat light_intensity = light_details[i].a;\n\nvec3 light_normal;\nif (light_positions[i].w == 1.0) {\n\nlight_normal = light_positions[i].xyz;\n} else {\nvec3 light_dir = light_positions[i].xyz - vert_position.xyz;\nfloat light_dist = length(light_dir);\nlight_normal = light_dir / light_dist;\n\nlight_intensity /= (light_dist * light_dist);\n}\n\nfloat diffuse_factor = dot(world_normal, light_normal);\nif (diffuse_factor > 0.0) {\n\nlight_acc += diffuse_color.rgb * diffuse_factor * light_color * light_intensity;\n\nif (shininess > 0.0) {\n\n\n\n\n\n\nvec3 h = normalize(light_normal + view_normal);\nfloat specular_angle = max(dot(h, world_normal), 0.0);\nfloat specular_factor = pow(specular_angle, shininess);\n\n\nlight_acc += specular_color.rgb * specular_factor * light_color * light_intensity;\n}\n}\n}\n\nvec3 shaded_rgb = light_acc * shadow_factor(vert_position, 0.5);\nfrag_color= vec4(shaded_rgb, 1.0);\n\nfloat eye_distance = length(view_dir);\nfloat fog_amount = clamp(0.0, 1.0, eye_distance / fog_distance);\nfrag_color = mix(frag_color, fog_color, smoothstep(0.0, 1.0, fog_amount));\n}\n");return{xo:4,wo:n,et:{T:t.getUniformLocation(n,"pv"),o:t.getUniformLocation(n,"world"),K:t.getUniformLocation(n,"self"),ht:t.getUniformLocation(n,"diffuse_color"),vt:t.getUniformLocation(n,"specular_color"),_t:t.getUniformLocation(n,"shininess"),Ao:t.getUniformLocation(n,"eye"),vo:t.getUniformLocation(n,"light_positions"),_o:t.getUniformLocation(n,"light_details"),zo:t.getUniformLocation(n,"shadow_space"),Mo:t.getUniformLocation(n,"shadow_map"),bo:t.getUniformLocation(n,"fog_color"),Fo:t.getUniformLocation(n,"fog_distance"),it:t.getAttribLocation(n,"attr_position"),at:t.getAttribLocation(n,"attr_normal")}}}(this.nt),this.Et=function(t){let n=Ht(t,"#version 300 es\n\nuniform mat4 pv;\nuniform mat4 world;\nuniform mat4 self;\nuniform mat4 bones[6];\n\nin vec3 attr_position;\nin vec3 attr_normal;\nin vec4 attr_weights;\n\nout vec4 vert_position;\nout vec3 vert_normal;\n\nmat4 world_weighted(vec4 weights) {\nreturn weights[1] * bones[int(weights[0])] + weights[3] * bones[int(weights[2])];\n}\n\nvoid main() {\nmat4 bone_world = world_weighted(attr_weights);\nvert_position = bone_world * vec4(attr_position, 1.0);\nvert_normal = normalize(mat3(bone_world) * attr_normal);\ngl_Position = pv * vert_position;\n}\n","#version 300 es\n\nprecision mediump float;\n\n\nconst int MAX_LIGHTS = 8;\n\nuniform vec3 eye;\nuniform vec4 diffuse_color;\nuniform vec4 specular_color;\nuniform float shininess;\nuniform vec4 light_positions[MAX_LIGHTS];\nuniform vec4 light_details[MAX_LIGHTS];\nuniform vec4 fog_color;\nuniform float fog_distance;\n\nin vec4 vert_position;\nin vec3 vert_normal;\n\nout vec4 frag_color;\n\nconst float bands = 2.0;\nfloat posterize(float factor) {\nreturn floor(factor * bands) / bands;\n}\n\nvoid main() {\nvec3 world_normal = normalize(vert_normal);\n\nvec3 view_dir = eye - vert_position.xyz;\nvec3 view_normal = normalize(view_dir);\n\n\nvec3 light_acc = diffuse_color.rgb * 0.5;\n\nfor (int i = 0; i < MAX_LIGHTS; i++) {\nif (light_positions[i].w == 0.0) {\nbreak;\n}\n\nvec3 light_color = light_details[i].rgb;\nfloat light_intensity = light_details[i].a;\n\nvec3 light_normal;\nif (light_positions[i].w == 1.0) {\n\nlight_normal = light_positions[i].xyz;\n} else {\nvec3 light_dir = light_positions[i].xyz - vert_position.xyz;\nfloat light_dist = length(light_dir);\nlight_normal = light_dir / light_dist;\n\nlight_intensity /= (light_dist * light_dist);\n}\n\nfloat diffuse_factor = dot(world_normal, light_normal);\nif (diffuse_factor > 0.0) {\n\nlight_acc += diffuse_color.rgb * light_color * posterize(diffuse_factor * light_intensity);\n\nif (shininess > 0.0) {\n\n\n\n\n\n\nvec3 h = normalize(light_normal + view_normal);\nfloat specular_angle = max(dot(h, world_normal), 0.0);\nfloat specular_factor = pow(specular_angle, shininess);\n\n\nlight_acc += specular_color.rgb * light_color * posterize(specular_factor * light_intensity);\n}\n}\n}\n\nfrag_color = vec4(light_acc, 1.0);\n\nfloat eye_distance = length(view_dir);\nfloat fog_amount = clamp(0.0, 1.0, eye_distance / fog_distance);\nfrag_color = mix(frag_color, fog_color, smoothstep(0.0, 1.0, fog_amount));\n}\n");return{xo:4,wo:n,et:{T:t.getUniformLocation(n,"pv"),o:t.getUniformLocation(n,"world"),K:t.getUniformLocation(n,"self"),ht:t.getUniformLocation(n,"diffuse_color"),vt:t.getUniformLocation(n,"specular_color"),_t:t.getUniformLocation(n,"shininess"),Ao:t.getUniformLocation(n,"eye"),vo:t.getUniformLocation(n,"light_positions"),_o:t.getUniformLocation(n,"light_details"),it:t.getAttribLocation(n,"attr_position"),at:t.getAttribLocation(n,"attr_normal"),bo:t.getUniformLocation(n,"fog_color"),Fo:t.getUniformLocation(n,"fog_distance"),ko:t.getUniformLocation(n,"bones"),yt:t.getAttribLocation(n,"attr_weights")}}}(this.nt),this.wt=function(t){let n=Ht(t,"#version 300 es\n\nuniform mat4 pv;\nuniform vec4 color_start;\nuniform vec4 color_end;\n\nuniform vec4 details;\n\n\nin vec4 attr_origin_age;\nin vec3 attr_direction;\n\nout vec4 vert_color;\n\nvoid main() {\n\nvec3 velocity = attr_direction * details.y;\ngl_Position = pv * vec4(attr_origin_age.xyz + velocity * attr_origin_age.w, 1.0);\n\n\nfloat t = attr_origin_age.w / details.x;\ngl_PointSize = mix(details.z, details.w, t);\nvert_color = mix(color_start, color_end, t);\n}\n","#version 300 es\n\nprecision mediump float;\n\nin vec4 vert_color;\n\nout vec4 frag_color;\n\nvoid main() {\nfrag_color = vert_color;\n}\n");return{xo:0,wo:n,et:{T:t.getUniformLocation(n,"pv"),Tt:t.getUniformLocation(n,"color_start"),At:t.getUniformLocation(n,"color_end"),Co:t.getUniformLocation(n,"details"),Io:t.getAttribLocation(n,"attr_origin_age"),fn:t.getAttribLocation(n,"attr_direction")}}}(this.nt),this.Ft=function(t){let n=Ht(t,"#version 300 es\n\n\nuniform mat4 pv;\nuniform mat4 world;\nuniform vec3 palette[16];\n\nuniform vec3 eye;\nuniform vec4 fog_color;\nuniform float fog_distance;\n\nin vec3 attr_position;\nin vec4 attr_offset;\nin vec4 attr_rotation;\n\nout vec4 vert_color;\n\nvoid main() {\nfloat x = attr_rotation.x;\nfloat y = attr_rotation.y;\nfloat z = attr_rotation.z;\nfloat w = attr_rotation.w;\n\nfloat x2 = x + x;\nfloat y2 = y + y;\nfloat z2 = z + z;\nfloat xx = x * x2;\nfloat yx = y * x2;\nfloat yy = y * y2;\nfloat zx = z * x2;\nfloat zy = z * y2;\nfloat zz = z * z2;\nfloat wx = w * x2;\nfloat wy = w * y2;\nfloat wz = w * z2;\n\nfloat m0 = 1.0 - yy - zz;\nfloat m1 = yx + wz;\nfloat m2 = zx - wy;\nfloat m3 = 0.0;\nfloat m4 = yx - wz;\nfloat m5 = 1.0 - xx - zz;\nfloat m6 = zy + wx;\nfloat m7 = 0.0;\nfloat m8 = zx + wy;\nfloat m9 = zy - wx;\nfloat m10 = 1.0 - xx - yy;\nfloat m11 = 0.0;\nfloat m12 = 0.0;\nfloat m13 = 0.0;\nfloat m14 = 0.0;\nfloat m15 = 1.0;\n\nmat4 rotation = mat4(\nm0, m1, m2, m3,\nm4, m5, m6, m7,\nm8, m9, m10, m11,\nm12, m13, m14, m15\n);\n\nvec4 world_position = world * rotation * vec4(attr_position + attr_offset.xyz, 1.0);\ngl_Position = pv * world_position;\n\n\nvec3 color = palette[int(attr_offset[3])];\nvert_color = vec4(color * 0.1, 1.0);\n\nfloat eye_distance = length(eye - world_position.xyz);\nfloat fog_amount = clamp(0.0, 1.0, eye_distance / fog_distance);\nvert_color = mix(vert_color, fog_color, smoothstep(0.0, 1.0, fog_amount));\n}\n\n","#version 300 es\n\nprecision mediump float;\n\nin vec4 vert_color;\nout vec4 frag_color;\n\nvoid main() {\nfrag_color = vert_color;\n}\n\n");return{xo:4,wo:n,et:{T:t.getUniformLocation(n,"pv"),o:t.getUniformLocation(n,"world"),kt:t.getUniformLocation(n,"palette"),Ao:t.getUniformLocation(n,"eye"),bo:t.getUniformLocation(n,"fog_color"),Fo:t.getUniformLocation(n,"fog_distance"),it:t.getAttribLocation(n,"attr_position"),Rt:t.getAttribLocation(n,"attr_offset"),Mt:t.getAttribLocation(n,"attr_rotation")}}}(this.nt),this.Pn=function(t){let n=t.createBuffer();t.bindBuffer(Wn,n),t.bufferData(Wn,So,Ln);let o=t.createBuffer();t.bindBuffer(Wn,o),t.bufferData(Wn,Bo,Ln);let i=t.createBuffer();t.bindBuffer(Wn,i),t.bufferData(Wn,Po,Ln);let e=t.createBuffer();t.bindBuffer(Wn,e),t.bufferData(Wn,No,Ln);let r=t.createBuffer();return t.bindBuffer(jn,r),t.bufferData(jn,$o,Ln),{ot:n,qo:So,rt:o,Qo:Bo,Jo:i,Zo:Po,gt:e,ti:No,lt:r,ni:$o,To:$o.length}}(this.nt),this.$n=function(t){let n=t.createBuffer();t.bindBuffer(Wn,n),t.bufferData(Wn,ko,Ln);let o=t.createBuffer();t.bindBuffer(Wn,o),t.bufferData(Wn,Co,Ln);let i=t.createBuffer();t.bindBuffer(Wn,i),t.bufferData(Wn,Io,Ln);let e=t.createBuffer();t.bindBuffer(Wn,e),t.bufferData(Wn,Eo,Ln);let r=t.createBuffer();return t.bindBuffer(jn,r),t.bufferData(jn,Ko,Ln),{ot:n,qo:ko,rt:o,Qo:Co,Jo:i,Zo:Io,gt:e,ti:Eo,lt:r,ni:Ko,To:Ko.length}}(this.nt),this.oi=function(t){let n=t.createBuffer();t.bindBuffer(Wn,n),t.bufferData(Wn,Yo,Ln);let o=t.createBuffer();t.bindBuffer(Wn,o),t.bufferData(Wn,qo,Ln);let i=t.createBuffer();t.bindBuffer(Wn,i),t.bufferData(Wn,Qo,Ln);let e=t.createBuffer();t.bindBuffer(Wn,e),t.bufferData(Wn,Jo,Ln);let r=t.createBuffer();return t.bindBuffer(jn,r),t.bufferData(jn,Zo,Ln),{ot:n,qo:Yo,rt:o,Qo:qo,Jo:i,Zo:Qo,gt:e,ti:Jo,lt:r,ni:Zo,To:Zo.length}}(this.nt),this.Bn=function(t){let n=t.createBuffer();t.bindBuffer(Wn,n),t.bufferData(Wn,yo,Ln);let o=t.createBuffer();t.bindBuffer(Wn,o),t.bufferData(Wn,wo,Ln);let i=t.createBuffer();t.bindBuffer(Wn,i),t.bufferData(Wn,xo,Ln);let e=t.createBuffer();t.bindBuffer(Wn,e),t.bufferData(Wn,To,Ln);let r=t.createBuffer();return t.bindBuffer(jn,r),t.bufferData(jn,Ao,Ln),{ot:n,qo:yo,rt:o,Qo:wo,Jo:i,Zo:xo,gt:e,ti:To,lt:r,ni:Ao,To:Ao.length}}(this.nt),this.Kt=function(t){let n=t.createBuffer();t.bindBuffer(Wn,n),t.bufferData(Wn,Vo,Ln);let o=t.createBuffer();t.bindBuffer(Wn,o),t.bufferData(Wn,Do,Ln);let i=t.createBuffer();t.bindBuffer(Wn,i),t.bufferData(Wn,Lo,Ln);let e=t.createBuffer();t.bindBuffer(Wn,e),t.bufferData(Wn,Wo,Ln);let r=t.createBuffer();return t.bindBuffer(jn,r),t.bufferData(jn,jo,Ln),{ot:n,qo:Vo,rt:o,Qo:Do,Jo:i,Zo:Lo,gt:e,ti:Wo,lt:r,ni:jo,To:jo.length}}(this.nt),this.Mn=function(t){let n=t.createBuffer();t.bindBuffer(Wn,n),t.bufferData(Wn,Ho,Ln);let o=t.createBuffer();t.bindBuffer(Wn,o),t.bufferData(Wn,Xo,Ln);let i=t.createBuffer();t.bindBuffer(Wn,i),t.bufferData(Wn,Oo,Ln);let e=t.createBuffer();t.bindBuffer(Wn,e),t.bufferData(Wn,Uo,Ln);let r=t.createBuffer();return t.bindBuffer(jn,r),t.bufferData(jn,Go,Ln),{ot:n,qo:Ho,rt:o,Qo:Xo,Jo:i,Zo:Oo,gt:e,ti:Uo,lt:r,ni:Go,To:Go.length}}(this.nt),this.Cn=function(t){let n=t.createBuffer();t.bindBuffer(Wn,n),t.bufferData(Wn,bo,Ln);let o=t.createBuffer();t.bindBuffer(Wn,o),t.bufferData(Wn,Fo,Ln);let i=t.createBuffer();t.bindBuffer(Wn,i),t.bufferData(Wn,Ro,Ln);let e=t.createBuffer();t.bindBuffer(Wn,e),t.bufferData(Wn,Mo,Ln);let r=t.createBuffer();return t.bindBuffer(jn,r),t.bufferData(jn,zo,Ln),{ot:n,qo:bo,rt:o,Qo:Fo,Jo:i,Zo:Ro,gt:e,ti:Mo,lt:r,ni:zo,To:zo.length}}(this.nt),this.vo=new Float32Array(32),this._o=new Float32Array(32),this.ii=[],this.Sn=2048,this.jn={Ro:jt(this.nt,2,2),Wn:jt(this.nt,this.Sn,this.Sn)},this.qn=Et,this.Xn=ut,this.Rn=0}jo(t){!function(t,n){-1===t.uo.Touch0&&(pi=0),0===t.co.Touch0&&(pi+=n),1===t.uo.Touch0&&(_i[0]=t.co.Touch0X,_i[1]=t.co.Touch0Y);let o=0,i=0;if(1===t.co.Touch0){let n=Math.min(t.po,t.yo)/4;o=(t.co.Touch0X-_i[0])/n,i=(t.co.Touch0Y-_i[1])/n}for(let n=0;n<t.o.i.length;n++)256==(256&t.o.i[n])&&ln(t,n,o,i)}(this,t),function(t,n){for(let n=0;n<t.o.i.length;n++)256==(256&t.o.i[n])&&an(t,n)}(this),function(t,n){for(let n of navigator.getGamepads())n&&(t.uo[`pad${n.index}_axis_1`]=n.axes[0],t.uo[`pad${n.index}_axis_2`]=n.axes[1],t.uo[`pad${n.index}_axis_3`]=n.axes[2],t.uo[`pad${n.index}_axis_4`]=n.axes[3]);for(let n=0;n<t.o.i.length;n++)33024==(33024&t.o.i[n])&&sn(t,n)}(this),function(t,n){for(let o=0;o<t.o.i.length;o++)(t.o.i[o]&zi)===zi&&gn(t,o,n)}(this,t),$n(this),function(t,n){for(let o=0;o<t.o.i.length;o++)(t.o.i[o]&ki)===ki&&yn(t,o,n)}(this,t),function(t,n){let o=[],i=[];for(let n=0;n<t.o.i.length;n++)if((t.o.i[n]&ui)===ui){let e=t.o.I[n],r=t.o.Jt[n];r.ln=[],r.Zt?(r.Zt=!1,tn(e.o,r)):r.tn?(tn(e.o,r),i.push(r)):o.push(r)}for(let t=0;t<i.length;t++)en(i[t],o,o.length),en(i[t],i,t)}(this),function(t,n){for(let n=0;n<t.o.i.length;n++)(t.o.i[n]&Ci)===Ci&&wn(t,n)}(this),$n(this),function(t,n){for(let n=0;n<t.o.i.length;n++)(t.o.i[n]&Vi)===Vi&&Dn(t,n)}(this)}Xo(t){!function(t,n){let o=[];for(let i=0;i<t.o.i.length;i++)if((t.o.i[i]&Ei)===Ei){if(xn(t.o,i))continue;let e=t.o.Ot[i];switch(e.u){case 0:e.On(i)&&o.push(i);break;case 1:e.Ut-=n,e.Ut<0&&o.push(i)}}for(let n of o){let o=t.o.Ot[n];o.Gt&&o.Gt(n),t.o.i[n]&=-2097153,0===t.o.i[n]&&t.o.C(n),delete t.o.Ot[n]}}(this,t),function(t,n){for(let n=0;n<t.o.i.length;n++)(t.o.i[n]&di)===di&&rn(t,n)}(this),function(t,n){for(let o=0;o<t.o.i.length;o++)(t.o.i[o]&ti)===ti&&Ot(t,o,n)}(this,t),function(t,n){for(let o=0;o<t.o.i.length;o++)(t.o.i[o]&Ai)===Ai&&mn(t,o,n)}(this,t),function(t,n){for(let n=0;n<t.o.i.length;n++)if((t.o.i[n]&Ti)===Ti){let o=t.o.I[n],i=t.o.Wt[n],e=t.o.I[i.R],r=a([0,0,0],e.o),s=l([0,0,0,0],e.o);p(o.S,o.S,r,i.jt),x(o.B,o.B,s,i.jt),o.N=!0}}(this),function(t,n){for(let o=0;o<t.o.i.length;o++)4096==(4096&t.o.i[o])&&dn(t,o,n)}(this,t),function(t,n){for(let n=0;n<t.o.i.length;n++)(t.o.i[n]&Bi)==Bi&&Bn(t,n)}(this),function(t,n){for(let o=0;o<t.o.i.length;o++)(t.o.i[o]&Ni)==Ni&&Nn(t,o,n)}(this,t),function(t,n){for(let o=0;o<t.o.i.length;o++)(t.o.i[o]&Pi)==Pi&&Pn(t,o,n)}(this,t),function(t,n){for(let o=0;o<t.o.i.length;o++)(t.o.i[o]&Fi)==Fi&&pn(t,o,n)}(this,t),$n(this),function(t,n){for(let n=0;n<t.o.i.length;n++)(t.o.i[n]&ni)===ni&&Ut(t,n)}(this),function(t,n){for(let o=0;o<t.o.i.length;o++)(t.o.i[o]&ai)===ai&&qt(t,o,n)}(this,t),function(t,n){t.po==window.innerWidth&&t.yo==window.innerHeight||(t.Hn=!0),t.Hn&&(t.po=t.Go.width=t.Uo.width=window.innerWidth,t.yo=t.Go.height=t.Uo.height=window.innerHeight)}(this),function(t,o){t.ii=[];for(let o=0;o<t.o.i.length;o++)if((t.o.i[o]&fi)===fi){let e=t.o.l[o],r=t.o.I[o],l=e.h;if(t.Hn)switch(l.u){case 0:Jt(l,0===e.u?t.po/t.yo:e.R.Jn/e.R.Zn);break;case 1:Zt(l)}n(e.g,r.K),i(e.T,l.h,e.g),a(e.A,r.o),t.ii.push(o)}}(this),function(t,n){let o=t.o.I[t.ii[1]].o[12];for(let n=0;n<t.o.i.length;n++)(t.o.i[n]&gi)==gi&&fn(t,n,o)}(this),function(t,n){t.vo.fill(0),t._o.fill(0);let o=0;for(let n=0;n<t.o.i.length;n++)(t.o.i[n]&wi)===wi&&hn(t,n,o++)}(this),function(t,n){var o,i,e;t.Sn!==t.jn.Wn.Jn&&(o=t.nt,e=t.Sn,(i=t.jn.Wn).Jn=t.Sn,i.Zn=e,Lt(o,i.no,i.Jn,i.Zn),Wt(o,i.oo,i.Jn,i.Zn));for(let n of t.ii){let o=t.o.l[n];switch(o.u){case 0:Tn(t,o);break;case 3:An(t,o)}}}(this),function(t,n){t.do.resetTransform(),t.do.clearRect(0,0,t.po,t.yo);let o=[0,0,0],i=t.o.l[t.ii[1]];if(i)for(let n=0;n<t.o.i.length;n++)if((t.o.i[n]&yi)==yi){if(a(o,t.o.I[n].o),v(o,o,i.T),o[2]<-1||o[2]>1)continue;t.do.setTransform(1,0,0,1,.5*(o[0]+1)*t.po,.5*(1-o[1])*t.yo);let e=t.o.Ko[n];switch(e.u){case 0:cn(t,e);break;case 2:un(t,e)}}}(this),function(t,n){let o=function(t){return t.Xn(t)}(t);o!==Di&&(t.Vo.innerHTML=Di=o)}(this)}};window.scenes=[Et,Kt,Pt,Vt],window.scenes[1](Li),Li.Lo(),window.$=Dt.bind(null,Li),window.game=Li}();
</script>
