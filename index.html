<!DOCTYPE html><meta charset=utf8><meta name=viewport content="width=device-width, user-scalable=0"><title>GoodLuck (opt)</title><style>body,html{margin:0;overflow:hidden}canvas,main{height:100vh;position:absolute;user-select:none;width:100vw}</style><canvas id=scene></canvas><canvas id=billboard></canvas><main></main><script>!function(){function t(t,n){let i=t.i.t();for(let o of n)o(t,i);return i}function n(...n){return(i,o)=>{let e=[];for(let o of n){let n=t(i,o);e.push(n)}i.i.o[o]|=32,i.i.l[o]={l:e}}}function*i(t,n,o){if((t.o[n]&o)===o&&(yield n),32&t.o[n])for(let e of t.l[n].l)yield*i(t,e,o)}function o(t,n){if(32&t.o[n])for(let i of t.l[n].l)o(t,i);t.h(n)}function e(t,n,i){switch(n){case 0:document.fullscreenElement?document.exitFullscreen():document.body.requestFullscreen();break;case 1:{let[n]=i;o(t.i,n),t.u++;break}case 2:t._++}}function r(t,n,i,o){return t.bindTexture(Jt,n),t.texImage2D(Jt,0,32856,i,o,0,6408,5121,null),t.texParameteri(Jt,10241,qt),t.texParameteri(Jt,10240,qt),n}function s(t,n,i,o){return t.bindTexture(Jt,n),t.texImage2D(Jt,0,33190,i,o,0,6402,5125,null),t.texParameteri(Jt,10241,qt),t.texParameteri(Jt,10240,qt),t.texParameteri(Jt,34892,34894),t.texParameteri(Jt,10242,33071),t.texParameteri(Jt,10243,33071),n}function l(t,n,i){let o={m:t.createFramebuffer(),g:n,p:i,v:r(t,t.createTexture(),n,i),M:s(t,t.createTexture(),n,i)};t.bindFramebuffer(Zt,o.m),t.framebufferTexture2D(Zt,36096,Jt,o.M,0),t.framebufferTexture2D(Zt,36064,Jt,o.v,0);let e=t.checkFramebufferStatus(Zt);if(36053!=e)throw Error(`Failed to set up the framebuffer (${e}).`);return o}function a(t,n,i){let o=t.createProgram();if(t.attachShader(o,c(t,35633,n)),t.attachShader(o,c(t,35632,i)),t.linkProgram(o),!t.getProgramParameter(o,35714))throw Error(t.getProgramInfoLog(o));return o}function c(t,n,i){let o=t.createShader(n);if(t.shaderSource(o,i),t.compileShader(o),!t.getShaderParameter(o,35713))throw Error(t.getShaderInfoLog(o));return o}function f(t,n,i){return Math.max(t,Math.min(n,i))}function h(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function u(t,n){let i=n[0],o=n[1],e=n[2],r=n[3],s=n[4],l=n[5],a=n[6],c=n[7],f=n[8],h=n[9],u=n[10],_=n[11],m=n[12],d=n[13],g=n[14],p=n[15],v=i*l-o*s,w=i*a-e*s,y=i*c-r*s,M=o*a-e*l,T=o*c-r*l,b=e*c-r*a,x=f*d-h*m,S=f*g-u*m,A=f*p-_*m,k=h*g-u*d,R=h*p-_*d,F=u*p-_*g,z=v*F-w*R+y*k+M*A-T*S+b*x;return z?(z=1/z,t[0]=(l*F-a*R+c*k)*z,t[1]=(e*R-o*F-r*k)*z,t[2]=(d*b-g*T+p*M)*z,t[3]=(u*T-h*b-_*M)*z,t[4]=(a*A-s*F-c*S)*z,t[5]=(i*F-e*A+r*S)*z,t[6]=(g*y-m*b-p*w)*z,t[7]=(f*b-u*y+_*w)*z,t[8]=(s*R-l*A+c*x)*z,t[9]=(o*A-i*R-r*x)*z,t[10]=(m*T-d*y+p*v)*z,t[11]=(h*y-f*T-_*v)*z,t[12]=(l*S-s*k-a*x)*z,t[13]=(i*k-o*S+e*x)*z,t[14]=(d*w-m*M-g*v)*z,t[15]=(f*M-h*w+u*v)*z,t):null}function _(t,n,i){let o=n[0],e=n[1],r=n[2],s=n[3],l=n[4],a=n[5],c=n[6],f=n[7],h=n[8],u=n[9],_=n[10],m=n[11],d=n[12],g=n[13],p=n[14],v=n[15],w=i[0],y=i[1],M=i[2],T=i[3];return t[0]=w*o+y*l+M*h+T*d,t[1]=w*e+y*a+M*u+T*g,t[2]=w*r+y*c+M*_+T*p,t[3]=w*s+y*f+M*m+T*v,w=i[4],y=i[5],M=i[6],T=i[7],t[4]=w*o+y*l+M*h+T*d,t[5]=w*e+y*a+M*u+T*g,t[6]=w*r+y*c+M*_+T*p,t[7]=w*s+y*f+M*m+T*v,w=i[8],y=i[9],M=i[10],T=i[11],t[8]=w*o+y*l+M*h+T*d,t[9]=w*e+y*a+M*u+T*g,t[10]=w*r+y*c+M*_+T*p,t[11]=w*s+y*f+M*m+T*v,w=i[12],y=i[13],M=i[14],T=i[15],t[12]=w*o+y*l+M*h+T*d,t[13]=w*e+y*a+M*u+T*g,t[14]=w*r+y*c+M*_+T*p,t[15]=w*s+y*f+M*m+T*v,t}function m(t,n,i,o,e){let r,s=1/Math.tan(n/2);return t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=e&&e!==1/0?(r=1/(o-e),t[10]=(e+o)*r,t[14]=2*e*o*r):(t[10]=-1,t[14]=-2*o),t}function d(t,n){return t[0]=n[8],t[1]=n[9],t[2]=n[10],b(t,t)}function g(t,n){return t[0]=n[12],t[1]=n[13],t[2]=n[14],t}function p(t,n){let i=function(t,n){let i=n[4],o=n[5],e=n[6],r=n[8],s=n[9],l=n[10];return t[0]=Math.hypot(n[0],n[1],n[2]),t[1]=Math.hypot(i,o,e),t[2]=Math.hypot(r,s,l),t}([0,0,0],n),o=1/i[0],e=1/i[1],r=1/i[2],s=n[0]*o,l=n[1]*e,a=n[2]*r,c=n[4]*o,f=n[5]*e,h=n[6]*r,u=n[8]*o,_=n[9]*e,m=n[10]*r,d=s+f+m,g=0;return d>0?(g=2*Math.sqrt(d+1),t[3]=.25*g,t[0]=(h-_)/g,t[1]=(u-a)/g,t[2]=(l-c)/g):s>f&&s>m?(g=2*Math.sqrt(1+s-f-m),t[3]=(h-_)/g,t[0]=.25*g,t[1]=(l+c)/g,t[2]=(u+a)/g):f>m?(g=2*Math.sqrt(1+f-s-m),t[3]=(u-a)/g,t[0]=(l+c)/g,t[1]=.25*g,t[2]=(h+_)/g):(g=2*Math.sqrt(1+m-s-f),t[3]=(l-c)/g,t[0]=(u+a)/g,t[1]=(h+_)/g,t[2]=.25*g),t}function v(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t}function w(t,n,i){return t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t}function y(t,n,i){return t[0]=n[0]-i[0],t[1]=n[1]-i[1],t[2]=n[2]-i[2],t}function M(t,n,i){return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t}function T(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t}function b(t,n){let i=n[0],o=n[1],e=n[2],r=i*i+o*o+e*e;return r>0&&(r=1/Math.sqrt(r)),t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t}function x(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function S(t,n,i){let o=n[0],e=n[1],r=n[2],s=i[3]*o+i[7]*e+i[11]*r+i[15];return s=s||1,t[0]=(i[0]*o+i[4]*e+i[8]*r+i[12])/s,t[1]=(i[1]*o+i[5]*e+i[9]*r+i[13])/s,t[2]=(i[2]*o+i[6]*e+i[10]*r+i[14])/s,t}function A(t,n,i){return y(t,S([0,0,0],n,i),g([0,0,0],i))}function k(t,n,i,o){let e=n[0],r=n[1],s=n[2];return t[0]=e+o*(i[0]-e),t[1]=r+o*(i[1]-r),t[2]=s+o*(i[2]-s),t}function R(t,n,i){let o=n[0],e=n[1],r=n[2],s=n[3],l=i[0],a=i[1],c=i[2],f=i[3];return t[0]=o*f+s*l+e*c-r*a,t[1]=e*f+s*a+r*l-o*c,t[2]=r*f+s*c+o*a-e*l,t[3]=s*f-o*l-e*a-r*c,t}function F(t,n,i,o){let e=Math.sin(n/2*pn),r=Math.cos(n/2*pn),s=Math.sin(i/2*pn),l=Math.cos(i/2*pn),a=Math.sin(o/2*pn),c=Math.cos(o/2*pn);return t[0]=e*l*c+r*s*a,t[1]=r*s*c-e*l*a,t[2]=r*l*a-e*s*c,t[3]=r*l*c+e*s*a,t}function z(t){return 57.29577951308232*Math.asin(-f(-1,1,2*(t[1]*t[2]-t[3]*t[0])))}function P(t,n,i){let o=i/2;return t[0]=Math.sin(o)*n[0],t[1]=Math.sin(o)*n[1],t[2]=Math.sin(o)*n[2],t[3]=Math.cos(o),t}function C(t,n,i,o){let e,r,s,l,a,c=n[0],f=n[1],h=n[2],u=n[3],_=i[0],m=i[1],d=i[2],g=i[3];return r=c*_+f*m+h*d+u*g,r<0&&(r=-r,_=-_,m=-m,d=-d,g=-g),1-r>1e-6?(e=Math.acos(r),s=Math.sin(e),l=Math.sin((1-o)*e)/s,a=Math.sin(o*e)/s):(l=1-o,a=o),t[0]=l*c+a*_,t[1]=l*f+a*m,t[2]=l*h+a*d,t[3]=l*u+a*g,t}function L(t,n,i){let o=t.i.T[n],e=t.i.S[n];if(e.A){let t=e.k[e.A];t&&t!==e.R&&(0===e.R.F?e.R=t:1&e.R.P&&(e.R.F=0,e.R=t)),e.A=void 0}let r=null,s=null;for(let t of e.R.C){if(e.R.F<t.L){s=t;break}r=t}if(r&&s){let t=(e.R.F-r.L)/(s.L-r.L);s.I&&(t=s.I(t)),r.K&&s.K&&(k(o.K,r.K,s.K,t),o.X=!0),r.$&&s.$&&(C(o.$,r.$,s.$,t),o.X=!0),r.D&&s.D&&(k(o.D,r.D,s.D,t),o.X=!0)}let l=e.R.F+i;if(l<e.R.H)e.R.F=l;else{if(e.R.F=0,4&e.R.P)for(let t of e.R.C.reverse())t.L=e.R.H-t.L;2&e.R.P||(e.R=e.k.idle)}}function I(t,n){let i=t.i.T[n];var o,e;g(Mn,i.i),d(Tn,i.i),(o=bn)[0]=(e=i.i)[4],o[1]=e[5],o[2]=e[6],b(o,o);let r=t.Audio.listener;r.positionX?(r.positionX.value=Mn[0],r.positionY.value=Mn[1],r.positionZ.value=Mn[2],r.forwardX.value=Tn[0],r.forwardY.value=Tn[1],r.forwardZ.value=Tn[2],r.upX.value=bn[0],r.upY.value=bn[1],r.upZ.value=bn[2]):(r.setPosition(...Mn),r.setOrientation(...Tn,...bn))}function K(t,n,i,o,e){let r=t.currentTime+e,s=0;n&&n.connect(t.destination);let l,a,c=t.createGain();if(c.gain.value=(i[0]/9)**3,i[5]&&(a=t.createOscillator(),a.type=i[5],a.frequency.value=(i[7]/3)**3,l=t.createGain(),l.gain.value=(i[6]+3)**3,a.connect(l)),i[1]){let o=t.createBiquadFilter();o.type=i[1],o.frequency.value=2**i[2],o.Q.value=i[3]**1.5,l&&i[4]&&l.connect(o.detune),c.connect(o),o.connect(n||t.destination)}else c.connect(n||t.destination);for(let n of i[8]){let i=t.createGain();i.connect(c);let e=(n[1]/9)**3,a=(n[2]/9)**3,f=(n[3]/9)**3,h=a+f+(n[4]/6)**3;if(i.gain.setValueAtTime(0,r),i.gain.linearRampToValueAtTime(e,r+a),i.gain.setValueAtTime(e,r+a+f),i.gain.exponentialRampToValueAtTime(1e-5,r+h),n[0]){let e=t.createOscillator();e.type=n[0],e.connect(i),e.detune.value=3*(n[5]-7.5)**3,l&&n[6]&&l.connect(e.detune);let s=440*2**((o-69)/12);if(n[7]){let t=(n[8]/9)**3,i=(n[9]/9)**3,o=(n[10]/6)**3;e.frequency.linearRampToValueAtTime(0,r),e.frequency.linearRampToValueAtTime(s,r+t),e.frequency.setValueAtTime(s,r+t+i),e.frequency.exponentialRampToValueAtTime(1e-5,r+t+i+o)}else e.frequency.setValueAtTime(s,r);e.start(r),e.stop(r+h)}else{let n=t.createBufferSource();n.buffer=E(t),n.loop=!0,n.connect(i),n.start(r),n.stop(r+h)}h>s&&(s=h)}a&&(a.start(r),a.stop(r+s))}function E(t){if(!yn){yn=t.createBuffer(1,2*t.sampleRate,t.sampleRate);let n=yn.getChannelData(0);for(let t=0;t<n.length;t++)n[t]=2*Math.random()-1}return yn}function X(t,n,i){let o=t.i.V[n],e=t.i.T[n];if(o.R&&(o.F+=i,o.F>o.R.G?o.R=void 0:o.W&&$(o.W,e)),o.A&&!o.R){switch(o.A.B){case 0:!function(t,n,i){let o=t.createBufferSource();o.buffer=i.j,n?(o.connect(n),n.connect(t.destination)):o.connect(t.destination),o.start()}(t.Audio,o.W,o.A);break;case 1:!function(t,n,i){let o=60/(i.N||120)/4;for(let e of i.Y)for(let i=0;i<e.U.length;i++)e.U[i]&&K(t,n,e.O,e.U[i],i*o)}(t.Audio,o.W,o.A)}o.R=o.A,o.F=0,o.W&&$(o.W,e)}o.A=o.q}function $(t,n){g(Sn,n.i),d(An,n.i),t.positionX?(t.positionX.value=Sn[0],t.positionY.value=Sn[1],t.positionZ.value=Sn[2],t.orientationX.value=An[0],t.orientationY.value=An[1],t.orientationZ.value=An[2]):(t.setPosition(...Sn),t.setOrientation(...An))}function D(t,n){n>1?(m(t.J,t.Z,n,t.tt,t.nt),u(t.it,t.J)):(m(t.J,t.Z/n,n,t.tt,t.nt),u(t.it,t.J))}function H(t){!function(t,n,i,o,e,r,s){let l=1/(e-i),a=1/(o-n),c=1/(r-s);t[0]=-2*l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+i)*l,t[13]=(n+o)*a,t[14]=(s+r)*c,t[15]=1}(t.J,t.ot,t.ot,-t.ot,-t.ot,t.tt,t.nt),u(t.it,t.J)}function V(t,n){let i,o,e,r,s,l;g(n.et,t),i=r=n.et[0],o=s=n.et[1],e=l=n.et[2];let a=[0,0,0];for(let c=0;c<8;c++){let f=Rn[c];a[0]=f[0]*n.rt[0],a[1]=f[1]*n.rt[1],a[2]=f[2]*n.rt[2],S(a,a,t),a[0]<i&&(i=a[0]),a[0]>r&&(r=a[0]),a[1]<o&&(o=a[1]),a[1]>s&&(s=a[1]),a[2]<e&&(e=a[2]),a[2]>l&&(l=a[2])}n.st=[i,o,e],n.lt=[r,s,l],n.at[0]=(r-i)/2,n.at[1]=(s-o)/2,n.at[2]=(l-e)/2}function G(t,n){let i=t.et[0]-n.et[0],o=t.at[0]+n.at[0]-Math.abs(i),e=t.et[1]-n.et[1],r=t.at[1]+n.at[1]-Math.abs(e),s=t.et[2]-n.et[2],l=t.at[2]+n.at[2]-Math.abs(s);return o<r&&o<l?[o*Math.sign(i),0,0]:r<l?[0,r*Math.sign(e),0]:[0,0,l*Math.sign(s)]}function W(t,n){return t.st[0]<n.lt[0]&&t.lt[0]>n.st[0]&&t.st[1]<n.lt[1]&&t.lt[1]>n.st[1]&&t.st[2]<n.lt[2]&&t.lt[2]>n.st[2]}function B(t,n,i){for(let o=0;o<i;o++){let i=n[o],e=t.o&i.ct,r=i.o&t.ct;if((e||r)&&W(t,i)){let n=G(t,i);e&&t.ft.push({ht:i.Entity,ut:n}),r&&i.ft.push({ht:t.Entity,ut:T([0,0,0],n)})}}}function j(t,n){let i=t.i._t[n],o=t.i.dt[n];i.gt&&o.vt.push(i.gt.slice()),i.$&&o.wt.push(i.$.slice())}function N(t,n){let i=t.i.yt[n];if(i.dt){let i=t.i.dt[n];t.Mt.KeyW&&i.vt.push([0,0,1]),t.Mt.KeyA&&i.vt.push([1,0,0]),t.Mt.KeyS&&i.vt.push([0,0,-1]),t.Mt.KeyD&&i.vt.push([-1,0,0])}if(i.Tt){let i=t.i.dt[n];t.Mt.ArrowLeft&&i.wt.push([0,1,0,0]),t.Mt.ArrowRight&&i.wt.push([0,-1,0,0])}if(i.bt){let o=t.i.dt[n],e=z(t.i.T[n].$);t.Mt.ArrowUp&&e>i.xt&&o.St.push([-1,0,0,0]),t.Mt.ArrowDown&&e<i.At&&o.St.push([1,0,0,0])}}function Y(t,n){let i=t.i.yt[n],o=t.i.T[n];if(i.Tt&&t.kt.MouseX&&(P(In,Ln,-t.kt.MouseX*i.Tt*pn),R(o.$,In,o.$),o.X=!0),i.bt&&t.kt.MouseY){let n=z(o.$),e=f(i.xt-n,i.At-n,t.kt.MouseY*i.bt);P(In,Cn,e*pn),R(o.$,o.$,In),o.X=!0}}function U(t,n){let i=t.i.T[n],o=t.i.yt[n],e=t.i.dt[n];if(o.dt&&1===t.Mt.Touch0){let n=Math.min(t.Rt,t.Ft)/4,i=(t.Mt.Touch0X-Xn[0])/n,o=(t.Mt.Touch0Y-Xn[1])/n;Math.abs(i)>.01&&e.vt.push([f(-1,1,-i),0,0]),Math.abs(o)>.01&&e.vt.push([0,0,f(-1,1,-o)])}if(o.Tt&&t.kt.Touch1X&&(P($n,Kn,-t.kt.Touch1X*o.Tt*10*pn),R(i.$,$n,i.$),i.X=!0),o.bt&&t.kt.Touch1Y){let n=z(i.$),e=f(o.xt-n,o.At-n,t.kt.Touch1Y*o.bt*10);P($n,En,e*pn),R(i.$,i.$,$n),i.X=!0}}function O(t,n){let i=t.i.yt[n];if(i.dt){let i=t.i.dt[n];Math.abs(t.kt.pad0_axis_1)>Vn&&i.vt.push([-t.kt.pad0_axis_1,0,0]),Math.abs(t.kt.pad0_axis_2)>Vn&&i.vt.push([0,0,-t.kt.pad0_axis_2])}if(i.Tt&&Math.abs(t.kt.pad0_axis_3)>Vn&&t.i.dt[n].wt.push(P([0,0,0,0],Dn,-t.kt.pad0_axis_3*Math.PI)),i.bt&&Math.abs(t.kt.pad0_axis_4)>Vn){let o=t.i.dt[n],e=t.kt.pad0_axis_4*Math.PI,r=z(t.i.T[n].$);(e<0&&r>i.xt||e>0&&r<i.At)&&o.St.push(P([0,0,0,0],Hn,e))}}function q(t,n){t.zt.textAlign="center",t.zt.font=n.Pt,t.zt.fillStyle=n.Ct,t.zt.fillText(n.Text,0,0)}function J(t,n){t.zt.strokeStyle=n.Lt,t.zt.strokeRect(-n.rt/2,-n.rt/2,n.rt,n.rt)}function Q(t,n,i){let r=t.i.It[n];r.Kt-=i,r.Kt<0&&(r.Et&&e(t,r.Et,n),o(t.i,n))}function Z(t,n,i){let o=t.i.Xt[n];g(Bn,t.i.T[n].i),1===o.B&&b(Bn,Bn),t.$t[4*i+0]=Bn[0],t.$t[4*i+1]=Bn[1],t.$t[4*i+2]=Bn[2],t.$t[4*i+3]=o.B,t.Dt[4*i+0]=o.Lt[0],t.Dt[4*i+1]=o.Lt[1],t.Dt[4*i+2]=o.Lt[2],t.Dt[4*i+3]=o.Ht}function tt(t,n,i){let o=t.i.T[n],e=t.i.dt[n];if(e.vt.length){let n=e.vt.reduce(nt),r=Math.min(1,function(t){return Math.hypot(t[0],t[1],t[2])}(n));A(n,n,o.i),void 0!==o.Vt&&A(n,n,t.i.T[o.Vt].Gt),b(n,n),M(n,n,r*e.Wt*i),w(o.K,o.K,n),o.X=!0,e.vt=[]}if(e.wt.length){let t=e.wt.reduce(it);C(t,Yn,t,Math.min(1,e.Bt/Math.PI*i)),R(o.$,t,o.$),o.X=!0,e.wt=[]}if(e.St.length){let t=e.St.reduce(it);C(t,Yn,t,Math.min(1,e.Bt/Math.PI*i)),R(o.$,o.$,t),o.X=!0,e.St=[]}}function nt(t,n){return w(t,t,n)}function it(t,n){return R(t,t,n)}function ot(t,n,i){let o=t.i.T[n],e=t.i.jt[n];if(1===e.B){v(e.Nt,e.Yt),M(e.Ut,e.Ut,i),w(e.Nt,e.Nt,e.Ut),e.Nt[1]+=-9.81*i;let t=[0,0,0];M(t,e.Nt,i),w(o.K,o.K,t),o.X=!0,(r=e.Ut)[0]=0,r[1]=0,r[2]=0}var r}function et(t,n,i){let o=t.i.jt[n];if(2===o.B){let e=[0,0,0];g(e,t.i.T[n].i);let r=[0,0,0];y(r,e,o.Ot),M(o.Nt,r,1/i),v(o.Ot,e)}}function rt(t,n){let i=t.i.T[n],o=t.i.qt[n],e=t.i.jt[n];if(1===e.B){let n=!1;for(let r=0;r<o.ft.length;r++){let s=o.ft[r];if(65536&t.i.o[s.ht]){n=!0,w(i.K,i.K,s.ut),i.X=!0;let o=t.i.jt[s.ht];switch(o.B){case 0:b(Jn,s.ut),M(Jn,Jn,-2*x(e.Nt,Jn)),w(e.Yt,e.Nt,Jn);break;case 1:case 2:v(e.Yt,o.Nt)}M(e.Yt,e.Yt,e.Jt),s.ut[1]>0&&e.Yt[1]<1&&(e.Yt[1]=0)}}n||v(e.Yt,e.Nt)}}function st(t,n){if(32&t.o[n]){let i=t.l[n];for(let n of i.l)if(524288&t.o[n])return!0}return!1}function lt(t,n){t.Qt.bindFramebuffer(Zt,n.Zt.m),t.Qt.viewport(0,0,n.Zt.g,n.Zt.p),t.Qt.clearColor(...n.tn),t.Qt.clear(16640),t.Qt.useProgram(t.on.nn),t.Qt.uniformMatrix4fv(t.on.rn.en,!1,n.en);let i=null;for(let n=0;n<t.i.o.length;n++)if((t.i.o[n]&Zn)===Zn){let o=t.i.T[n],e=t.i.sn[n];switch(e.ln!==i&&(i=e.ln,t.Qt.frontFace(e.ln)),t.Qt.uniformMatrix4fv(t.on.rn.i,!1,o.i),e.B){case 8:break;default:t.Qt.bindVertexArray(e.an),t.Qt.drawElements(t.on.cn,e.hn.fn,tn,0),t.Qt.bindVertexArray(null)}}}function at(t,n){t.Qt.bindFramebuffer(Zt,null),t.Qt.viewport(0,0,t.Rt,t.Ft),t.Qt.clearColor(...n.tn),t.Qt.clear(16640),ft(t,n)}function ct(t,n){t.Qt.bindFramebuffer(Zt,n.Zt.m),t.Qt.viewport(0,0,n.Zt.g,n.Zt.p),t.Qt.clearColor(...n.tn),t.Qt.clear(16640),ft(t,n,n.Zt.un)}function ft(t,n,i){let o=null,e=null;for(let r=0;r<t.i.o.length;r++)if((t.i.o[r]&ti)===ti){let s=t.i.T[r],l=t.i.sn[r];if(l._n!==o)switch(o=l._n,l.B){case 0:ht(t,l._n,n);break;case 1:_t(t,l._n,n);break;case 5:dt(t,l._n,n);break;case 6:pt(t,l._n,n);break;case 8:wt(t,l._n,n);break;case 7:Mt(t,l._n,n);break;case 2:bt(t,l._n,n);break;case 3:St(t,l._n,n)}switch(l.ln!==e&&(e=l.ln,t.Qt.frontFace(l.ln)),l.B){case 0:ut(t,s,l);break;case 1:mt(t,s,l);break;case 5:l.mn!==i&&gt(t,s,l);break;case 6:l.mn!==i&&vt(t,s,l);break;case 8:yt(t,s,l);break;case 7:Tt(t,s,l);break;case 2:xt(t,s,l);break;case 3:At(t,r,s,l)}}}function ht(t,n,i){t.Qt.useProgram(n.nn),t.Qt.uniformMatrix4fv(n.rn.en,!1,i.en)}function ut(t,n,i){t.Qt.uniformMatrix4fv(i._n.rn.i,!1,n.i),t.Qt.uniform4fv(i._n.rn.Lt,i.Lt),t.Qt.bindVertexArray(i.an),t.Qt.drawElements(i._n.cn,i.hn.fn,tn,0),t.Qt.bindVertexArray(null)}function _t(t,n,i){t.Qt.useProgram(n.nn),t.Qt.uniformMatrix4fv(n.rn.en,!1,i.en),t.Qt.uniform3fv(n.rn.dn,i.gn),t.Qt.uniform4fv(n.rn.$t,t.$t),t.Qt.uniform4fv(n.rn.Dt,t.Dt)}function mt(t,n,i){t.Qt.uniformMatrix4fv(i._n.rn.i,!1,n.i),t.Qt.uniformMatrix4fv(i._n.rn.Gt,!1,n.Gt),t.Qt.uniform4fv(i._n.rn.pn,i.pn),t.Qt.uniform4fv(i._n.rn.vn,i.vn),t.Qt.uniform1f(i._n.rn.wn,i.wn),t.Qt.bindVertexArray(i.an),t.Qt.drawElements(i._n.cn,i.hn.fn,tn,0),t.Qt.bindVertexArray(null)}function dt(t,n,i){t.Qt.useProgram(n.nn),t.Qt.uniformMatrix4fv(n.rn.en,!1,i.en)}function gt(t,n,i){t.Qt.uniformMatrix4fv(i._n.rn.i,!1,n.i),t.Qt.activeTexture(Qt),t.Qt.bindTexture(Jt,i.mn),t.Qt.uniform1i(i._n.rn.yn,0),t.Qt.uniform4fv(i._n.rn.Lt,i.Lt),t.Qt.bindVertexArray(i.an),t.Qt.drawElements(i._n.cn,i.hn.fn,tn,0),t.Qt.bindVertexArray(null)}function pt(t,n,i){t.Qt.useProgram(n.nn),t.Qt.uniformMatrix4fv(n.rn.en,!1,i.en),t.Qt.uniform3fv(n.rn.dn,i.gn),t.Qt.uniform4fv(n.rn.$t,t.$t),t.Qt.uniform4fv(n.rn.Dt,t.Dt)}function vt(t,n,i){t.Qt.uniformMatrix4fv(i._n.rn.i,!1,n.i),t.Qt.uniformMatrix4fv(i._n.rn.Gt,!1,n.Gt),t.Qt.uniform4fv(i._n.rn.pn,i.pn),t.Qt.uniform4fv(i._n.rn.vn,i.vn),t.Qt.uniform1f(i._n.rn.wn,i.wn),t.Qt.activeTexture(Qt),t.Qt.bindTexture(Jt,i.mn),t.Qt.uniform1i(i._n.rn.Mn,0),t.Qt.bindVertexArray(i.an),t.Qt.drawElements(i._n.cn,i.hn.fn,tn,0),t.Qt.bindVertexArray(null)}function wt(t,n,i){t.Qt.useProgram(n.nn),t.Qt.uniformMatrix4fv(n.rn.en,!1,i.en)}function yt(t,n,i){t.Qt.uniformMatrix4fv(i._n.rn.i,!1,n.i),t.Qt.uniform4fv(i._n.rn.Lt,i.Lt),t.Qt.bindBuffer(Ut,i.Tn),t.Qt.enableVertexAttribArray(i._n.rn.bn),t.Qt.vertexAttribPointer(i._n.rn.bn,3,nn,!1,0,0),t.Qt.drawArrays(i._n.cn,0,i.fn)}function Mt(t,n,i){t.Qt.useProgram(n.nn),t.Qt.uniformMatrix4fv(n.rn.en,!1,i.en),t.Qt.uniform3fv(n.rn.dn,i.gn),t.Qt.uniform4fv(n.rn.$t,t.$t),t.Qt.uniform4fv(n.rn.Dt,t.Dt)}function Tt(t,n,i){t.Qt.uniformMatrix4fv(i._n.rn.i,!1,n.i),t.Qt.uniformMatrix4fv(i._n.rn.Gt,!1,n.Gt),t.Qt.uniform4fv(i._n.rn.pn,i.pn),t.Qt.activeTexture(33985),t.Qt.bindTexture(Jt,i.Mn),t.Qt.uniform1i(i._n.rn.Mn,1),t.Qt.activeTexture(33986),t.Qt.bindTexture(Jt,i.xn),t.Qt.uniform1i(i._n.rn.xn,2),t.Qt.activeTexture(33987),t.Qt.bindTexture(Jt,i.Sn),t.Qt.uniform1i(i._n.rn.Sn,3),t.Qt.bindVertexArray(i.an),t.Qt.drawElements(i._n.cn,i.hn.fn,tn,0),t.Qt.bindVertexArray(null)}function bt(t,n,i){t.Qt.useProgram(n.nn),t.Qt.uniformMatrix4fv(n.rn.en,!1,i.en),t.Qt.uniform3fv(n.rn.dn,i.gn),t.Qt.uniform4fv(n.rn.$t,t.$t),t.Qt.uniform4fv(n.rn.Dt,t.Dt),t.Qt.activeTexture(Qt),t.Qt.bindTexture(Jt,t.kn.An.M),t.Qt.uniform1i(n.rn.Rn,0);let o=function(t,n){for(let n=0;n<t.o.length;n++)if(2064==(2064&t.o[n]))return n}(t.i);o&&t.Qt.uniformMatrix4fv(n.rn.Fn,!1,t.i.zn[o].en)}function xt(t,n,i){t.Qt.uniformMatrix4fv(i._n.rn.i,!1,n.i),t.Qt.uniformMatrix4fv(i._n.rn.Gt,!1,n.Gt),t.Qt.uniform4fv(i._n.rn.pn,i.pn),t.Qt.uniform4fv(i._n.rn.vn,i.vn),t.Qt.uniform1f(i._n.rn.wn,i.wn),t.Qt.bindVertexArray(i.an),t.Qt.drawElements(i._n.cn,i.hn.fn,tn,0),t.Qt.bindVertexArray(null)}function St(t,n,i){t.Qt.useProgram(n.nn),t.Qt.uniformMatrix4fv(n.rn.en,!1,i.en),t.Qt.uniform3fv(n.rn.dn,i.gn),t.Qt.uniform4fv(n.rn.$t,t.$t),t.Qt.uniform4fv(n.rn.Dt,t.Dt)}function At(t,n,o,e){t.Qt.uniformMatrix4fv(e._n.rn.i,!1,o.i),t.Qt.uniformMatrix4fv(e._n.rn.Gt,!1,o.Gt),t.Qt.uniform4fv(e._n.rn.pn,e.pn),t.Qt.uniform4fv(e._n.rn.vn,e.vn),t.Qt.uniform1f(e._n.rn.wn,e.wn);for(let o of i(t.i,n,2097160)){let n=t.i.T[o],i=t.i.Pn[o];_(ni.subarray(16*i.Cn),n.i,i.Ln)}t.Qt.uniformMatrix4fv(e._n.rn.In,!1,ni),t.Qt.bindVertexArray(e.an),t.Qt.drawElements(e._n.cn,e.hn.fn,tn,0),t.Qt.bindVertexArray(null)}function kt(t,n){let i=t.i.Kn[n],o=t.i.T[n];o.K=[Math.random()-.5,Math.random()-.5,Math.random()-.5],M(o.K,o.K,2*i.En),o.X=!0}function Rt(t=[0,0,0],n=[0,0,0,1],i=[1,1,1]){return(o,e)=>{o.i.o[e]|=2097152,o.i.T[e]={i:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Gt:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],K:t,$:n,D:i,X:!0}}}function Ft(n,i,o){let e=n.i.Xn[i];if(e.$n+=o,e.$n>e.Dn){e.$n=0;let o=n.i.T[i],r=[0,0,0];g(r,o.i);let s=[0,0,0,0];p(s,o.i),t(n,[...e.Hn(n),Rt(r,s)])}}function zt(t,n,i){let o=t.i.Vn[n];o.$n+=i,o.$n>o.Gn&&(o.$n=0,o.Wn?(o.Wn=!1,t.i.o[n]&=~o.Bn):(o.Wn=!0,t.i.o[n]|=o.Bn))}function Pt(t,n){for(let n=0;n<t.i.o.length;n++)if((t.i.o[n]&ri)===ri){let i=t.i.T[n];i.X&&Ct(t.i,n,i)}}function Ct(t,n,i){if(i.X=!1,function(t,n,i,o){let e=n[0],r=n[1],s=n[2],l=n[3],a=e+e,c=r+r,f=s+s,h=e*a,u=e*c,_=e*f,m=r*c,d=r*f,g=s*f,p=l*a,v=l*c,w=l*f,y=o[0],M=o[1],T=o[2];t[0]=(1-(m+g))*y,t[1]=(u+w)*y,t[2]=(_-v)*y,t[3]=0,t[4]=(u-w)*M,t[5]=(1-(h+g))*M,t[6]=(d+p)*M,t[7]=0,t[8]=(_+v)*T,t[9]=(d-p)*T,t[10]=(1-(h+m))*T,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1}(i.i,i.$,i.K,i.D),void 0!==i.Vt&&_(i.i,t.T[i.Vt].i,i.i),u(i.Gt,i.i),32&t.o[n]){let i=t.l[n];for(let o of i.l)if(2097152&t.o[o]){let i=t.T[o];i.Vt=n,Ct(t,o,i)}}}function Lt(t,n){let i=t.i.qt[n],o=t.i.A[n];for(let r of i.ft)o.Bn&t.i.qt[r.ht].ct&&e(t,o.Et,[n,r.ht])}function It(t,...n){return t.reduce(((t,i)=>t+function(t){let n=t.shift();return"boolean"==typeof n||null==n?"":Array.isArray(n)?n.join(""):n}(n)+i))}function Kt(t,n,i,o=[.9,.9,.9,1]){return(e,r)=>{e.i.o[r]|=16,e.i.zn[r]={B:0,J:{B:0,Z:t,tt:n,nt:i,J:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],it:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},jn:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],en:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],gn:[0,0,0],tn:o}}}function Et(t,n,i,o,e=[0,0,0,1]){return(r,s)=>{r.i.o[s]|=16,r.i.zn[s]={B:3,Zt:t,J:{B:1,ot:n,tt:i,nt:o,J:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],it:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},jn:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],en:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],gn:[0,0,0],tn:e}}}function Xt(t){return 1-(1-t)**4}function $t(t){return t<.5?8*t**4:1-(-2*t+2)**4/2}function Dt(t){return(n,i)=>{let o={};for(let n in t){let{C:i,P:e=7}=t[n],r=i[i.length-1].L;o[n]={C:i.map((t=>({...t}))),P:e,H:r,F:0}}n.i.o[i]|=1,n.i.S[i]={k:o,R:o.idle}}}function Ht(t,n){return(i,o)=>{i.i.o[o]|=8,i.i.Pn[o]={Cn:t,X:void 0===n,Ln:n||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}}}function Vt(t,n,i,o=0,e=[1,1,1,1],r=2304){return(s,l)=>{if(!ci.has(n)){let i=s.Qt.createVertexArray();s.Qt.bindVertexArray(i),s.Qt.bindBuffer(Ut,n.Tn),s.Qt.enableVertexAttribArray(t.rn.bn),s.Qt.vertexAttribPointer(t.rn.bn,3,nn,!1,0,0),s.Qt.bindBuffer(Ut,n.Nn),s.Qt.enableVertexAttribArray(t.rn.Yn),s.Qt.vertexAttribPointer(t.rn.Yn,3,nn,!1,0,0),s.Qt.bindBuffer(Ot,n.Un),s.Qt.bindVertexArray(null),ci.set(n,i)}s.i.o[l]|=32768,s.i.sn[l]={B:2,_n:t,hn:n,ln:r,an:ci.get(n),pn:i,vn:e,wn:o}}}function Gt(t,n,i,o=0,e=[1,1,1,1],r=2304){return(s,l)=>{if(!fi.has(n)){let i=s.Qt.createVertexArray();s.Qt.bindVertexArray(i),s.Qt.bindBuffer(Ut,n.Tn),s.Qt.enableVertexAttribArray(t.rn.bn),s.Qt.vertexAttribPointer(t.rn.bn,3,nn,!1,0,0),s.Qt.bindBuffer(Ut,n.Nn),s.Qt.enableVertexAttribArray(t.rn.Yn),s.Qt.vertexAttribPointer(t.rn.Yn,3,nn,!1,0,0),s.Qt.bindBuffer(Ut,n.On),s.Qt.enableVertexAttribArray(t.rn.qn),s.Qt.vertexAttribPointer(t.rn.qn,4,nn,!1,0,0),s.Qt.bindBuffer(Ot,n.Un),s.Qt.bindVertexArray(null),fi.set(n,i)}s.i.o[l]|=32768,s.i.sn[l]={B:3,_n:t,hn:n,ln:r,an:fi.get(n),pn:i,vn:e,wn:o}}}function Wt(t){return[Gt(t.Jn,t.Qn,[1,.3,0,1],128),n([Rt([0,.63,0]),Ht(0,[1,0,0,0,0,1,0,0,0,0,1,0,0,-.63,0,1]),Dt({idle:{C:[{L:1/0,K:[0,.63,0]}]},jump:{C:[{L:0,K:[0,.63,0]},{L:.2,K:[0,1.13,0],I:$t},{L:.4,K:[0,.63,0],I:Xt}],P:0}}),n([Rt([0,.72,0]),Ht(1,[1,0,0,0,0,1,0,0,0,0,1,0,0,-1.35,0,1]),Dt({idle:{C:[{L:0,$:F([0,0,0,1],0,5,0)},{L:.5,$:F([0,0,0,1],0,-5,0)}]},walk:{C:[{L:0,$:F([0,0,0,1],0,5,0)},{L:.2,$:F([0,0,0,1],0,-5,0)}]},jump:{C:[{L:0,$:[0,0,0,1]},{L:.2,$:F([0,0,0,1],-15,0,0),I:$t},{L:.4,$:F([0,0,0,1],0,0,0),I:Xt}],P:0}})],[Rt([.3,.57,0],F([0,0,0,1],0,0,90)),Ht(2,[0,-1,0,0,1,0,0,0,0,0,1,0,-1.2,.3,0,1]),Dt({idle:{C:[{L:0,$:F([0,0,0,1],5,0,0)},{L:.5,$:F([0,0,0,1],-5,0,0)}]},walk:{C:[{L:0,$:F([0,0,0,1],30,0,0)},{L:.2,$:F([0,0,0,1],-60,0,0)}]},jump:{C:[{L:0,$:[0,0,0,1]},{L:.2,$:F([0,0,0,1],0,0,135),I:$t},{L:.4,$:[0,0,0,1],I:Xt}],P:0}})],[Rt([-.3,.57,0],F([0,0,0,1],0,0,-90)),Ht(3,[0,1,0,0,-1,0,0,0,0,0,1,0,1.2,.3,0,1]),Dt({idle:{C:[{L:0,$:F([0,0,0,1],-5,0,0)},{L:.5,$:F([0,0,0,1],5,0,0)}]},walk:{C:[{L:0,$:F([0,0,0,1],-60,0,0)},{L:.2,$:F([0,0,0,1],30,0,0)}]},jump:{C:[{L:0,$:[0,0,0,1]},{L:.2,$:F([0,0,0,1],0,0,-135),I:$t},{L:.4,$:[0,0,0,1],I:Xt}],P:0}})],[Rt([.15,0,0]),Ht(4,[1,0,0,0,0,1,0,0,0,0,1,0,-.15,-.63,0,1]),Dt({idle:{C:[{L:0,$:F([0,0,0,1],5,0,0)},{L:1,$:F([0,0,0,1],5,0,0)}]},walk:{C:[{L:0,$:F([0,0,0,1],-45,0,0)},{L:.2,$:F([0,0,0,1],45,0,0)}]},jump:{C:[{L:0,$:[0,0,0,1]},{L:.2,$:F([0,0,0,1],0,0,45),I:$t},{L:.4,$:[0,0,0,1],I:Xt}],P:0}})],[Rt([-.15,0,0]),Ht(5,[1,0,0,0,0,1,0,0,0,0,1,0,.15,-.63,0,1]),Dt({idle:{C:[{L:0,$:F([0,0,0,1],-5,0,0)},{L:1,$:F([0,0,0,1],-5,0,0)}]},walk:{C:[{L:0,$:F([0,0,0,1],45,0,0)},{L:.2,$:F([0,0,0,1],-45,0,0)}]},jump:{C:[{L:0,$:[0,0,0,1]},{L:.2,$:F([0,0,0,1],0,0,-45),I:$t},{L:.4,$:[0,0,0,1],I:Xt}],P:0}})])])]}function Bt(t,n){return(i,o)=>{i.i.o[o]|=128,i.i._t[o]={gt:t,$:n}}}function jt(t=[1,1,1],n=1){return(i,o)=>{i.i.o[o]|=2048,i.i.Xt[o]={B:1,Lt:t,Ht:n**2}}}function Nt(t){return[Bt(null,[0,1,0,0]),(t,n)=>{t.i.o[n]|=8192,t.i.dt[n]={Wt:0,Bt:.5,vt:[],wt:[],St:[]}},n([Rt([0,0,10]),jt([1,1,1],.9),Et(t.kn.An,10,1,100)])]}const Yt=35044,Ut=34962,Ot=34963,qt=9729,Jt=3553,Qt=33984,Zt=36160,tn=5123,nn=5126,on=document.getElementById("update"),en=document.getElementById("delta"),rn=document.getElementById("fps"),sn=1/60;let ln=Float32Array.from([-.5,-.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,-.5,-.5,.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5]),an=Float32Array.from([-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,1,0,0,1,0,0,1,0,0,1,0,0,0,0,1,0,0,1,0,0,1,0,0,1,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,1,0,0,1,0,0,1,0,0,1,0]),cn=Float32Array.from([.666667,.333333,.333333,.333333,.333333,0,.666667,0,.333333,.666667,0,.666667,0,.333333,.333333,.333333,.333333,.333333,0,.333333,0,0,.333333,0,.333333,.666667,.333333,.333333,.666667,.333333,.666667,.666667,1,.333333,.666667,.333333,.666667,0,1,0,.333333,.666667,.333333,1,0,1,0,.666667]),fn=Float32Array.from([]),hn=Uint16Array.from([23,22,20,22,21,20,19,18,16,18,17,16,15,14,12,14,13,12,11,10,8,10,9,8,7,6,4,6,5,4,3,2,0,2,1,0]),un=Float32Array.from([-.3,1.2,-.15,.45,1.47,0,.3,1.2,-.15,.27,.63,0,0,.63,.15,.15,0,0,.3,1.2,.15,1.05,1.35,0,-1.05,1.35,0,-.45,1.47,0,-.3,1.2,.15,0,.63,-.15,-.15,0,0,-.27,.63,0,0,2.25,-.15,0,2.25,.45]),_n=Float32Array.from([-.424,-.0402,-.9048,.3556,.9341,-.0314,.424,-.0402,-.9048,.9544,-.2985,0,0,-.2684,.9633,.0912,-.9958,0,.424,-.0402,.9048,.9979,.0645,0,-.9979,.0645,0,-.3556,.9341,-.0314,-.424,-.0402,.9048,0,-.2684,-.9633,-.0912,-.9958,0,-.9544,-.2985,0,0,.767,-.6416,0,.6255,.7802]),mn=Float32Array.from([]),dn=Float32Array.from([3,1,0,0,1,.75,2,.25,2,1,0,0,4,1,0,0,4,.5,5,.5,4,1,0,0,2,1,0,0,2,1,0,0,3,1,0,0,1,.75,3,.25,3,1,0,0,4,.5,5,.5,5,1,0,0,5,1,0,0,1,1,0,0,1,1,0,0]),gn=Uint16Array.from([15,9,14,1,15,14,9,15,1,1,14,9,2,7,1,9,1,6,6,7,2,7,6,1,6,2,3,6,3,4,5,4,3,11,3,2,4,5,11,4,11,12,11,5,3,12,13,4,13,12,11,10,6,4,10,4,13,6,10,9,8,9,10,0,11,2,0,13,11,1,9,0,10,0,8,0,10,13,9,8,0,2,1,0]);const pn=Math.PI/180,vn=2097153,wn=2097154;let yn,Mn=[0,0,0],Tn=[0,0,0],bn=[0,0,0];const xn=2097156,Sn=[0,0,0],An=[0,0,0],kn=2097168,Rn=[[.5,.5,.5],[.5,.5,-.5],[-.5,.5,-.5],[-.5,.5,.5],[.5,-.5,.5],[.5,-.5,-.5],[-.5,-.5,-.5],[-.5,-.5,.5]],Fn=2097216,zn=2105472,Pn=2105600,Cn=[1,0,0],Ln=[0,1,0],In=[0,0,0,0],Kn=[0,1,0],En=[1,0,0],Xn=[0,0],$n=[0,0,0,0],Dn=[0,1,0],Hn=[1,0,0],Vn=.1,Gn=2097664,Wn=2099200;let Bn=[0,0,0];const jn=2101248,Nn=2105344,Yn=[0,0,0,1],Un=2162688,On=2162688,qn=2162752;let Jn=[0,0,0];const Qn=524288,Zn=2129920,ti=2129920,ni=new Float32Array(96),ii=2228224,oi=2359296,ei=1048576,ri=2097152,si=6291520;let li;class ai extends class{constructor(){this.o=[],this.Zn=[]}t(){return this.Zn.length>0?this.Zn.pop():this.o.push(0)-1}h(t){this.o[t]=0,this.Zn.push(t)}}{constructor(){super(...arguments),this.S=[],this.V=[],this.Pn=[],this.zn=[],this.l=[],this.qt=[],this._t=[],this.yt=[],this.ti=[],this.It=[],this.Xt=[],this.ni=[],this.dt=[],this.ii=[],this.sn=[],this.jt=[],this.Kn=[],this.Xn=[],this.oi=[],this.Vn=[],this.T=[],this.A=[]}}const ci=new WeakMap,fi=new WeakMap;let hi=new class extends class extends class{constructor(){this.ei=0,this.ri=0,this.Rt=window.innerWidth,this.Ft=window.innerHeight,this.si=!0,this.Mt={MouseX:0,MouseY:0},this.kt={MouseX:0,MouseY:0},this.li={Mouse:0,Mouse0:0,Mouse1:0,Mouse2:0,Touch0:0,Touch1:0},this.ai={},this.ci=document.querySelector("main"),document.addEventListener("visibilitychange",(()=>document.hidden?this.fi():this.hi())),this.ci.addEventListener("contextmenu",(t=>t.preventDefault())),this.ci.addEventListener("mousedown",(t=>{this.Mt["Mouse"+t.button]=1,this.kt["Mouse"+t.button]=1})),this.ci.addEventListener("mouseup",(t=>{this.Mt["Mouse"+t.button]=0,this.kt["Mouse"+t.button]=-1})),this.ci.addEventListener("mousemove",(t=>{this.Mt.MouseX=t.clientX,this.Mt.MouseY=t.clientY,this.kt.MouseX=t.movementX,this.kt.MouseY=t.movementY})),this.ci.addEventListener("wheel",(t=>{t.preventDefault(),this.kt.WheelY=t.deltaY})),this.ci.addEventListener("touchstart",(t=>{t.preventDefault(),1===t.touches.length&&(this.ai={});for(let n=0;n<t.touches.length;n++)this.ai[t.touches[n].identifier]=n;for(let n=0;n<t.changedTouches.length;n++){let i=t.changedTouches[n],o=this.ai[i.identifier];this.Mt["Touch"+o]=1,this.Mt[`Touch${o}X`]=i.clientX,this.Mt[`Touch${o}Y`]=i.clientY,this.kt["Touch"+o]=1,this.kt[`Touch${o}X`]=0,this.kt[`Touch${o}Y`]=0}})),this.ci.addEventListener("touchmove",(t=>{t.preventDefault();for(let n=0;n<t.changedTouches.length;n++){let i=t.changedTouches[n],o=this.ai[i.identifier];this.kt[`Touch${o}X`]=i.clientX-this.Mt[`Touch${o}X`],this.kt[`Touch${o}Y`]=i.clientY-this.Mt[`Touch${o}Y`],this.Mt[`Touch${o}X`]=i.clientX,this.Mt[`Touch${o}Y`]=i.clientY}})),this.ci.addEventListener("touchend",(t=>{t.preventDefault();for(let n=0;n<t.changedTouches.length;n++){let i=this.ai[t.changedTouches[n].identifier];this.Mt["Touch"+i]=0,this.kt["Touch"+i]=-1}})),this.ci.addEventListener("touchcancel",(t=>{t.preventDefault();for(let n=0;n<t.changedTouches.length;n++){let i=this.ai[t.changedTouches[n].identifier];this.Mt["Touch"+i]=0,this.kt["Touch"+i]=-1}})),window.addEventListener("keydown",(t=>{t.repeat||(this.Mt[t.code]=1,this.kt[t.code]=1)})),window.addEventListener("keyup",(t=>{this.Mt[t.code]=0,this.kt[t.code]=-1}))}hi(){let t=0,n=performance.now(),i=o=>{let e=(o-n)/1e3;for(this.ui(e),t+=e;t>=sn;)t-=sn,this._i(sn);this.mi(e),this.di(e),n=o,this.ei=requestAnimationFrame(i)};this.fi(),i(n)}fi(){cancelAnimationFrame(this.ei),this.ei=0}ui(t){this.ri=performance.now();let n=Math.abs(this.kt.MouseX)+Math.abs(this.kt.MouseY);this.li.Mouse+=n,1===this.Mt.Mouse0&&(this.li.Mouse0+=n),1===this.Mt.Mouse1&&(this.li.Mouse1+=n),1===this.Mt.Mouse2&&(this.li.Mouse2+=n),1===this.Mt.Touch0&&(this.li.Touch0+=Math.abs(this.kt.Touch0X)+Math.abs(this.kt.Touch0Y)),1===this.Mt.Touch1&&(this.li.Touch1+=Math.abs(this.kt.Touch1X)+Math.abs(this.kt.Touch1Y))}_i(t){}mi(t){}di(t){this.si=!1,-1===this.kt.Mouse0&&(this.li.Mouse0=0),-1===this.kt.Mouse1&&(this.li.Mouse1=0),-1===this.kt.Mouse2&&(this.li.Mouse2=0),-1===this.kt.Touch0&&(this.li.Touch0=0),-1===this.kt.Touch1&&(this.li.Touch1=0);for(let t in this.kt)this.kt[t]=0;let n=performance.now()-this.ri;on&&(on.textContent=n.toFixed(1)),en&&(en.textContent=(1e3*t).toFixed(1)),rn&&(rn.textContent=(1/t).toFixed())}}{constructor(){super(),this.gi=document.querySelector("#billboard"),this.zt=this.gi.getContext("2d"),this.pi=document.querySelector("#scene"),this.Qt=this.pi.getContext("webgl2"),this.Audio=new AudioContext,this.Qt.enable(2929),this.Qt.enable(2884)}}{constructor(){super(...arguments),this.i=new ai,this.vi=function(t){let n=a(t,"#version 300 es\n\n\nuniform mat4 pv;\nuniform mat4 world;\nuniform mat4 self;\n\nin vec3 attr_position;\nin vec3 attr_normal;\n\nout vec4 vert_position;\nout vec3 vert_normal;\n\nvoid main() {\nvert_position = world * vec4(attr_position, 1.0);\nvert_normal = (vec4(attr_normal, 1.0) * self).xyz;\ngl_Position = pv * vert_position;\n}\n","#version 300 es\n\nprecision mediump float;\n\n\nconst int MAX_LIGHTS = 8;\n\nuniform vec3 eye;\nuniform vec4 diffuse_color;\nuniform vec4 specular_color;\nuniform float shininess;\nuniform vec4 light_positions[MAX_LIGHTS];\nuniform vec4 light_details[MAX_LIGHTS];\n\nin vec4 vert_position;\nin vec3 vert_normal;\n\nout vec4 frag_color;\n\nvoid main() {\nvec3 world_normal = normalize(vert_normal);\n\nvec3 view_dir = eye - vert_position.xyz;\nvec3 view_normal = normalize(view_dir);\n\n\nvec3 light_acc = diffuse_color.rgb * 0.1;\n\nfor (int i = 0; i < MAX_LIGHTS; i++) {\nif (light_positions[i].w == 0.0) {\nbreak;\n}\n\nvec3 light_color = light_details[i].rgb;\nfloat light_intensity = light_details[i].a;\n\nvec3 light_normal;\nif (light_positions[i].w == 1.0) {\n\nlight_normal = light_positions[i].xyz;\n} else {\nvec3 light_dir = light_positions[i].xyz - vert_position.xyz;\nfloat light_dist = length(light_dir);\nlight_normal = light_dir / light_dist;\n\nlight_intensity /= (light_dist * light_dist);\n}\n\nfloat diffuse_factor = dot(world_normal, light_normal);\nif (diffuse_factor > 0.0) {\n\nlight_acc += diffuse_color.rgb * diffuse_factor * light_color * light_intensity;\n\nif (shininess > 0.0) {\n\n\n\n\n\n\nvec3 h = normalize(light_normal + view_normal);\nfloat specular_angle = max(dot(h, world_normal), 0.0);\nfloat specular_factor = pow(specular_angle, shininess);\n\n\nlight_acc += specular_color.rgb * specular_factor * light_color * light_intensity;\n}\n}\n}\n\nfrag_color = vec4(light_acc, 1.0);\n}\n");return{cn:4,nn:n,rn:{en:t.getUniformLocation(n,"pv"),i:t.getUniformLocation(n,"world"),Gt:t.getUniformLocation(n,"self"),pn:t.getUniformLocation(n,"diffuse_color"),vn:t.getUniformLocation(n,"specular_color"),wn:t.getUniformLocation(n,"shininess"),dn:t.getUniformLocation(n,"eye"),$t:t.getUniformLocation(n,"light_positions"),Dt:t.getUniformLocation(n,"light_details"),bn:t.getAttribLocation(n,"attr_position"),Yn:t.getAttribLocation(n,"attr_normal")}}}(this.Qt),this.wi=function(t){let n=a(t,"#version 300 es\n\n\nuniform mat4 pv;\nuniform mat4 world;\nuniform mat4 self;\n\nin vec3 attr_position;\nin vec3 attr_normal;\n\nout vec4 vert_position;\nout vec3 vert_normal;\n\nvoid main() {\nvert_position = world * vec4(attr_position, 1.0);\nvert_normal = (vec4(attr_normal, 1.0) * self).xyz;\ngl_Position = pv * vert_position;\n}\n","#version 300 es\n\nprecision mediump float;\nprecision lowp sampler2DShadow;\n\n\nconst int MAX_LIGHTS = 8;\n\nuniform vec3 eye;\nuniform vec4 diffuse_color;\nuniform vec4 specular_color;\nuniform float shininess;\nuniform vec4 light_positions[MAX_LIGHTS];\nuniform vec4 light_details[MAX_LIGHTS];\nuniform mat4 shadow_space;\nuniform sampler2DShadow shadow_map;\n\nin vec4 vert_position;\nin vec3 vert_normal;\n\nout vec4 frag_color;\n\n\n\nfloat shadow_factor(vec4 world_pos, float min) {\nvec4 shadow_space_pos = shadow_space * world_pos;\nvec3 shadow_space_ndc = shadow_space_pos.xyz / shadow_space_pos.w;\n\nshadow_space_ndc = shadow_space_ndc * 0.5 + 0.5;\n\n\nshadow_space_ndc.z -= 0.001;\n\nreturn texture(shadow_map, shadow_space_ndc) * (1.0 - min) + min;\n}\n\nvoid main() {\nvec3 world_normal = normalize(vert_normal);\n\nvec3 view_dir = eye - vert_position.xyz;\nvec3 view_normal = normalize(view_dir);\n\n\nvec3 light_acc = diffuse_color.rgb * 0.1;\n\nfor (int i = 0; i < MAX_LIGHTS; i++) {\nif (light_positions[i].w == 0.0) {\nbreak;\n}\n\nvec3 light_color = light_details[i].rgb;\nfloat light_intensity = light_details[i].a;\n\nvec3 light_normal;\nif (light_positions[i].w == 1.0) {\n\nlight_normal = light_positions[i].xyz;\n} else {\nvec3 light_dir = light_positions[i].xyz - vert_position.xyz;\nfloat light_dist = length(light_dir);\nlight_normal = light_dir / light_dist;\n\nlight_intensity /= (light_dist * light_dist);\n}\n\nfloat diffuse_factor = dot(world_normal, light_normal);\nif (diffuse_factor > 0.0) {\n\nlight_acc += diffuse_color.rgb * diffuse_factor * light_color * light_intensity;\n\nif (shininess > 0.0) {\n\n\n\n\n\n\nvec3 h = normalize(light_normal + view_normal);\nfloat specular_angle = max(dot(h, world_normal), 0.0);\nfloat specular_factor = pow(specular_angle, shininess);\n\n\nlight_acc += specular_color.rgb * specular_factor * light_color * light_intensity;\n}\n}\n}\n\nvec3 shaded_rgb = light_acc * shadow_factor(vert_position, 0.5);\nfrag_color= vec4(shaded_rgb, 1.0);\n}\n");return{cn:4,nn:n,rn:{en:t.getUniformLocation(n,"pv"),i:t.getUniformLocation(n,"world"),Gt:t.getUniformLocation(n,"self"),pn:t.getUniformLocation(n,"diffuse_color"),vn:t.getUniformLocation(n,"specular_color"),wn:t.getUniformLocation(n,"shininess"),dn:t.getUniformLocation(n,"eye"),$t:t.getUniformLocation(n,"light_positions"),Dt:t.getUniformLocation(n,"light_details"),Fn:t.getUniformLocation(n,"shadow_space"),Rn:t.getUniformLocation(n,"shadow_map"),bn:t.getAttribLocation(n,"attr_position"),Yn:t.getAttribLocation(n,"attr_normal")}}}(this.Qt),this.yi=function(t){let n=a(t,"#version 300 es\n\n\n\nconst int MAX_LIGHTS = 8;\n\nuniform mat4 pv;\nuniform mat4 world;\nuniform mat4 self;\nuniform vec3 eye;\nuniform vec4 diffuse_color;\nuniform vec4 specular_color;\nuniform float shininess;\nuniform vec4 light_positions[MAX_LIGHTS];\nuniform vec4 light_details[MAX_LIGHTS];\nuniform mat4 bones[6];\n\nin vec3 attr_position;\nin vec3 attr_normal;\nin vec4 attr_weights;\n\nout vec4 vert_color;\n\nmat4 world_weighted(vec4 weights) {\nreturn weights[1] * bones[int(weights[0])] + weights[3] * bones[int(weights[2])];\n}\n\nvoid main() {\nmat4 bone_world = world_weighted(attr_weights);\nvec4 world_position = bone_world * vec4(attr_position, 1.0);\nvec3 world_normal = normalize(mat3(bone_world) * attr_normal);\ngl_Position = pv * world_position;\n\nvec3 view_dir = eye - world_position.xyz;\nvec3 view_normal = normalize(view_dir);\n\n\nvec3 light_acc = diffuse_color.rgb * 0.1;\n\nfor (int i = 0; i < MAX_LIGHTS; i++) {\nif (light_positions[i].w == 0.0) {\nbreak;\n}\n\nvec3 light_color = light_details[i].rgb;\nfloat light_intensity = light_details[i].a;\n\nvec3 light_normal;\nif (light_positions[i].w == 1.0) {\n\nlight_normal = light_positions[i].xyz;\n} else {\nvec3 light_dir = light_positions[i].xyz - world_position.xyz;\nfloat light_dist = length(light_dir);\nlight_normal = light_dir / light_dist;\n\nlight_intensity /= (light_dist * light_dist);\n}\n\nfloat diffuse_factor = dot(world_normal, light_normal);\nif (diffuse_factor > 0.0) {\n\nlight_acc += diffuse_color.rgb * diffuse_factor * light_color * light_intensity;\n\nif (shininess > 0.0) {\n\nvec3 h = normalize(light_normal + view_normal);\nfloat specular_angle = max(dot(h, world_normal), 0.0);\nfloat specular_factor = pow(specular_angle, shininess);\n\n\nlight_acc += specular_color.rgb * specular_factor * light_color * light_intensity;\n}\n}\n}\n\nvert_color = vec4(light_acc, 1.0);\n}\n","#version 300 es\n\nprecision mediump float;\n\nin vec4 vert_color;\n\nout vec4 frag_color;\n\nvoid main() {\nfrag_color = vert_color;\n}\n");return{cn:4,nn:n,rn:{en:t.getUniformLocation(n,"pv"),i:t.getUniformLocation(n,"world"),Gt:t.getUniformLocation(n,"self"),pn:t.getUniformLocation(n,"diffuse_color"),vn:t.getUniformLocation(n,"specular_color"),wn:t.getUniformLocation(n,"shininess"),dn:t.getUniformLocation(n,"eye"),$t:t.getUniformLocation(n,"light_positions"),Dt:t.getUniformLocation(n,"light_details"),bn:t.getAttribLocation(n,"attr_position"),Yn:t.getAttribLocation(n,"attr_normal"),In:t.getUniformLocation(n,"bones"),qn:t.getAttribLocation(n,"attr_weights")}}}(this.Qt),this.Jn=function(t){let n=a(t,"#version 300 es\n\nuniform mat4 pv;\nuniform mat4 world;\nuniform mat4 self;\nuniform mat4 bones[6];\n\nin vec3 attr_position;\nin vec3 attr_normal;\nin vec4 attr_weights;\n\nout vec4 vert_position;\nout vec3 vert_normal;\n\nmat4 world_weighted(vec4 weights) {\nreturn weights[1] * bones[int(weights[0])] + weights[3] * bones[int(weights[2])];\n}\n\nvoid main() {\nmat4 bone_world = world_weighted(attr_weights);\nvert_position = bone_world * vec4(attr_position, 1.0);\nvert_normal = normalize(mat3(bone_world) * attr_normal);\ngl_Position = pv * vert_position;\n}\n","#version 300 es\n\nprecision mediump float;\n\n\nconst int MAX_LIGHTS = 8;\n\nuniform vec3 eye;\nuniform vec4 diffuse_color;\nuniform vec4 specular_color;\nuniform float shininess;\nuniform vec4 light_positions[MAX_LIGHTS];\nuniform vec4 light_details[MAX_LIGHTS];\n\nin vec4 vert_position;\nin vec3 vert_normal;\n\nout vec4 frag_color;\n\nvoid main() {\nvec3 world_normal = normalize(vert_normal);\n\nvec3 view_dir = eye - vert_position.xyz;\nvec3 view_normal = normalize(view_dir);\n\n\nvec3 light_acc = diffuse_color.rgb * 0.1;\n\nfor (int i = 0; i < MAX_LIGHTS; i++) {\nif (light_positions[i].w == 0.0) {\nbreak;\n}\n\nvec3 light_color = light_details[i].rgb;\nfloat light_intensity = light_details[i].a;\n\nvec3 light_normal;\nif (light_positions[i].w == 1.0) {\n\nlight_normal = light_positions[i].xyz;\n} else {\nvec3 light_dir = light_positions[i].xyz - vert_position.xyz;\nfloat light_dist = length(light_dir);\nlight_normal = light_dir / light_dist;\n\nlight_intensity /= (light_dist * light_dist);\n}\n\nfloat diffuse_factor = dot(world_normal, light_normal);\nif (diffuse_factor > 0.0) {\n\nlight_acc += diffuse_color.rgb * diffuse_factor * light_color * light_intensity;\n\nif (shininess > 0.0) {\n\n\n\n\n\n\nvec3 h = normalize(light_normal + view_normal);\nfloat specular_angle = max(dot(h, world_normal), 0.0);\nfloat specular_factor = pow(specular_angle, shininess);\n\n\nlight_acc += specular_color.rgb * specular_factor * light_color * light_intensity;\n}\n}\n}\n\nfrag_color = vec4(light_acc, 1.0);\n}\n");return{cn:4,nn:n,rn:{en:t.getUniformLocation(n,"pv"),i:t.getUniformLocation(n,"world"),Gt:t.getUniformLocation(n,"self"),pn:t.getUniformLocation(n,"diffuse_color"),vn:t.getUniformLocation(n,"specular_color"),wn:t.getUniformLocation(n,"shininess"),dn:t.getUniformLocation(n,"eye"),$t:t.getUniformLocation(n,"light_positions"),Dt:t.getUniformLocation(n,"light_details"),bn:t.getAttribLocation(n,"attr_position"),Yn:t.getAttribLocation(n,"attr_normal"),In:t.getUniformLocation(n,"bones"),qn:t.getAttribLocation(n,"attr_weights")}}}(this.Qt),this.on=function(t){let n=a(t,"#version 300 es\n\n\nuniform mat4 pv;\nuniform mat4 world;\n\nin vec3 attr_position;\n\nvoid main() {\ngl_Position = pv * world * vec4(attr_position, 1.0);\n}\n","#version 300 es\n\nprecision mediump float;\n\nout vec4 frag_color;\n\nvoid main() {\n\nfloat z = gl_FragCoord.z * 10.0;\nfrag_color = vec4(z, z, z, 1.0);\n}\n");return{cn:4,nn:n,rn:{en:t.getUniformLocation(n,"pv"),i:t.getUniformLocation(n,"world"),bn:t.getAttribLocation(n,"attr_position")}}}(this.Qt),this.Mi=function(t){let n=t.createBuffer();t.bindBuffer(Ut,n),t.bufferData(Ut,ln,Yt);let i=t.createBuffer();t.bindBuffer(Ut,i),t.bufferData(Ut,an,Yt);let o=t.createBuffer();t.bindBuffer(Ut,o),t.bufferData(Ut,cn,Yt);let e=t.createBuffer();t.bindBuffer(Ut,e),t.bufferData(Ut,fn,Yt);let r=t.createBuffer();return t.bindBuffer(Ot,r),t.bufferData(Ot,hn,Yt),{Tn:n,Ti:ln,Nn:i,bi:an,xi:o,Si:cn,On:e,Ai:fn,Un:r,ki:hn,fn:hn.length}}(this.Qt),this.Qn=function(t){let n=t.createBuffer();t.bindBuffer(Ut,n),t.bufferData(Ut,un,Yt);let i=t.createBuffer();t.bindBuffer(Ut,i),t.bufferData(Ut,_n,Yt);let o=t.createBuffer();t.bindBuffer(Ut,o),t.bufferData(Ut,mn,Yt);let e=t.createBuffer();t.bindBuffer(Ut,e),t.bufferData(Ut,dn,Yt);let r=t.createBuffer();return t.bindBuffer(Ot,r),t.bufferData(Ot,gn,Yt),{Tn:n,Ti:un,Nn:i,bi:_n,xi:o,Si:mn,On:e,Ai:dn,Un:r,ki:gn,fn:gn.length}}(this.Qt),this.$t=new Float32Array(32),this.Dt=new Float32Array(32),this.Ri=[],this.kn={An:l(this.Qt,2048,2048)},this.u=0,this._=0}_i(t){!function(t,n){for(let i=0;i<t.i.o.length;i++)(t.i.o[i]&Un)===Un&&ot(t,i,n)}(this,t),Pt(this),function(t,n){for(let i=0;i<t.i.o.length;i++)(t.i.o[i]&On)===On&&et(t,i,n)}(this,t),function(t,n){let i=[],o=[];for(let n=0;n<t.i.o.length;n++)if((t.i.o[n]&Fn)===Fn){let e=t.i.T[n],r=t.i.qt[n];r.ft=[],r.Fi?(r.Fi=!1,V(e.i,r)):r.zi?(V(e.i,r),o.push(r)):i.push(r)}for(let t=0;t<o.length;t++)B(o[t],i,i.length),B(o[t],o,t)}(this),function(t,n){for(let n=0;n<t.i.o.length;n++)(t.i.o[n]&qn)===qn&&rt(t,n)}(this),Pt(this),function(t,n){for(let n=0;n<t.i.o.length;n++)(t.i.o[n]&si)===si&&Lt(t,n)}(this)}mi(t){!function(t,n){let i=[];for(let o=0;o<t.i.o.length;o++)if((t.i.o[o]&Qn)===Qn){if(st(t.i,o))continue;let e=t.i.oi[o];switch(e.B){case 0:e.Pi(o)&&i.push(o);break;case 1:e.Kt-=n,e.Kt<0&&i.push(o)}}for(let n of i){t.i.o[n]&=-524289,0===t.i.o[n]&&t.i.h(n);let i=t.i.oi[n];i.Ci&&i.Ci(n),delete t.i.oi[n]}}(this,t),function(t,n){for(let n=0;n<t.i.o.length;n++)8448==(8448&t.i.o[n])&&N(t,n)}(this),function(t,n){for(let n=0;n<t.i.o.length;n++)(t.i.o[n]&Pn)===Pn&&Y(t,n)}(this),function(t,n){1===t.kt.Touch0&&(Xn[0]=t.Mt.Touch0X,Xn[1]=t.Mt.Touch0Y);for(let n=0;n<t.i.o.length;n++)8448==(8448&t.i.o[n])&&U(t,n)}(this),function(t,n){for(let n of navigator.getGamepads())n&&(t.kt[`pad${n.index}_axis_1`]=n.axes[0],t.kt[`pad${n.index}_axis_2`]=n.axes[1],t.kt[`pad${n.index}_axis_3`]=n.axes[2],t.kt[`pad${n.index}_axis_4`]=n.axes[3]);for(let n=0;n<t.i.o.length;n++)8448==(8448&t.i.o[n])&&O(t,n)}(this),function(t,n){for(let n=0;n<t.i.o.length;n++)(t.i.o[n]&zn)===zn&&j(t,n)}(this),function(t,n){for(let i=0;i<t.i.o.length;i++)(t.i.o[i]&vn)===vn&&L(t,i,n)}(this,t),function(t,n){for(let i=0;i<t.i.o.length;i++)(t.i.o[i]&Nn)===Nn&&tt(t,i,n)}(this,t),function(t,n){for(let n=0;n<t.i.o.length;n++)if((t.i.o[n]&jn)===jn){let i=t.i.T[n],o=t.i.ni[n],e=t.i.T[o.Zt],r=g([0,0,0],e.i),s=p([0,0,0,0],e.i);k(i.K,i.K,r,o.Li),C(i.$,i.$,s,o.Li),i.X=!0}}(this),function(t,n){for(let i=0;i<t.i.o.length;i++)1024==(1024&t.i.o[i])&&Q(t,i,n)}(this,t),function(t,n){for(let n=0;n<t.i.o.length;n++)(t.i.o[n]&ii)==ii&&kt(t,n)}(this),function(t,n){for(let i=0;i<t.i.o.length;i++)(t.i.o[i]&ei)==ei&&zt(t,i,n)}(this,t),function(t,n){for(let i=0;i<t.i.o.length;i++)(t.i.o[i]&oi)==oi&&Ft(t,i,n)}(this,t),Pt(this),function(t,n){for(let n=0;n<t.i.o.length;n++)(t.i.o[n]&wn)===wn&&I(t,n)}(this),function(t,n){for(let i=0;i<t.i.o.length;i++)(t.i.o[i]&xn)===xn&&X(t,i,n)}(this,t),function(t,n){t.Rt==window.innerWidth&&t.Ft==window.innerHeight||(t.si=!0),t.si&&(t.Rt=t.pi.width=t.gi.width=window.innerWidth,t.Ft=t.pi.height=t.gi.height=window.innerHeight)}(this),function(t,n){t.Ri=[];for(let n=0;n<t.i.o.length;n++)if((t.i.o[n]&kn)===kn){let i=t.i.zn[n],o=t.i.T[n],e=i.J;if(t.si)switch(e.B){case 0:D(e,0===i.B?t.Rt/t.Ft:i.Zt.g/i.Zt.p);break;case 1:H(e)}h(i.jn,o.Gt),_(i.en,e.J,i.jn),g(i.gn,o.i),t.Ri.push(n)}}(this),function(t,n){t.$t.fill(0),t.Dt.fill(0);let i=0;for(let n=0;n<t.i.o.length;n++)(t.i.o[n]&Wn)===Wn&&Z(t,n,i++)}(this),function(t,n){for(let n of t.Ri){let i=t.i.zn[n];switch(i.B){case 3:lt(t,i)}}}(this),function(t,n){for(let n of t.Ri){let i=t.i.zn[n];switch(i.B){case 0:at(t,i);break;case 2:ct(t,i)}}}(this),function(t,n){t.zt.resetTransform(),t.zt.clearRect(0,0,t.Rt,t.Ft);let i=[0,0,0],o=t.i.zn[t.Ri[0]];if(o)for(let n=0;n<t.i.o.length;n++)if((t.i.o[n]&Gn)==Gn){if(g(i,t.i.T[n].i),S(i,i,o.en),i[2]<-1||i[2]>1)continue;t.zt.setTransform(1,0,0,1,.5*(i[0]+1)*t.Rt,.5*(1-i[1])*t.Ft);let e=t.i.ti[n];switch(e.B){case 0:q(t,e);break;case 2:J(t,e)}}}(this),function(t,n){let i=function(t){return It`<div>${It`
<div
style="
position: absolute;
top: 1vmin;
left: 1vmin;
background: #000;
color: #fff;
font: 13px Arial;
"
>
<button
onclick="$(${0})"
style="
padding: 1vmin;
background: #000;
color: #fff;
border: none;
"
>
${document.fullscreenElement?"Exit Fullscreen":"Enter Fullscreen"}
</button>
</div>
`} ${function(t){return It`
<div
style="
position: absolute;
right: 0;
bottom: 0;
left: 0;
height: 10vmin;

display: flex;
justify-content: space-around;
align-items: center;

background: rgba(0, 0, 0, 0.5);
color: #fff;
font: 24px Impact;
font-style: italic;
"
>
<div>Collected: ${t.u}</div>
<div>Missed: ${t._}</div>
</div>
`}(t)}</div>`}(t);i!==li&&(t.ci.innerHTML=li=i)}(this)}};!function(t){t.ci.addEventListener("click",(()=>t.ci.requestPointerLock()))}(hi),function(i){i.i=new ai,i.si=!0,t(i,[n([Rt(void 0,[0,1,0,0]),Kt(1,.1,1e3)]),Rt([0,2,5],[0,1,0,0])]),t(i,[Rt(void 0,F([0,0,0,0],-45,45,0)),...Nt(i)]),t(i,[Rt(void 0,void 0,[10,1,10]),Vt(i.wi,i.Mi,[1,1,0,1])]),t(i,[Rt([-1,1,0]),Vt(i.wi,i.Mi,[1,1,0,1])]),t(i,[...Wt(i),Rt([1,.5,0])])}(hi),hi.hi(),window.$=e.bind(null,hi),window.game=hi}();
</script>
