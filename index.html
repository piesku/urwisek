<!DOCTYPE html><meta charset=utf8><meta name=viewport content="width=device-width, user-scalable=0"><meta name=apple-mobile-web-app-capable content=yes><meta name=mobile-web-app-capable content=yes><meta name=theme-color content=#696><meta name=monetization content=$ilp.uphold.com/QgQz4P8FygUZ><title>ESCAPE</title><style>body,html{color:#fff;font-family:Arial;margin:0;overflow:hidden}canvas,main{height:100vh;position:absolute;touch-action:none;user-select:none;width:100vw}main{padding:2vh 3vw;width:94vw}[onclick]{cursor:pointer;opacity:.5}[onclick]:hover{opacity:1}</style><canvas></canvas><main></main><script>!function(){function t(t,n){let o=t.o.t();for(let i of n)i(t,o);return o}function n(t){return(n,o)=>{n.o.l[o]|=128,n.o.u[o]={m:t,h:1,v:0,_:null}}}function o(t,n=.1){return(o,i)=>{o.o.l[i]|=4096,o.o.p[i]={g:t,T:n}}}function i(t){return(n,o)=>{n.o.l[o]|=16384,n.o.R[o]={M:t}}}function e(t,n,o=0){for(let i=o;i<t.l.length;i++)if(16384&t.l[i]&&t.R[i].M===n)return i;throw`No entity named ${n}.`}function r(t,n){return(o,i)=>{o.o.l[i]|=524288,o.o.F[i]={I:0,A:t,K:n}}}function a(t,n){return(o,i)=>{o.o.l[i]|=524288,o.o.F[i]={I:1,C:t,K:n}}}function s(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function l(t,n){let o=n[0],i=n[1],e=n[2],r=n[3],a=n[4],s=n[5],l=n[6],f=n[7],c=n[8],u=n[9],m=n[10],h=n[11],d=n[12],v=n[13],_=n[14],p=n[15],g=o*s-i*a,w=o*l-e*a,y=o*f-r*a,T=i*l-e*s,R=i*f-r*s,x=e*f-r*l,M=c*v-u*d,F=c*_-m*d,E=c*p-h*d,b=u*_-m*v,I=u*p-h*v,A=m*p-h*_,K=g*A-w*I+y*b+T*E-R*F+x*M;return K?(K=1/K,t[0]=(s*A-l*I+f*b)*K,t[1]=(e*I-i*A-r*b)*K,t[2]=(v*x-_*R+p*T)*K,t[3]=(m*R-u*x-h*T)*K,t[4]=(l*E-a*A-f*F)*K,t[5]=(o*A-e*E+r*F)*K,t[6]=(_*y-d*x-p*w)*K,t[7]=(c*x-m*y+h*w)*K,t[8]=(a*I-s*E+f*M)*K,t[9]=(i*E-o*I-r*M)*K,t[10]=(d*R-v*y+p*g)*K,t[11]=(u*y-c*R-h*g)*K,t[12]=(s*F-a*b-l*M)*K,t[13]=(o*b-i*F+e*M)*K,t[14]=(v*w-d*T-_*g)*K,t[15]=(c*T-u*w+m*g)*K,t):null}function f(t,n,o){let i=n[0],e=n[1],r=n[2],a=n[3],s=n[4],l=n[5],f=n[6],c=n[7],u=n[8],m=n[9],h=n[10],d=n[11],v=n[12],_=n[13],p=n[14],g=n[15],w=o[0],y=o[1],T=o[2],R=o[3];return t[0]=w*i+y*s+T*u+R*v,t[1]=w*e+y*l+T*m+R*_,t[2]=w*r+y*f+T*h+R*p,t[3]=w*a+y*c+T*d+R*g,w=o[4],y=o[5],T=o[6],R=o[7],t[4]=w*i+y*s+T*u+R*v,t[5]=w*e+y*l+T*m+R*_,t[6]=w*r+y*f+T*h+R*p,t[7]=w*a+y*c+T*d+R*g,w=o[8],y=o[9],T=o[10],R=o[11],t[8]=w*i+y*s+T*u+R*v,t[9]=w*e+y*l+T*m+R*_,t[10]=w*r+y*f+T*h+R*p,t[11]=w*a+y*c+T*d+R*g,w=o[12],y=o[13],T=o[14],R=o[15],t[12]=w*i+y*s+T*u+R*v,t[13]=w*e+y*l+T*m+R*_,t[14]=w*r+y*f+T*h+R*p,t[15]=w*a+y*c+T*d+R*g,t}function c(t,n,o,i){let e=n[0],r=n[1],a=n[2],s=n[3],l=e+e,f=r+r,c=a+a,u=e*l,m=e*f,h=e*c,d=r*f,v=r*c,_=a*c,p=s*l,g=s*f,w=s*c,y=i[0],T=i[1],R=i[2];return t[0]=(1-(d+_))*y,t[1]=(m+w)*y,t[2]=(h-g)*y,t[3]=0,t[4]=(m-w)*T,t[5]=(1-(u+_))*T,t[6]=(v+p)*T,t[7]=0,t[8]=(h+g)*R,t[9]=(v-p)*R,t[10]=(1-(u+d))*R,t[11]=0,t[12]=o[0],t[13]=o[1],t[14]=o[2],t[15]=1,t}function u(t,n,o,i,e){let r,a=1/Math.tan(n/2);return t[0]=a/o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=e&&e!==1/0?(r=1/(i-e),t[10]=(e+i)*r,t[14]=2*e*i*r):(t[10]=-1,t[14]=-2*i),t}function m(t,n){return t[0]=n[12],t[1]=n[13],t[2]=n[14],t}function h(t,n){let o=n[0],i=n[1],e=n[2],r=n[4],a=n[5],s=n[6],l=n[8],f=n[9],c=n[10],u=o+a+c,m=0;return u>0?(m=2*Math.sqrt(u+1),t[3]=.25*m,t[0]=(s-f)/m,t[1]=(l-e)/m,t[2]=(i-r)/m):o>a&&o>c?(m=2*Math.sqrt(1+o-a-c),t[3]=(s-f)/m,t[0]=.25*m,t[1]=(i+r)/m,t[2]=(l+e)/m):a>c?(m=2*Math.sqrt(1+a-o-c),t[3]=(l-e)/m,t[0]=(i+r)/m,t[1]=.25*m,t[2]=(s+f)/m):(m=2*Math.sqrt(1+c-o-a),t[3]=(i-r)/m,t[0]=(l+e)/m,t[1]=(s+f)/m,t[2]=.25*m),t}function d(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t}function v(t,n,o){return t[0]=n[0]+o[0],t[1]=n[1]+o[1],t[2]=n[2]+o[2],t}function _(t,n,o){return t[0]=n[0]*o,t[1]=n[1]*o,t[2]=n[2]*o,t}function p(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t}function g(t,n){let o=n[0],i=n[1],e=n[2],r=o*o+i*i+e*e;return r>0&&(r=1/Math.sqrt(r)),t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t}function w(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function y(t,n,o){let i=n[0],e=n[1],r=n[2],a=o[3]*i+o[7]*e+o[11]*r+o[15];return a=a||1,t[0]=(o[0]*i+o[4]*e+o[8]*r+o[12])/a,t[1]=(o[1]*i+o[5]*e+o[9]*r+o[13])/a,t[2]=(o[2]*i+o[6]*e+o[10]*r+o[14])/a,t}function T(t,n,o,i){let e=n[0],r=n[1],a=n[2];return t[0]=e+i*(o[0]-e),t[1]=r+i*(o[1]-r),t[2]=a+i*(o[2]-a),t}function R(t,n,o,i,e){return t[0]=n,t[1]=o,t[2]=i,t[3]=e,t}function x(t,n,o){let i=n[0],e=n[1],r=n[2],a=n[3],s=o[0],l=o[1],f=o[2],c=o[3];return t[0]=i*c+a*s+e*f-r*l,t[1]=e*c+a*l+r*s-i*f,t[2]=r*c+a*f+i*l-e*s,t[3]=a*c-i*s-e*l-r*f,t}function M(t,n,o,i){let e=Math.sin(n/2*Qn),r=Math.cos(n/2*Qn),a=Math.sin(o/2*Qn),s=Math.cos(o/2*Qn),l=Math.sin(i/2*Qn),f=Math.cos(i/2*Qn);return t[0]=e*s*f+r*a*l,t[1]=r*a*f-e*s*l,t[2]=r*s*l-e*a*f,t[3]=r*s*f+e*a*l,t}function F(t,n,o,i){let e,r,a,s,l,f=n[0],c=n[1],u=n[2],m=n[3],h=o[0],d=o[1],v=o[2],_=o[3];return r=f*h+c*d+u*v+m*_,r<0&&(r=-r,h=-h,d=-d,v=-v,_=-_),1-r>1e-6?(e=Math.acos(r),a=Math.sin(e),s=Math.sin((1-i)*e)/a,l=Math.sin(i*e)/a):(s=1-i,l=i),t[0]=s*f+l*h,t[1]=s*c+l*d,t[2]=s*u+l*v,t[3]=s*m+l*_,t}function E(t,n,o,i=[.9,.9,.9,1]){return(e,r)=>{e.o.l[r]|=8,e.o.P[r]={I:0,S:{I:0,k:t,N:n,B:o,S:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],D:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},V:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],L:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],W:[0,0,0],$:i}}}function b(t,n,o,i,e=[0,0,0,1]){return(r,a)=>{r.o.l[a]|=8,r.o.P[a]={I:3,g:t,S:{I:1,H:n,N:o,B:i,S:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],D:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},V:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],L:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],W:[0,0,0],$:e}}}function I(...n){return(o,i)=>{let e=[];for(let i of n){let n=t(o,i);e.push(n)}o.o.l[i]|=16,o.o.U[i]={U:e}}}function*A(t,n,o){if((t.l[n]&o)===o&&(yield n),16&t.l[n])for(let i of t.U[n].U)yield*A(t,i,o)}function K(t,n){if(16&t.l[n])for(let o of t.U[n].U)K(t,o);t.X(n)}function C(t=[0,0,0],n=[0,0,0,1],o=[1,1,1]){return(i,e)=>{i.o.l[e]|=1048576,i.o.G[e]={o:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],q:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],O:t,Y:n,J:o,Z:1}}}function*P(t,n,o){(t.l[n]&o)===o&&(yield n);let i=t.G[n].tt;void 0!==i&&(yield*P(t,i,o))}function S(t,n){return[I([C([0,0,5]),E(1,.1,15,n)])]}function k(t){return 1-(1-t)**4}function N(t){return t<.5?8*t**4:1-(-2*t+2)**4/2}function z(t){return(n,o)=>{let i={};for(let n in t){let{nt:o,m:e=7}=t[n],r=o[o.length-1].ot;i[n]={nt:o.map((t=>({...t}))),m:e,it:r,et:0}}n.o.l[o]|=1,n.o.rt[o]={at:i,st:i.i}}}function B(t,n){return(o,i)=>{o.o.l[i]|=4,o.o.lt[i]={ft:t,Z:void 0===n,ct:n||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}}}function D(t){return(n,o)=>{n.o.l[o]|=256,n.o.ut[o]={ht:t}}}function V(t,n,o){return(i,e)=>{if(!Zn.has(n)){let o=i.dt.createVertexArray();i.dt.bindVertexArray(o),i.dt.bindBuffer(Ln,n.vt),i.dt.enableVertexAttribArray(t.gt._t),i.dt.vertexAttribPointer(t.gt._t,3,Gn,0,0,0),i.dt.bindBuffer(Ln,n.wt),i.dt.enableVertexAttribArray(t.gt.yt),i.dt.vertexAttribPointer(t.gt.yt,3,Gn,0,0,0),i.dt.bindBuffer(jn,n.Tt),i.dt.bindVertexArray(null),Zn.set(n,o)}i.o.l[e]|=32768,i.o.Rt[e]={I:1,xt:t,Mt:n,Ft:Zn.get(n),Et:o}}}function L(t,n,o){return(i,e)=>{if(!to.has(n)){let o=i.dt.createVertexArray();i.dt.bindVertexArray(o),i.dt.bindBuffer(Ln,n.vt),i.dt.enableVertexAttribArray(t.gt._t),i.dt.vertexAttribPointer(t.gt._t,3,Gn,0,0,0),i.dt.bindBuffer(Ln,n.wt),i.dt.enableVertexAttribArray(t.gt.yt),i.dt.vertexAttribPointer(t.gt.yt,3,Gn,0,0,0),i.dt.bindBuffer(Ln,n.bt),i.dt.enableVertexAttribArray(t.gt.It),i.dt.vertexAttribPointer(t.gt.It,4,Gn,0,0,0),i.dt.bindBuffer(jn,n.Tt),i.dt.bindVertexArray(null),to.set(n,o)}i.o.l[e]|=32768,i.o.Rt[e]={I:2,xt:t,Mt:n,Ft:to.get(n),Et:o}}}function j(t,n,o,i){return(e,r)=>{let a=e.dt.createBuffer();e.dt.bindBuffer(Ln,a),e.dt.bufferData(Ln,6400,35048),e.o.l[r]|=32768,e.o.Rt[r]={I:3,xt:e.At,Kt:a,Ct:t,Pt:o,St:[n,i]}}}function W(t,n=[1,.5,0,1],o=1){return[L(t.kt,t.Nt,n),I([C([0,.35,-.47],[.672,0,0,.74]),I([C(),i(1===o?"ta":""),B(0,[1,0,0,0,0,.096,-.995,0,0,.995,.096,0,0,.433,.395,1]),D(1),z({i:{nt:[{ot:0,O:[0,0,0],Y:[0,0,0,1]},{ot:9*o,O:[0,0,0],Y:[0,0,0,1]},{ot:10*o,O:[0,-.044,.289],Y:[-.288,0,0,.958],zt:N},{ot:15*o,O:[0,-.044,.289],Y:[-.288,0,0,.958]},{ot:16*o,O:[0,0,0],Y:[0,0,0,1],zt:N}],m:3},w:{nt:[{ot:0,O:[0,0,0],Y:[0,0,0,1]}],m:5},j:{nt:[{ot:0,O:[0,0,0],Y:[0,0,0,1]},{ot:no*o,O:[0,0,0],Y:[-.131,0,0,.991],zt:k},{ot:oo*o,O:[0,0,0],Y:[.087,0,0,.996]},{ot:1*o,O:[0,0,0],Y:[0,0,0,1],zt:k}],m:1}}),I([C([0,.46,0],[-.4,0,0,.92]),I([C(),D(1),z({i:{nt:[{ot:0,Y:[0,0,0,1]},{ot:9*o,Y:[0,0,0,1]},{ot:10*o,Y:[.371,0,0,.929],zt:N},{ot:15*o,Y:[.371,0,0,.929]},{ot:16*o,Y:[0,0,0,1],zt:N}],m:3},w:{nt:[{ot:0,Y:[0,0,0,1]}],m:5},j:{nt:[{ot:0,Y:[0,0,0,1]}],m:1}}),I([C(),B(1,[1,0,0,0,0,.795,-.606,0,0,.606,.795,0,0,-.306,.251,1]),D(1),z({i:{nt:[{ot:0,Y:[0,.088,.116,.989],zt:N},{ot:1*o,Y:[0,-.088,-.116,.989],zt:N}]},w:{nt:[{ot:0,Y:[.087,0,0,.996]},{ot:.2*o,Y:[0,0,0,1]}],m:5},j:{nt:[{ot:0,Y:[0,0,0,1]},{ot:no*o,Y:[.216,0,0,.976],zt:k},{ot:oo*o,Y:[.216,0,0,.976]},{ot:1*o,Y:[0,0,0,1],zt:k}],m:1}})])])],[C([.07,.46,0],[.74,0,0,.672]),I([C(),B(2,[1,0,0,0,0,-1,0,0,0,-0,-1,0,-.073,.395,-.015,1]),D(1),z({i:{nt:[{ot:0,Y:[0,0,0,1]}]},w:{nt:[{ot:0,Y:[-.174,0,0,.985]},{ot:.2*o,Y:[.131,0,0,.991]}],m:5},j:{nt:[{ot:0,Y:[0,0,0,1]},{ot:no*o,Y:[-.259,0,0,.966],zt:k},{ot:oo*o,Y:[-.259,0,0,.966]},{ot:1*o,Y:[0,0,0,1],zt:k}],m:1}})])],[C([-.07,.46,0],[.74,0,0,.672]),I([C(),B(3,[1,0,0,0,0,-1,0,0,0,-0,-1,0,.073,.395,-.015,1]),D(1),z({i:{nt:[{ot:0,Y:[0,0,0,1]}]},w:{nt:[{ot:0,Y:[.131,0,0,.991]},{ot:.2*o,Y:[-.174,0,0,.985]}],m:5},j:{nt:[{ot:0,Y:[0,0,0,1]},{ot:no*o,Y:[-.301,0,0,.954],zt:k},{ot:oo*o,Y:[-.301,0,0,.954]},{ot:1*o,Y:[0,0,0,1],zt:k}],m:1}})])],[C([.07,0,0],[.753,0,0,.658]),I([C(),B(4,[1,0,0,0,0,-.992,.124,0,0,-.124,-.992,0,-.073,.291,-.509,1]),D(1),z({i:{nt:[{ot:0,Y:[0,0,0,1]},{ot:9*o,Y:[0,0,0,1]},{ot:10*o,Y:[-.492,0,0,.87],zt:N},{ot:15*o,Y:[-.492,0,0,.87]},{ot:16*o,Y:[0,0,0,1],zt:N}],m:3},w:{nt:[{ot:0,Y:[.131,0,0,.991]},{ot:.2*o,Y:[-.131,0,0,.991]}],m:5},j:{nt:[{ot:0,Y:[0,0,0,1]},{ot:no*o,Y:[.383,0,0,.924],zt:k},{ot:oo*o,Y:[.383,0,0,.924]},{ot:1*o,Y:[0,0,0,1],zt:k}],m:1}})])],[C([-.07,0,0],[.753,0,0,.658]),I([C(),B(5,[1,0,0,0,0,-.992,.124,0,0,-.124,-.992,0,.073,.291,-.509,1]),D(1),z({i:{nt:[{ot:0,Y:[0,0,0,1]},{ot:9*o,Y:[0,0,0,1]},{ot:10*o,Y:[-.468,0,0,.884],zt:N},{ot:15*o,Y:[-.468,0,0,.884]},{ot:16*o,Y:[0,0,0,1],zt:N}],m:3},w:{nt:[{ot:0,Y:[-.131,0,0,.991]},{ot:.2*o,Y:[.131,0,0,.991]}],m:5},j:{nt:[{ot:0,Y:[0,0,0,1]},{ot:no*o,Y:[.301,0,0,.954],zt:k},{ot:oo*o,Y:[.301,0,0,.954]},{ot:1*o,Y:[0,0,0,1],zt:k}],m:1}})])])])])]}function $(t,n,o){return(i,e)=>{i.o.l[e]|=512,i.o.Bt[e]={Dt:t,Vt:n,Lt:o,jt:[],Wt:0}}}function H(t){return(n,o)=>{n.o.l[o]|=2048,n.o.$t[o]={Ht:t**2}}}function U(t){return(n,o)=>{n.o.l[o]|=131072,n.o.Ut[o]={Xt:t}}}function X(t){return[o(e(t.o,"wa"),.02),H(1.5),I([C(),U(.1),$(1,.1,.1),j([1,1,1,1],8,[.5,.5,1,1],1)]),a(7,(n=>{t.o.p[n].g=e(t.o,"exit")}))]}function G(t){return(n,o)=>{n.o.l[o]|=2,n.o.Gt[o]={qt:t,et:0}}}function q(t){return(n,o)=>{t(n,o)}}function O(t,n,o,i=[1,1,1]){return(e,r)=>{e.o.l[r]|=32,e.o.Ot[r]={Yt:r,Jt:1,Qt:t,Zt:n,l:o,St:i,tn:[0,0,0],nn:[0,0,0],on:[0,0,0],en:[0,0,0],rn:[]}}}function Y(t,n,o){return(i,e)=>{i.o.l[e]|=64,i.o.an[e]={sn:t,Y:n,ln:o}}}function J(t,n){return(o,i)=>{o.o.l[i]|=8192,o.o.fn[i]={cn:t,un:n,mn:[],hn:[]}}}function Q(t,n=.5){return(o,i)=>{o.o.l[i]|=65536,o.o.dn[i]={I:t,vn:n,_n:[0,0,0],pn:[0,0,0],gn:[0,0,0],wn:0}}}function Z(r){let a=t(r,[G(),n(1),J(3,0),O(1,1,6,[.6,.8,.8]),Q(1,0),I([i("ma"),C([0,-.42,0],[0,.71,0,.71]),n(2),I([C([0,.5,1],void 0,[.1,.1,.1]),O(1,0,4),n(8)])],[i("pa 0"),C([0,-.42,.2],[0,.71,0,.71]),n(2)],[i("pa 1"),C([-.2,-.42,.2],[0,.71,0,.71]),n(2)],[i("pa 2"),C([-.4,-.42,.2],[0,.71,0,.71]),n(2)],[i("ca"),C([.5,.5,0],M([0,0,0,1],-10,0,0))],[i("sa"),C()],[i("wa"),C([4,1,0],[0,.71,0,.71])]),C()]),s=0,l=0,f=0;t(r,[C([-10,0,.5]),o(e(r.o,"ma"),.2),I([...W(r),C(),n(4)],[C(),L(r.kt,r.yn,[1,.5,0,1])])]),t(r,[C(),o(e(r.o,"ta"),1),I([C([0,-.2,-.05],[1,0,0,0]),Y(null,[0,-1,0,0]),J(0,1),q(((t,n)=>s=n)),B(0,[1,-0,-0,0,0,0,1,0,0,-1,0,0,-0,-.701,-.428,1])])]),t(r,[C(),o(s,.08),B(1,[1,-0,-0,0,0,.132,.991,0,0,-.991,.132,0,-0,-1.1,-.285,1]),I([C([0,.2,.1]),q(((t,n)=>l=n))])]),t(r,[C(),o(l,.06),B(2,[1,-0,-0,0,0,0,1,0,0,-1,0,0,-0,-1.492,-.487,1]),I([C([0,.2,.1]),q(((t,n)=>f=n))])]),t(r,[C(),o(f,.04),B(3,[-1,-0,-0,0,0,.137,-.991,0,0,-.991,-.137,0,-0,-2.009,.214,1]),I([C([0,.2,.1]),q(((t,n)=>n))])]);for(let i=0;i<r.Tn;i++)t(r,[C(),o(e(r.o,"pa "+i),.2-.02*i),I([...W(r,[1,.5,0,1],.7+.1*i),C(void 0,void 0,[.3,.3,.3]),n(4)])]);return a}function tt(){return io=16807*io%2147483647,(io-1)/2147483646}function nt(t=0,n=1){return tt()*(n-t)+t}function ot(t){return t[function(t=0,n=1){return~~(tt()*(n-t+1)+t)}(0,t.length-1)]}function it(t,n){return(n,o)=>{n.o.l[o]|=1024,n.o.Dt[o]={C:t}}}function et(t){return[I([C([0,3.5,0],[0,-.71,0,.71],[1,7,1]),D(32768),V(t.Rn,t.xn,[1,1,1,1])],[C([0,7.8,0],[0,-.71,0,.71],[.8,1.6,.8]),D(32768),V(t.Rn,t.xn,[1,1,1,1])],[C([0,9.4,0],[0,-.71,0,.71],[.56,1.6,.56]),D(32768),V(t.Rn,t.xn,[1,1,1,1])],[C([0,10.2,0],[-.5,-.5,.5,.5],[1.72,.51,.59]),D(32768),V(t.Rn,t.xn,[1,1,1,1])],[C([0,8.6,0],[-.5,-.5,.5,.5],[1.12,.44,.8]),D(32768),V(t.Rn,t.xn,[0,0,0,1])],[C([0,7,0],[-.5,-.5,.5,.5],[2.61,.77,.9]),D(32768),V(t.Rn,t.xn,[0,0,0,1])])]}function rt(t){return[Y([0,0,1],null),J(nt(1,3),0),it(25),I([C(void 0,M([0,0,0,1],0,-90,-90),[.1,.1,.1]),...et(t)],[C(void 0,[0,1,0,0]),U(.02),$(1,.01,1),j([1,.5,0,1],10,[.56,.33,.24,1],2)])]}function at(t){return(n,o)=>{n.o.l[o]&=~t}}function st(t,n){return(o,i)=>{o.o.l[i]|=262144,o.o.Mn[i]={Fn:t,En:n,Wt:n}}}function lt(t){return'\n<div\nstyle="\nmargin: 40vh -1vw 0;\nfont-size: 16vw;\nfont-weight: 600;\n"\n>\nESCAPE\n</div>\n<div>\nEarth can no longer support life.<br>\nHumans are leaving.<br><br>\n<em onclick="$(1)">Play Now</em>\n</div>\n'}function ft(t){return""}function ct(t){return'\n<div\nstyle="\nmargin: 20vh -1vw 0;\nfont-size: 12vw;\nfont-weight: 600;\n"\n>\nTHE END\n</div>\n<div>\nNot all of us will make it.<br>\nStop climate change now.<br>\n</div>\n'}function ut(t,n,o=0){for(let i=o;i<t.l.length;i++)if((t.l[i]&n)===n)return i}function mt(t){return[I([C([10,10,10]),H(.9)])]}function ht(t){return[o(e(t.o,"sa"),.01),I([C([10,10,-10],M([0,0,0,1],-35,135,0)),b(t.In.bn,8,1,100),H(.6)])]}function dt(t,n){return[O(0,18,0),Q(0),V(t.Rn,t.An,n)]}function vt(t){let n=nt(.5,.9),o=new Float32Array(9600);for(let t=0;t<600;t++){let i=[nt(-n,n),nt(-n,n),nt(-n,n)],e=M([0,0,0,1],nt(-90,90),nt(-90,90),nt(-90,90));c(new Float32Array(o.buffer,64*t,16),e,i,[1,1,1])}return[D(32768),(i=t.Kn,e=o,(t,n)=>{let o=t.Cn,r=t.dt.createVertexArray();t.dt.bindVertexArray(r),t.dt.bindBuffer(Ln,i.vt),t.dt.enableVertexAttribArray(o.gt._t),t.dt.vertexAttribPointer(o.gt._t,3,Gn,0,0,0);let a=t.dt.createBuffer();t.dt.bindBuffer(Ln,a),t.dt.bufferData(Ln,e,Vn),t.dt.enableVertexAttribArray(o.gt.Pn),t.dt.vertexAttribPointer(o.gt.Pn,3,Gn,0,64,0),t.dt.vertexAttribDivisor(o.gt.Pn,1),t.dt.enableVertexAttribArray(o.gt.Sn),t.dt.vertexAttribPointer(o.gt.Sn,3,Gn,0,64,16),t.dt.vertexAttribDivisor(o.gt.Sn,1),t.dt.enableVertexAttribArray(o.gt.kn),t.dt.vertexAttribPointer(o.gt.kn,3,Gn,0,64,32),t.dt.vertexAttribDivisor(o.gt.kn,1),t.dt.enableVertexAttribArray(o.gt.Nn),t.dt.vertexAttribPointer(o.gt.Nn,3,Gn,0,64,48),t.dt.vertexAttribDivisor(o.gt.Nn,1),t.dt.bindBuffer(jn,i.Tt),t.dt.bindVertexArray(null),t.o.l[n]|=32768,t.o.Rt[n]={I:4,xt:o,Mt:i,Ft:r,zn:e.length/16,Bn:a}})];var i,e}function _t(t,n=2,o=4){let i=nt(n,o);return[I([C([0,i/2,0],void 0,[.25,i,.25]),D(32768),V(t.Rn,t.xn,[.8,.2,.2,1])],[C([0,i,0]),D(32768),...vt(t)])]}function pt(t){return[I([C(),D(32768),V(t.Rn,t.An,[.34,.17,.04,1])],[C([.17,.62,0],[0,0,.57,.82],[.04,.7,1]),D(32768),V(t.Rn,t.An,[.34,.17,.04,1])],[C([-.29,.54,0],[0,0,-.64,.77],[.04,.42,1]),D(32768),V(t.Rn,t.An,[.34,.17,.04,1])])]}function gt(t){return[O(1,36,6),Q(1),o(0),at(4096),...pt(t)]}function wt(t){return[D(32768),V(t.Rn,t.xn,[.8,.2,.2,1])]}function yt(t){return[I([C(),O(0,34,0),Q(0),...wt(t)])]}function Tt(t){return[i("pup"),G(),I([C(void 0,void 0,[.3,.3,.3]),...W(t)])]}function Rt(t){return[O(0,2,1,[1,100,1]),r((n=>t.o.Ot[n].rn.length>0),(n=>{Ht(t,2)})),I([C([0,1,0]),i("exit")])]}function xt(t){return nt()<.3?[Y([0,0,1],null,"w"),J(nt(1,1.2),0),it(100),I([C(void 0,void 0,[2,2,2]),D(32784),...W(t,ot(lo),3)])]:[Y([0,0,1],null,"j"),J(nt(3,3.2),0),it(30),I([C(void 0,void 0,[.5,.5,1]),D(32784),...W(t,ot(lo),.8)])]}function Mt(t){return[Y([0,0,1],null,"w"),J(1,0),it(10),L(t.kt,t.Kn,[.1,.2,.3,1]),I([C(),I([C(),B(0,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),z({i:{nt:[{ot:0,O:[0,0,0]}]},w:{nt:[{ot:0,O:[0,-.05,0]},{ot:.6,O:[0,.01,0]}]}}),I([C(void 0,[0,0,-.628,.778]),I([C(),B(1,[.124,.992,0,0,-.992,.124,-0,0,-0,-0,1,0,-0,-0,-0,1]),z({i:{nt:[{ot:0,Y:[0,0,0,1]}]},w:{nt:[{ot:0,Y:[0,0,.044,.999]},{ot:.6,Y:[0,0,-.342,.94]}]}})])],[C(void 0,[0,0,.628,.778]),I([C(),B(2,[.124,-.992,-0,0,.992,.124,-0,0,0,-0,1,0,0,-0,-0,1]),z({i:{nt:[{ot:0,Y:[0,0,0,1]}]},w:{nt:[{ot:0,Y:[0,0,-.044,.999]},{ot:.6,Y:[0,0,.342,.94]}]}})])])])])]}function Ft(t){return[O(0,2,0,[1,4,1]),Q(0),I([C(void 0,M([0,0,0,1],-90,0,0)),$(2,.05,1),j([1,1,0,1],50,[1,0,0,1],10),U(.5),D(164352)])]}function Et(n,o=[82/255,39/255,5/255,1]){t(n,[C([46,-2,-5.6],[0,.71,0,.71],[20,4,105]),...dt(n,o)]),t(n,[C([82.72,-.34,-1.53],void 0,[10,8,10]),..._t(n)]),t(n,[C([-5,-1,2],void 0,[20,4,20]),..._t(n)]),t(n,[C([48.2,.75,0]),...gt(n)]),t(n,[C([78.71,-.58,-1.75],void 0,[10,4,10]),..._t(n)]),t(n,[C([78.04,1.94,.62],[.71,-.05,.05,.71],[.5,4,.5]),...yt(n)]),t(n,[C([79.14,2.67,.01],[.71,.01,-.01,.71],[.5,2,.5]),...yt(n)]),t(n,[C([81.71,3.85,.04],[.5,.5,-.5,.5],[.5,4,.5]),...yt(n)]);{let o=105,i=8,e=47,r=-6,a=e-~~(o/2),s=e+~~(o/2),l=r-~~(i/2),f=r+~~(i/2),c=~~(o*i/10*.8);for(let o=0;o<c;o++)t(n,[C([nt(a,s),-3.25,nt(l,f)],void 0,[10,5,10]),...ot([_t(n),vt(n)])])}t(n,[C([25,.25,0],[.71,0,0,.71],[1,4,1]),...yt(n)]),t(n,[C([26,.25,0],[.71,0,0,.71],[1,4,1]),...yt(n)]),t(n,[C([27,.25,0],[.71,0,0,.71],[1,4,1]),...yt(n)]),t(n,[C([26.5,.95,0],[.71,0,0,.71],[1,4,1]),...yt(n)]),t(n,[C([95,3.75,0]),...Rt(n)]),t(n,[C([95,3.75,0],[0,-.71,0,.71]),...Tt(n)]),t(n,[C([-4,.25,-6],[0,.71,0,.71]),st(xt,1)]),t(n,[C([74,2.25,-2],[.01,.76,.12,.64]),I([C(),U(1),st(Mt,.5),D(393216)])]),t(n,[C([-2.5,-.25,0],void 0,[2,2,2]),...Ft()]),t(n,[C([50,.75,-1]),...gt(n)]),t(n,[C([45,.75,3]),...gt(n)]),t(n,[C([51,.75,3]),...gt(n)]),t(n,[C([47,.75,2]),...gt(n)]),t(n,[C([48,1.75,-.1]),...gt(n)]),t(n,[C([48.2,2.75,0]),...gt(n)]),t(n,[C([91,1.75,.6],void 0,[14,4,7.5]),...dt(n,o)]),t(n,[C([-4,3.25,-2],[.01,.76,.12,.64]),I([C(),U(1),st(Mt,.5),D(393216)])]),t(n,[C([80,.75,0]),...gt(n)]),t(n,[...mt(),C()]),t(n,[...ht(n),C()])}function bt(n){n.o=new so,n.Dn=1,t(n,[I([G(ro)],[G(eo)],[G(ao)])]);let s=t(n,[C([0,.5,-3]),i("ca")]),l=Z(n);n.o.l[l]&=-129,Et(n);let f=t(n,[C([0,26,-2],M([0,0,0,1],10,0,0),[17,10,1]),I([C(),U(.5),$(20,.1,0),j([1,1,1,1],5,[.5,.5,1,1],2)])]),c=t(n,[C([-5,20,-1],M([0,0,0,1],-45,110,0)),I([C(),U(3),st(rt,3)])]),u=t(n,[...S(0,[.4,.6,.4,1]),C([0,25,0],M([0,0,0,1],10,0,0)),o(e(n.o,"ca"),.02),at(4096)]),m=[t(n,[...W(n,[1,.5,0,1],.7),C([1,0,0],[0,.71,0,.71],[.3,.3,.3]),J(2.5,0)]),t(n,[...W(n,[1,.5,0,1],.8),C([.3,0,-.5],[0,.71,0,.71],[.3,.3,.3]),J(2.6,0)]),t(n,[...W(n,[1,.5,0,1],.9),C([-.2,0,.3],[0,.71,0,.71],[.3,.3,.3]),J(2.7,0)])];t(n,[r((()=>n.Vn===ft),(()=>{K(n.o,c),t(n,[I([a(1,(()=>{n.o.l[u]|=4096}))],[a(6,(()=>{for(let t of m)Y([0,0,1],null,"j")(n,t),it(7)(n,t)}))],[a(8,(()=>{K(n.o,f);let o=n.o.p[u];o.g=e(n.o,"ca",s+1),o.T=.05,t(n,[...X(n),C([-20,5,0])])}))],[a(9,(()=>{n.o.l[l]|=128}))])])}))])}function It(t){return[I([C([0,1,0],void 0,[3,2,3]),D(32768),V(t.Rn,t.An,[.41,0,0,1])],[C([0,2,.9],[.71,0,0,.71],[3,1.2,2.99]),D(32768),V(t.Rn,t.xn,[.41,0,0,1])],[C([-1.5,1,-1.5],void 0,[.1,2,.1]),D(32768),V(t.Rn,t.An,[.8,.8,.8,1])],[C([-1.5,1,1.5],void 0,[.1,2,.1]),D(32768),V(t.Rn,t.An,[.8,.8,.8,1])],[C([1.5,1,1.5],void 0,[.1,2,.1]),D(32768),V(t.Rn,t.An,[.8,.8,.8,1])],[C([0,2,1.49],void 0,[3.1,.1,.1]),D(32768),V(t.Rn,t.An,[.8,.8,.8,1])],[C([0,2,-1.5],void 0,[3.1,.1,.1]),D(32768),V(t.Rn,t.An,[.8,.8,.8,1])],[C([1.5,2,0],[0,.71,0,.71],[3.1,.1,.1]),D(32768),V(t.Rn,t.An,[.8,.8,.8,1])],[C([-1.5,2,0],[0,.71,0,.71],[3.1,.1,.1]),D(32768),V(t.Rn,t.An,[.8,.8,.8,1])],[C([-1.28,2.52,1.49],[0,0,.55,.84],[1.16,.1,.1]),D(32768),V(t.Rn,t.An,[.8,.8,.8,1])],[C([1.27,2.52,1.49],[0,0,-.55,.84],[1.16,.1,.1]),D(32768),V(t.Rn,t.An,[.8,.8,.8,1])],[C([.51,3.27,1.53],[0,0,-.19,.98],[1.16,.1,.1]),D(32768),V(t.Rn,t.An,[.8,.8,.8,1])],[C([0,1.5,1.6],void 0,[1.8,.1,.1]),D(32768),V(t.Rn,t.An,[.8,.8,.8,1])],[C([.85,.7,1.6],[0,0,-.71,.71],[1.5,.1,.1]),D(32768),V(t.Rn,t.An,[.8,.8,.8,1])],[C([-.85,.7,1.6],[0,0,-.71,.71],[1.5,.1,.1]),D(32768),V(t.Rn,t.An,[.8,.8,.8,1])],[C([0,.7,1.59],[0,0,-.38,.92],[2.2,.1,.1]),D(32768),V(t.Rn,t.An,[.8,.8,.8,1])],[C([0,.7,1.58],[0,0,.38,.92],[2.2,.1,.1]),D(32768),V(t.Rn,t.An,[.8,.8,.8,1])],[C([-1.25,2.52,-.01],[0,0,.55,.84],[1.16,.1,2.99]),D(32768),V(t.Rn,t.An,[.07,.07,.07,1])],[C([1.24,2.52,-.01],[0,0,-.55,.84],[1.16,.1,2.99]),D(32768),V(t.Rn,t.An,[.07,.07,.07,1])],[C([-.51,3.24,-.01],[0,0,.19,.98],[1.16,.1,2.99]),D(32768),V(t.Rn,t.An,[.07,.07,.07,1])])]}function At(t){return[I([C([0,.6,0],void 0,[.1,1.2,.1]),D(32768),V(t.Rn,t.An,[.8,.8,.8,1])],[C([0,1.21,.5],[.71,0,0,.71],[.1,2,.1]),D(32768),V(t.Rn,t.An,[.8,.8,.8,1])],[C([0,.6,1],void 0,[.1,1.2,.1]),D(32768),V(t.Rn,t.An,[.8,.8,.8,1])],[C([0,.8,.5],[.71,0,0,.71],[.1,2,.1]),D(32768),V(t.Rn,t.An,[.8,.8,.8,1])],[C([0,.4,.5],[.71,0,0,.71],[.1,2,.1]),D(32768),V(t.Rn,t.An,[.8,.8,.8,1])])]}function Kt(t){return[I([C([0,3,0],void 0,[2.5,6,2.5]),D(32768),V(t.Rn,t.xn,[.41,0,0,1])],[C([0,6,0],void 0,[2.6,.2,2.6]),D(32768),V(t.Rn,t.xn,[.8,.8,.8,1])],[C([0,3,0],void 0,[2.6,.2,2.6]),D(32768),V(t.Rn,t.xn,[.8,.8,.8,1])],[C([.53,3,1.6],void 0,[.4,6,.4]),D(32768),V(t.Rn,t.xn,[.8,.8,.8,1])])]}function Ct(t){return[I([C([0,4,0],void 0,[.5,8,.5]),D(32768),V(t.Rn,t.xn,[.12,.03,.01,1])],[C([0,7.41,-.25],void 0,[3,.45,.2]),D(32768),V(t.Rn,t.An,[.12,.03,.01,1])],[C([0,7.41,.25],void 0,[3,.45,.2]),D(32768),V(t.Rn,t.An,[.12,.03,.01,1])],[C([0,6.33,-.25],void 0,[3,.45,.2]),D(32768),V(t.Rn,t.An,[.12,.03,.01,1])],[C([1.3,6.7,-.25],void 0,[.2,.3,.2]),D(32768),V(t.Rn,t.xn,[.37,.37,.37,1])],[C([-.34,5.76,-.24],[0,0,-.38,.92],[1.2,.2,.05]),D(32768),V(t.Rn,t.An,[.37,.37,.37,1])],[C([-1,7.75,.25],void 0,[.2,.3,.2]),D(32768),V(t.Rn,t.xn,[.37,.37,.37,1])],[C([-1.3,7.75,.25],void 0,[.2,.3,.2]),D(32768),V(t.Rn,t.xn,[.37,.37,.37,1])])]}function Pt(t){return[I([C([0,.8,0],void 0,[4,1,2]),D(32768),V(t.Rn,t.An,[.8,.02,.02,1])],[C([1.28,.5,0],[.71,0,0,.71],[1,2.2,1]),D(32768),V(t.Rn,t.xn,[0,0,0,1])],[C([-1.1,.5,0],[.71,0,0,.71],[1,2.2,1]),D(32768),V(t.Rn,t.xn,[0,0,0,1])],[C([-.5,2,.9],void 0,[.2,1.4,.2]),D(32768),V(t.Rn,t.An,[.8,.02,.02,1])],[C([-.5,2,-.9],void 0,[.2,1.4,.2]),D(32768),V(t.Rn,t.An,[.8,.02,.02,1])],[C([1.9,2,.9],void 0,[.2,1.4,.2]),D(32768),V(t.Rn,t.An,[.8,.02,.02,1])],[C([1.9,2,-.9],void 0,[.2,1.4,.2]),D(32768),V(t.Rn,t.An,[.8,.02,.02,1])],[C([.7,2.8,0],void 0,[2.6,.2,2]),D(32768),V(t.Rn,t.An,[.8,.02,.02,1])],[C([-2,1,.6],[.5,.5,-.5,.5],[.4,.2,.4]),D(32768),V(t.Rn,t.xn,[.8,.78,.02,1])])]}function St(t){return[I([C(),...Ct(t)],[C([0,4,0],void 0,[.5,8,.5]),O(0,34,0),Q(0)])]}function kt(t){return[I([C(),...It(t)],[C([0,1,0],void 0,[3,2,3]),O(0,34,0),Q(0)])]}function Nt(t){return[I([C(),...At(t)],[C([0,.7,.5],void 0,[.1,1.2,2]),O(0,34,0),Q(0)])]}function zt(n){n.o=new so,n.Dn=1,Z(n),function(n,o=[82/255,39/255,5/255,1]){t(n,[C([5.4,-.5,.96],[0,.71,0,.71],[4,2,15]),...dt(n,o)]),t(n,[C([19.35,-2.5,.96],[0,.71,0,.71],[4,2,14]),...dt(n,o)]),t(n,[C([65,-.5,1],[0,.71,0,.71],[4,2,81.11]),...dt(n,o)]),t(n,[C([56.93,-1.5,-6.04],[0,.71,0,.71],[10,4,120]),...dt(n,o)]),t(n,[C([1.39,.5,-5.42],[0,.56,0,.83],[2,2,2]),...It(n)]),t(n,[C([-1,-.05,2.78],[.19,.68,-.19,.68]),...At(n)]),t(n,[C([7.95,.5,-5.44],[0,.17,0,.98]),...Kt(n)]),t(n,[C([12.46,.5,-7.56],[0,.71,0,.71]),...At(n)]),t(n,[C([14.46,.5,-7.56],[0,.71,0,.71]),...At(n)]),t(n,[C([16.46,.5,-7.56],[0,.71,0,.71]),...At(n)]),t(n,[C([19.23,.5,-6.94],void 0,[.8,.8,.8]),...It(n)]),t(n,[C([24.62,.36,-5.02],[0,.95,0,.31]),...Ct(n)]),t(n,[C([62.05,.5,-7.33],[0,.17,0,.98],[.6,.6,.6]),...Kt(n)]),t(n,[C([64.08,.5,-7.33],[0,.17,0,.98],[.6,.6,.6]),...Kt(n)]),t(n,[C([62.6,.58,-7]),...vt(n)]),t(n,[C([70.27,.36,-8.29],[0,.95,0,.31],[.7,.7,.7]),...Ct(n)]),t(n,[C([71.83,.5,-7.63],[0,-.44,0,.9],[.8,.8,.8]),...It(n)]),t(n,[C([11.78,.9,-6.81],[.68,.19,-.19,.68],[.4,.4,.4]),...Pt(n)]),t(n,[C([69.34,.5,-3.74],[0,.41,0,.91],[.5,.5,.5]),...At(n)]),t(n,[C([67.36,.5,-5.59],[0,.41,0,.91],[.5,.5,.5]),...At(n)]),t(n,[C([66.55,.5,-5.93],[0,.68,0,.74],[.5,.5,.5]),...At(n)]),t(n,[C([65.62,.5,-6.02],[0,.68,0,.74],[.5,.5,.5]),...At(n)]),t(n,[C([64.69,.5,-6.02],[0,.74,0,.67],[.5,.5,.5]),...At(n)]),t(n,[C([63.79,.5,-5.93],[0,.74,0,.67],[.5,.5,.5]),...At(n)]),t(n,[C([68.03,.5,-4.98],[0,.41,0,.91],[.5,.5,.5]),...At(n)]),t(n,[C([62.88,.5,-5.92],[0,.68,0,.74],[.5,.5,.5]),...At(n)]),t(n,[C([61.96,.5,-5.92],[0,.74,0,.67],[.5,.5,.5]),...At(n)]),t(n,[C([61.12,.5,-6.12],[0,.48,0,.88],[.5,.5,.5]),...At(n)]),t(n,[C([60.44,.5,-6.74],[0,.33,0,.94],[.5,.5,.5]),...At(n)]),t(n,[C([60.09,.5,-7.58],[0,.05,0,1],[.5,.5,.5]),...At(n)]),t(n,[C([60.01,.5,-8.53],[0,.05,0,1],[.5,.5,.5]),...At(n)]),t(n,[C([68.41,.29,-4.19],[.15,.38,-.33,.85],[.5,.5,.5]),...At(n)]),t(n,[C([29.08,.33,-4.94]),...vt(n)]),t(n,[C([-.16,.61,2.62]),...vt(n)]),t(n,[C([25.37,.23,0],[-.67,.67,.22,.22],[.75,.75,.75]),...St(n)]),t(n,[C([23.23,-.71,.06]),...gt(n)]),t(n,[C([25.09,.4,2.79]),..._t(n)]),t(n,[C([9.21,.61,2.53]),...vt(n)]),t(n,[C([28.97,.5,-7.56],[0,.71,0,.71]),...At(n)]),t(n,[C([31.74,.5,-6.94],void 0,[.8,.8,.8]),...It(n)]),t(n,[C([30.97,.5,-7.56],[0,.71,0,.71]),...At(n)]),t(n,[C([38.09,.36,-7.73],[0,.95,0,.31]),...Ct(n)]),t(n,[C([21,.5,-7.56],[0,.71,0,.71]),...At(n)]),t(n,[C([23,.5,-7.56],[0,.71,0,.71]),...At(n)]),t(n,[C([19.82,-.54,-1.78],void 0,[2,2,2]),...vt(n)]),t(n,[C([44.79,.5,-.19],[0,.71,0,.71],[2,2,2]),...kt(n)]),t(n,[C([41.23,3.45,.06]),...gt(n)]),t(n,[C([41.23,1.08,.06]),...gt(n)]),t(n,[C([41.23,2.27,.06]),...gt(n)]),t(n,[C([41.23,4.62,0]),...gt(n)]),t(n,[C([53.83,.36,-3.7],[0,.19,0,.98]),...Ct(n)]),t(n,[C([47.85,.33,2.41]),...vt(n)]),t(n,[C([58.3,-.05,2.69],[.19,.68,-.19,.68]),...At(n)]),t(n,[C([58.51,.61,2.53]),...vt(n)]),t(n,[C([72.23,.5,-1.57],[0,.17,0,.98]),...Kt(n)]),t(n,[C([71.01,3,.32],[.71,.71,0,0],[2,2,2]),...Nt(n)]),t(n,[C([78.08,.72,-3.38],[-.32,.63,.63,-.32],[.75,.75,.75]),...St(n)]),t(n,[C([77,1.98,0]),...gt(n)]),t(n,[C([72.16,4.57,.31]),...gt(n)]),t(n,[C([77.58,.78,2.87]),...vt(n)]),t(n,[C([-1.91,.5,-.22]),...Nt(n)]),t(n,[C([-1.91,.5,1.82]),...Nt(n)]),t(n,[C([84.66,.36,-2.18],[0,.95,0,.31]),...Ct(n)]),t(n,[C([90.59,.5,-6.21],[0,.71,0,.71]),...At(n)]),t(n,[C([92.59,.5,-6.21],[0,.71,0,.71]),...At(n)]),t(n,[C([94,.5,-5],void 0,[.8,.8,.8]),...It(n)]),t(n,[C([89.69,.5,-5.27],[0,1,0,0]),...At(n)]),t(n,[C([89.7,.5,-3.44],[0,1,0,0]),...At(n)]),t(n,[C([89.71,.5,-1.64],[0,1,0,0]),...At(n)]),t(n,[C([89.73,.5,.15],[0,1,0,0]),...Nt(n)]),t(n,[C([89.73,.5,2.07],[0,1,0,0]),...At(n)]),t(n,[C([89.71,1.64,-1.64],[0,1,0,0]),...At(n)]),t(n,[C([89.73,1.64,.15],[0,1,0,0]),...Nt(n)]),t(n,[C([89.73,1.64,2.07],[0,1,0,0]),...At(n)]),t(n,[C([95,.5,0]),...Rt(n)]),t(n,[C([95,.5,0],[0,-.71,0,.71]),...Tt(n)]),t(n,[C([0,.5,-8],[0,.71,0,.71]),st(xt,1)]),t(n,[C([13.82,-.54,-1.78],void 0,[2,2,2]),...vt(n)]),t(n,[...mt(),C()]),t(n,[...ht(n),C()])}(n),t(n,[...X(n),C([-20,5,0])]),t(n,[...S(0,[1,208/255,0,1]),C([0,10,10]),o(e(n.o,"ca"),.05)]),t(n,[I([G(ro)],[G(eo)],[G(fo)],[G(co)])])}function Bt(t){return[I([C([0,2.1,0],void 0,[4,.2,4]),D(32768),V(t.Rn,t.An,[.2,.2,.2,1])],[C([1.75,1,0],void 0,[.5,2,4]),D(32768),V(t.Rn,t.An,[.2,.2,.2,1])],[C([-.55,.55,-1.75],void 0,[1.9,1.1,.5]),D(32768),V(t.Rn,t.An,[.2,.2,.2,1])],[C([0,1.55,-1.75],void 0,[.8,.9,.5]),D(32768),V(t.Rn,t.An,[.2,.2,.2,1])],[C([-1.75,1,0],void 0,[.5,2,4]),D(32768),V(t.Rn,t.An,[.2,.2,.2,1])],[C([0,.55,1.75],void 0,[3,1.1,.5]),D(32768),V(t.Rn,t.An,[.2,.2,.2,1])],[C([0,1.55,1.75],void 0,[.8,.9,.5]),D(32768),V(t.Rn,t.An,[.2,.2,.2,1])])]}function Dt(t){return[I([C(),...Bt(t)],[C([0,0,0],void 0,[4,4.4,4]),O(0,34,0),Q(0)])]}function Vt(t){return[I([C(),...Pt(t)],[C([0,.8,0],void 0,[4,1,2]),O(0,66,0),Q(0)])]}function Lt(t){return[i("exit"),O(0,2,1,[1,100,1]),r((n=>t.o.Ot[n].rn.length>0),(n=>{Ht(t,3)}))]}function jt(t){return[i("launchpad"),Y([0,1,0],null),G(mo),it(25),at(1090),J(5,0),I([C(),U(.01),I([C([0,-30,0],void 0,[3,3,3]),...et(t)],[C([0,-30,0],[.71,0,0,.71]),I([C(),U(.1),$(2,.01,5),j([1,1,1,1],200,[1,.5,0,1],500)])])])]}function Wt(t){return[I([C(),...Bt(t)],[C([0,2.2,0],[0,1,0,0]),...Bt(t)],[C([0,4.4,0]),...Bt(t)])]}function $t(n){n.o=new so,n.Dn=1,Z(n),function(n,o=[82/255,39/255,5/255,1]){t(n,[C([87.04,1.52,.45],[0,.71,0,.71],[5,2,15]),...dt(n,o)]),t(n,[C([49.73,-1.5,-5.55],[0,.71,0,.71],[20,4,120]),...dt(n,o)]),t(n,[C([8.58,.72,.59]),...vt(n)]),t(n,[C([-1.27,.19,-3.2],void 0,[.5,.5,.5]),...vt(n)]),t(n,[C([27,.11,-5]),...Ct(n)]),t(n,[C([11,.5,0]),...Dt(n)]),t(n,[C([15,0,-3]),...Ct(n)]),t(n,[C([-3.95,.5,1.41],[0,.62,0,.78]),...Vt(n)]),t(n,[C([7.69,1,-.1],[-.15,.68,.7,.14],[.4,.4,.4]),...Vt(n)]),t(n,[C([15,0,3]),...Ct(n)]),t(n,[C([21.96,1,-2.35],[-.44,.55,.56,.43],[.4,.4,.4]),...Pt(n)]),t(n,[C([76.12,.24,3.71]),...Ct(n)]),t(n,[C([28,2,.5]),...gt(n)]),t(n,[C([44,0,-.2]),...Ct(n)]),t(n,[C([43.31,1,-3.57],[-.71,.06,.06,.7],[.4,.4,.4]),...Pt(n)]),t(n,[C([60.15,.56,-3.88],[0,-.73,0,.69]),...vt(n)]),t(n,[C([87,2.5,0]),...Rt(n)]),t(n,[C([87,2.5,0],[0,-.71,0,.71]),...Tt(n)]),t(n,[C([39,7,-2],[.01,.76,.12,.64]),I([C(),U(1),st(Mt,.5),D(393216)])]),t(n,[C([-7,.5,-5],[0,.71,0,.71]),st(xt,1)]);{let o=120,i=6,e=50,r=-5,a=e-~~(o/2),s=e+~~(o/2),l=r-~~(i/2),f=r+~~(i/2),c=~~(o*i/1*.3);for(let o=0;o<c;o++)t(n,[C([nt(a,s),0,nt(l,f)]),...ot([_t(n),vt(n)])])}t(n,[C([-2.6,.9,.6]),...Ft()]),t(n,[C([93,2.5,0]),...Lt(n)]),t(n,[C([95.97,1.5,.44]),...jt(n)]),t(n,[C([9,.5,-9],[0,.17,0,.98]),...Wt(n)]),t(n,[C([4,.5,-7],[0,.17,0,.98]),...Wt(n)]),t(n,[C([53.2,.5,-2.6]),...Wt(n)]),t(n,[C([82.26,-.31,-6.49]),...Wt(n)]),t(n,[C([77.26,-.31,-6.49]),...Wt(n)]),t(n,[C([57.6,.5,.7]),...Dt(n)]),t(n,[C([48.2,.5,-2.6]),...Wt(n)]),t(n,[C([38.2,.5,-2.6]),...Wt(n)]),t(n,[C([33.2,.5,-2.6]),...Wt(n)]),t(n,[C([41.2,.5,3],void 0,[1,1,.8]),...Wt(n)]),t(n,[C([23,.5,-9]),...Wt(n)]),t(n,[C([48.2,2.7,0],void 0,[4,.2,1.2]),...dt(n,o)]),t(n,[C([42.2,2.9,0],void 0,[5,.2,.2]),...dt(n,o)]),t(n,[C([33.2,5.1,0],void 0,[4,.2,1.2]),...dt(n,o)]),t(n,[C([38.2,2.7,0],void 0,[4,.2,1.2]),...dt(n,o)]),t(n,[C([36.3,3.4,0],void 0,[.2,1.2,1.2]),...dt(n,o)]),t(n,[C([31.3,5.5,.05],void 0,[.2,1,1.2]),...dt(n,o)]),t(n,[C([38.2,7,0],void 0,[4,.2,1.2]),...dt(n,o)]),t(n,[C([43.2,6.9,0],void 0,[5,.2,.2]),...dt(n,o)]),t(n,[C([48.2,7,0],void 0,[4,.2,1.2]),...dt(n,o)]),t(n,[C([54.2,7,0],void 0,[6,.2,1.2]),...dt(n,o)]),t(n,[C([32.61,6.41,0]),...gt(n)]),t(n,[C([57.6,6.9,.7],[0,.71,0,.71]),...Wt(n)]),t(n,[C([40.4,.9,3.6]),...Ft()]),t(n,[C([66,2,.5]),...gt(n)]),t(n,[C([57.6,4.8,.7],void 0,[4,4.2,4]),...dt(n,o)]),t(n,[C([52.4,6.9,-2.4]),...Ft()]),t(n,[...mt(),C()]),t(n,[...ht(n),C()])}(n,[.2,.2,.2,1]),t(n,[...X(n),C([-20,5,0])]),t(n,[...S(0,[145/255,85/255,61/255,1]),C([0,10,10]),o(e(n.o,"ca"),.05)]),t(n,[I([G(ro)],[G(eo)],[G(ao)],[G(fo)],[G(uo)])])}function Ht(i,r,s){switch(r){case 1:i.Audio.resume(),i.Vn=ft;break;case 2:{switch(i.Ln){case bt:case zt:t(i,[a(2,(()=>{requestAnimationFrame((()=>{i.Ln(i),i.Vn=ft}))}))])}switch(i.Ln){case bt:i.Ln=zt;break;case zt:i.Ln=$t}let r=e(i.o,"pup"),s=e(i.o,"pa "+i.Tn);i.o.Gt[r].jn=ho,o(s,.2)(i,r);let l=i.o.U[r].U[0];n(4)(i,l),i.Tn++;break}case 3:{for(let t=0;t<i.o.l.length;t++)i.o.l[t]&=-129;let n=e(i.o,"launchpad");i.o.l[n]|=1090,t(i,[a(2,(()=>{i.Vn=ct}))]);break}}}function Ut(t,n,o,i){return t.bindTexture(Hn,n),t.texImage2D(Hn,0,32856,o,i,0,6408,5121,null),t.texParameteri(Hn,10241,$n),t.texParameteri(Hn,10240,$n),n}function Xt(t,n,o,i){return t.bindTexture(Hn,n),t.texImage2D(Hn,0,33190,o,i,0,6402,5125,null),t.texParameteri(Hn,10241,$n),t.texParameteri(Hn,10240,$n),t.texParameteri(Hn,34892,34894),t.texParameteri(Hn,10242,33071),t.texParameteri(Hn,10243,33071),n}function Gt(t,n,o){let i={Wn:t.createFramebuffer(),$n:n,Hn:o,Un:Ut(t,t.createTexture(),n,o),Xn:Xt(t,t.createTexture(),n,o)};t.bindFramebuffer(Un,i.Wn),t.framebufferTexture2D(Un,36096,Hn,i.Xn,0),t.framebufferTexture2D(Un,36064,Hn,i.Un,0);let e=t.checkFramebufferStatus(Un);if(36053!=e)throw Error(`Failed to set up the framebuffer (${e}).`);return i}function qt(t,n,o){let i=t.createProgram();if(t.attachShader(i,Ot(t,35633,n)),t.attachShader(i,Ot(t,35632,o)),t.linkProgram(i),!t.getProgramParameter(i,35714))throw Error(t.getProgramInfoLog(i));return i}function Ot(t,n,o){let i=t.createShader(n);if(t.shaderSource(i,o),t.compileShader(i),!t.getShaderParameter(i,35713))throw Error(t.getShaderInfoLog(i));return i}function Yt(t,n,o){let i=t.o.G[n],e=t.o.rt[n];if(e.jn){let t=e.at[e.jn];t&&t!==e.st&&(0===e.st.et?e.st=t:1&e.st.m&&(e.st.et=0,e.st=t)),e.jn=void 0}let r=null,a=null;for(let t of e.st.nt){if(e.st.et<t.ot){a=t;break}r=t}if(r&&a){let t=(e.st.et-r.ot)/(a.ot-r.ot);a.zt&&(t=a.zt(t)),r.O&&a.O&&(T(i.O,r.O,a.O,t),i.Z=1),r.Y&&a.Y&&(F(i.Y,r.Y,a.Y,t),i.Z=1)}else r&&(r.O&&(d(i.O,r.O),i.Z=1),r.Y&&(function(t,n){t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3]}(i.Y,r.Y),i.Z=1));let s=e.st.et+o;if(s<e.st.it)e.st.et=s;else{if(e.st.et=0,4&e.st.m)for(let t of e.st.nt.reverse())t.ot=e.st.it-t.ot;2&e.st.m||(e.st=e.at.i)}}function Jt(t){if(!zo){zo=t.createBuffer(1,2*t.sampleRate,t.sampleRate);let n=zo.getChannelData(0);for(let t=0;t<n.length;t++)n[t]=2*Math.random()-1}return zo}function Qt(t,n,o){let i=t.o.Gt[n];i.st&&(i.et+=o,i.et>i.st.Gn&&(i.st=void 0)),i.jn&&!i.st&&(function(t,n){let o=ot(n.qn);o&&function(t,n,o,i){let e,r,a=t.currentTime+0,s=0,l=t.createGain();if(l.gain.value=(n[0]/9)**3,n[5]&&(r=t.createOscillator(),r.type=n[5],r.frequency.value=(n[7]/3)**3,e=t.createGain(),e.gain.value=(n[6]+3)**3,r.connect(e)),n[1]){let o=t.createBiquadFilter();o.type=n[1],o.frequency.value=2**n[2],o.Q.value=n[3]**1.5,e&&n[4]&&e.connect(o.detune),l.connect(o),o.connect(t.destination)}else l.connect(t.destination);for(let i of n[8]){let n=t.createGain();n.connect(l);let r=(i[1]/9)**3,f=(i[2]/9)**3,c=(i[3]/9)**3,u=f+c+(i[4]/6)**3;if(n.gain.setValueAtTime(0,a),n.gain.linearRampToValueAtTime(r,a+f),n.gain.setValueAtTime(r,a+f+c),n.gain.exponentialRampToValueAtTime(1e-5,a+u),i[0]){let r=t.createOscillator();r.type=i[0],r.connect(n),r.detune.value=3*(i[5]-7.5)**3,e&&i[6]&&e.connect(r.detune),r.frequency.setValueAtTime(440*2**((o-69)/12),a),r.start(a),r.stop(a+u)}else{let o=t.createBufferSource();o.buffer=Jt(t),o.loop=1,o.connect(n),o.start(a),o.stop(a+u)}u>s&&(s=u)}r&&(r.start(a),r.stop(a+s))}(t,n.On,o)}(t.Audio,i.jn),i.st=i.jn,i.et=0),i.jn=i.qt}function Zt(t,n){n>1?(u(t.S,t.k,n,t.N,t.B),l(t.D,t.S)):(u(t.S,t.k/n,n,t.N,t.B),l(t.D,t.S))}function tn(t){!function(t,n,o,i,e,r,a){let s=1/(e-o),l=1/(i-n),f=1/(r-a);t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*f,t[11]=0,t[12]=(e+o)*s,t[13]=(n+i)*l,t[14]=(a+r)*f,t[15]=1}(t.S,t.H,t.H,-t.H,-t.H,t.N,t.B),l(t.D,t.S)}function nn(t,n){let o,i,e,r,a,s;m(n.on,t),o=r=n.on[0],i=a=n.on[1],e=s=n.on[2];let l=[0,0,0];for(let f=0;f<8;f++){let c=Do[f];l[0]=c[0]*n.St[0],l[1]=c[1]*n.St[1],l[2]=c[2]*n.St[2],y(l,l,t),l[0]<o&&(o=l[0]),l[0]>r&&(r=l[0]),l[1]<i&&(i=l[1]),l[1]>a&&(a=l[1]),l[2]<e&&(e=l[2]),l[2]>s&&(s=l[2])}n.tn=[o,i,e],n.nn=[r,a,s],n.en[0]=(r-o)/2,n.en[1]=(a-i)/2,n.en[2]=(s-e)/2}function on(t,n){let o=t.on[0]-n.on[0],i=t.en[0]+n.en[0]-Math.abs(o),e=t.on[1]-n.on[1],r=t.en[1]+n.en[1]-Math.abs(e),a=t.on[2]-n.on[2],s=t.en[2]+n.en[2]-Math.abs(a);return i<r&&i<s?[i*Math.sign(o),0,0]:r<s?[0,r*Math.sign(e),0]:[0,0,s*Math.sign(a)]}function en(t,n){return t.tn[0]<n.nn[0]&&t.nn[0]>n.tn[0]&&t.tn[1]<n.nn[1]&&t.nn[1]>n.tn[1]&&t.tn[2]<n.nn[2]&&t.nn[2]>n.tn[2]}function rn(t,n,o){for(let i=0;i<o;i++){let o=n[i],e=t.l&o.Zt,r=o.l&t.Zt;if((e||r)&&en(t,o)){let n=on(t,o);e&&t.rn.push({Yn:o.Yt,Jn:n}),r&&o.rn.push({Yn:t.Yt,Jn:p([0,0,0],n)})}}}function an(t,n){let o=t.o.an[n],i=t.o.fn[n];if(o.sn&&i.mn.push(o.sn.slice()),o.Y&&i.hn.push(o.Y.slice()),o.ln)for(let i of A(t.o,n,1))t.o.rt[i].jn=o.ln}function sn(t,n){let o=t.o.u[n];if(1&o.m){let i=t.o.Ot[n],e=t.o.Gt[n];if(o.v&&i.rn.length>0){let n=t.o.Ot[i.rn[0].Yn].Zt;16&n?e.jn=jo:32&n?e.jn=Wo:64&n&&(e.jn=$o)}}if(4&o.m){let o,i=t.o.G[n].tt;if(void 0!==i){let n=t.o.G[t.o.p[i].g].tt;void 0!==n&&(t.o.u[n].v&&(o="w"),t.o.dn[n].wn&&(o="j"))}if(o)for(let i of A(t.o,n,1))t.o.rt[i].jn=o}}function ln(t,n){let o=t.o.u[n];if(1&o.m){let i=t.o.fn[n],e=t.o.dn[n];o.v=0,t.Qn.ArrowLeft&&(i.mn.push([-1,0,0]),o.v=1),t.Qn.ArrowRight&&(i.mn.push([1,0,0]),o.v=1),e.wn||t.Qn.ArrowUp&&(e._n[1]+=500)}if(2&o.m){let i=t.o.G[n];o._||(t.Qn.ArrowLeft&&o.h&&(o.h=0,R(i.Y,0,-.71,0,.71),i.Z=1),t.Qn.ArrowRight&&!o.h&&(o.h=1,R(i.Y,0,.71,0,.71),i.Z=1))}if(8&o.m){let i=t.o.Ot[n];if(t.Qn.Space&&!o._&&i.rn.length>0){let o=i.rn[0].Yn,e=t.o.p[o];for(let i of P(t.o,n,128))t.o.u[i]._=o;t.o.l[o]|=4096,e.g=n}if(-1===t.Zn.Space&&o._){t.o.l[o._]&=-4097;for(let o of P(t.o,n,128))t.o.u[o]._=null}}}function fn(t,n,o,i){let e=t.o.u[n];if(1&e.m){let a=t.o.fn[n];Math.abs(o)>.01&&(e.v=1,a.mn.push([(r=o,Math.max(-1,Math.min(1,r))),0,0]));let s=t.o.dn[n];s.wn||Math.abs(i)>.5&&(s._n[1]+=500)}var r;if(2&e.m){let i=t.o.G[n];e._||(o<0&&e.h&&(e.h=0,R(i.Y,0,-.71,0,.71),i.Z=1),o>0&&!e.h&&(e.h=1,R(i.Y,0,.71,0,.71),i.Z=1))}if(8&e.m){let o=t.o.Ot[n];if(1===t.Zn.Touch0&&Uo<.2&&!e._&&o.rn.length>0){let i=o.rn[0].Yn;for(let o of P(t.o,n,128))t.o.u[o]._=i;t.o.l[i]|=4096,t.o.p[i].g=n}if(-1===t.Zn.Touch0&&e._){t.o.l[e._]&=-4097;for(let o of P(t.o,n,128))t.o.u[o]._=null}}}function cn(t,n){let o=t.o.u[n];if(1&o.m){let i=t.o.fn[n],e=t.o.dn[n];Math.abs(t.Zn.pad0_axis_1)>.5&&(o.v=1,i.mn.push([t.Zn.pad0_axis_1,0,0])),e.wn||t.Qn.pad0_button_0&&(e._n[1]+=500)}if(2&o.m){let i=t.o.G[n];o._||(t.Zn.pad0_axis_1<-.5&&o.h&&(o.h=0,R(i.Y,0,-.71,0,.71),i.Z=1),t.Zn.pad0_axis_1>.5&&!o.h&&(o.h=1,R(i.Y,0,.71,0,.71),i.Z=1))}if(8&o.m){let i=t.o.Ot[n];if(t.Qn.pad0_button_7&&!o._&&i.rn.length>0){let o=i.rn[0].Yn,e=t.o.p[o];for(let i of P(t.o,n,128))t.o.u[i]._=o;t.o.l[o]|=4096,e.g=n}if(0===t.Qn.pad0_button_7&&o._){t.o.l[o._]&=-4097;for(let o of P(t.o,n,128))t.o.u[o]._=null}}}function un(t,n,o){let i=t.o.ut[n];Math.abs(t.o.G[n].o[12]-o)>15?t.o.l[n]&=~i.ht:t.o.l[n]|=i.ht}function mn(t,n,o){let i=t.o.Dt[n];i.C-=o,i.C<0&&K(t.o,n)}function hn(t,n,o){let i=t.o.$t[n];m(qo,t.o.G[n].o),i.Ht<1&&g(qo,qo),t.no[4*o+0]=qo[0],t.no[4*o+1]=qo[1],t.no[4*o+2]=qo[2],t.no[4*o+3]=i.Ht}function dn(t,n,o){let i=t.o.G[n],e=t.o.fn[n];if(e.mn.length){let t=e.mn.reduce(vn),n=Math.min(1,function(t){return Math.hypot(t[0],t[1],t[2])}(t));!function(t,n,o){!function(t,n,o){t[0]=n[0]-o[0],t[1]=n[1]-o[1],t[2]=n[2]-o[2]}(t,y([0,0,0],n,o),m([0,0,0],o))}(t,t,i.o),g(t,t),_(t,t,n*e.cn*o),v(i.O,i.O,t),i.Z=1,e.mn=[]}if(e.hn.length){let t=e.hn.reduce(_n);F(t,Jo,t,Math.min(1,e.un/Math.PI*o)),x(i.Y,t,i.Y),i.Z=1,e.hn=[]}}function vn(t,n){return v(t,t,n)}function _n(t,n){return x(t,t,n)}function pn(t,n,o){let i=t.o.Bt[n],e=t.o.G[n];var r,a;i.Wt+=o,i.Wt>i.Vt&&(i.Wt=0,m(Zo,e.o),(r=ti)[0]=(a=e.o)[8],r[1]=a[9],r[2]=a[10],g(r,r),i.jt.push(...Zo,0),i.jt.push(...ti,Math.random()));for(let t=0;t<i.jt.length;)i.jt[t+3]+=o,i.jt[t+3]>i.Dt?i.jt.splice(t,8):t+=8}function gn(t,n,o){let i=t.o.G[n],e=t.o.dn[n];if(1===e.I){d(e.pn,e.gn),_(e._n,e._n,o),v(e.pn,e.pn,e._n),e.pn[1]+=-20*o;let t=[0,0,0];_(t,e.pn,o),v(i.O,i.O,t),i.Z=1,(r=e._n)[0]=0,r[1]=0,r[2]=0}var r}function wn(t,n){let o=t.o.G[n],i=t.o.Ot[n],e=t.o.dn[n];if(1===e.I){e.wn=1;let n=0;for(let r=0;r<i.rn.length;r++){let a=i.rn[r];if(65536&t.o.l[a.Yn]){n=1,v(o.O,o.O,a.Jn),o.Z=1;let i=t.o.dn[a.Yn];switch(i.I){case 0:g(ii,a.Jn),_(ii,ii,-2*w(e.pn,ii)),v(e.gn,e.pn,ii);break;case 1:d(e.gn,i.pn)}_(e.gn,e.gn,e.vn),a.Jn[1]>0&&e.gn[1]<1&&(e.gn[1]=0,e.wn=0)}}n||d(e.gn,e.pn)}}function yn(t,n){let o=t.o.F[n];o.K&&o.K(n),t.o.l[n]&=-524289,0===t.o.l[n]&&t.o.X(n),delete t.o.F[n]}function Tn(t,n){t.dt.bindFramebuffer(Un,null),t.dt.viewport(0,0,t.oo,t.io),t.dt.clearColor(...n.$),t.dt.clear(16640),xn(t,n)}function Rn(t,n){t.dt.bindFramebuffer(Un,n.g.Wn),t.dt.viewport(0,0,n.g.$n,n.g.Hn),t.dt.clearColor(...n.$),t.dt.clear(16640),xn(t,n)}function xn(t,n){let o=null;for(let i=0;i<t.o.l.length;i++)if((t.o.l[i]&ri)===ri){let e=t.o.G[i],r=t.o.Rt[i];if(r.xt!==o)switch(o=r.xt,r.I){case 0:Mn(t,r.xt,n);break;case 1:En(t,r.xt,n);break;case 2:In(t,r.xt,n);break;case 3:Kn(t,r.xt,n);break;case 4:Pn(t,r.xt,n)}switch(r.I){case 0:Fn(t,e,r);break;case 1:bn(t,e,r);break;case 2:An(t,i,0,r);break;case 3:{let n=t.o.Bt[i];n.jt.length&&Cn(t,r,n);break}case 4:Sn(t,e,r)}}}function Mn(t,n,o){t.dt.enable(Wn),t.dt.useProgram(n.eo),t.dt.uniformMatrix4fv(n.gt.L,0,o.L)}function Fn(t,n,o){t.dt.uniformMatrix4fv(o.xt.gt.o,0,n.o),t.dt.uniform4fv(o.xt.gt.ro,o.ro),t.dt.bindVertexArray(o.Ft),t.dt.drawElements(o.xt.ao,o.Mt.so,Xn,0),t.dt.bindVertexArray(null)}function En(t,n,o){if(t.dt.enable(Wn),t.dt.useProgram(n.eo),t.dt.uniformMatrix4fv(n.gt.L,0,o.L),t.dt.uniform3fv(n.gt.lo,o.W),t.dt.uniform4fv(n.gt.no,t.no),t.dt.uniform4fv(n.gt.fo,o.$),3===o.I)t.dt.activeTexture(33984),t.dt.bindTexture(Hn,t.In.co.Xn),t.dt.uniform1i(n.gt.uo,0);else{t.dt.activeTexture(33984),t.dt.bindTexture(Hn,t.In.bn.Xn),t.dt.uniform1i(n.gt.uo,0);let o=ut(t.o,2056);o&&t.dt.uniformMatrix4fv(n.gt.mo,0,t.o.P[o].L)}}function bn(t,n,o){t.dt.uniformMatrix4fv(o.xt.gt.o,0,n.o),t.dt.uniformMatrix4fv(o.xt.gt.q,0,n.q),t.dt.uniform4fv(o.xt.gt.Et,o.Et),t.dt.bindVertexArray(o.Ft),t.dt.drawElements(o.xt.ao,o.Mt.so,Xn,0),t.dt.bindVertexArray(null)}function In(t,n,o){t.dt.enable(Wn),t.dt.useProgram(n.eo),t.dt.uniformMatrix4fv(n.gt.L,0,o.L),t.dt.uniform3fv(n.gt.lo,o.W),t.dt.uniform4fv(n.gt.no,t.no),t.dt.uniform4fv(n.gt.fo,o.$)}function An(t,n,o,i){t.dt.uniform4fv(i.xt.gt.Et,i.Et);let e=[];if(16&t.o.l[n])for(let o of A(t.o,n,1048580))e.push(o);else{let o=n;for(let n=0;n<4;n++){let n=ut(t.o,1048580,o);n&&(e.push(n),o=n+1)}}for(let n of e){let o=t.o.G[n],i=t.o.lt[n];f(ai.subarray(16*i.ft),o.o,i.ct)}t.dt.uniformMatrix4fv(i.xt.gt.ho,0,ai),t.dt.bindVertexArray(i.Ft),t.dt.drawElements(i.xt.ao,i.Mt.so,Xn,0),t.dt.bindVertexArray(null)}function Kn(t,n,o){t.dt.enable(Wn),t.dt.useProgram(n.eo),t.dt.uniformMatrix4fv(n.gt.L,0,o.L),t.dt.uniform3fv(n.gt.lo,o.W),t.dt.uniform4fv(n.gt.fo,o.$)}function Cn(t,n,o){t.dt.uniform4fv(n.xt.gt.Ct,n.Ct),t.dt.uniform4fv(n.xt.gt.Pt,n.Pt),t.dt.uniform4f(n.xt.gt.do,o.Dt,o.Lt,...n.St);let i=Float32Array.from(o.jt);t.dt.bindBuffer(Ln,n.Kt),t.dt.bufferSubData(Ln,0,i),t.dt.enableVertexAttribArray(n.xt.gt.vo),t.dt.vertexAttribPointer(n.xt.gt.vo,4,Gn,0,32,0),t.dt.enableVertexAttribArray(n.xt.gt.sn),t.dt.vertexAttribPointer(n.xt.gt.sn,3,Gn,0,32,16),t.dt.drawArrays(n.xt.ao,0,o.jt.length/8)}function Pn(t,n,o){t.dt.disable(Wn),t.dt.useProgram(n.eo),t.dt.uniformMatrix4fv(n.gt.L,0,o.L),t.dt.uniform3fv(n.gt.lo,o.W),t.dt.uniform4fv(n.gt.fo,o.$)}function Sn(t,n,o){t.dt.uniformMatrix4fv(o.xt.gt.o,0,n.o),t.dt.bindVertexArray(o.Ft),t.dt.drawElementsInstanced(o.xt.ao,o.Mt.so,Xn,0,Math.floor(o.zn*(t._o/4096))),t.dt.bindVertexArray(null)}function kn(t,n){let o=t.o.Ut[n],i=t.o.G[n];i.O=[Math.random()-.5,Math.random()-.5,Math.random()-.5],_(i.O,i.O,2*o.Xt),i.Z=1}function Nn(n,o,i){let e=n.o.Mn[o],r=2048/n._o;if(e.Wt+=i,e.Wt>e.En*r){e.Wt=0;let i=n.o.G[o],r=[0,0,0];m(r,i.o);let a=[0,0,0,0];h(a,i.o),t(n,[...e.Fn(n),C(r,a)])}}function zn(t,n){for(let n=0;n<t.o.l.length;n++)if((t.o.l[n]&fi)===fi){let o=t.o.G[n];o.Z&&Bn(t.o,n,o)}}function Bn(t,n,o){if(o.Z=0,c(o.o,o.Y,o.O,o.J),void 0!==o.tt&&f(o.o,t.G[o.tt].o,o.o),l(o.q,o.o),16&t.l[n]){let o=t.U[n];for(let i=0;i<o.U.length;i++){let e=o.U[i];if(1048576&t.l[e]){let o=t.G[e];o.tt=n,Bn(t,e,o)}}}}function Dn(t){return[I([C([0,1.5,0],void 0,[3,3,3]),D(32768),V(t.Rn,t.An,[.1,.1,.1,1])],[C([-2.25,2,0],void 0,[1.5,.1,3]),D(32768),V(t.Rn,t.An,[.07,.15,.8,1])],[C([-.8,.1,0],void 0,[4.9,.2,3.4]),D(32768),V(t.Rn,t.An,[.1,.1,.1,1])],[C([-2.8,1,0],void 0,[.1,2,.1]),D(32768),V(t.Rn,t.An,[.1,.1,.1,1])])]}const Vn=35044,Ln=34962,jn=34963,Wn=2884,$n=9729,Hn=3553,Un=36160,Xn=5123,Gn=5126,qn=document.getElementById("update"),On=document.getElementById("delta"),Yn=document.getElementById("fps"),Jn=1/60,Qn=Math.PI/180,Zn=new WeakMap,to=new WeakMap,no=.2,oo=.6;let io=1,eo={On:[3,"highpass",11,0,1,"sine",4,7,[["sine",8,2,8,5,8,1]]],qn:[79],Gn:19},ro={On:[5,"lowpass",8,0,0,0,8,8,[["sine",8,8,12,14,8,0],["triangle",6,7,12,15,15,0],[0,4,15,15,15]]],qn:[24,26,28,29,31,33,35,36,38,40],Gn:7},ao={On:[7,"lowpass",8,6,1,"sine",9,2,[[0,3,6,4,13]]],qn:[57],Gn:13};class so extends class{constructor(){this.l=[],this.po=[]}t(){return this.po.length>0?this.po.pop():this.l.push(0)-1}X(t){this.l[t]=0,this.po.push(t)}}{constructor(){super(...arguments),this.rt=[],this.Gt=[],this.lt=[],this.P=[],this.U=[],this.Ot=[],this.an=[],this.u=[],this.ut=[],this.Bt=[],this.Dt=[],this.$t=[],this.p=[],this.fn=[],this.R=[],this.Rt=[],this.dn=[],this.Ut=[],this.Mn=[],this.F=[],this.G=[]}}const lo=[[.1,.1,.1,1],[.2,.2,.2,1]];let fo={On:[7,"lowpass",10,6,1,"sine",8,2,[[0,3,4,2,9]]],qn:[57],Gn:23},co={On:[4,"lowpass",9,5,1,"sawtooth",7,9,[[0,7,3,3,7]]],qn:[57],Gn:9},uo={On:[5,"lowpass",4,0,1,"square",13,4,[["sine",5,4,7,11,8,0]]],qn:[61,63,66,68,70],Gn:3.5},mo={On:[8,"lowpass",9,8,0,0,8,8,[[0,8,15,15,15]]],qn:[77],Gn:99},ho={On:[5,"lowpass",8,0,0,0,8,8,[["sine",6,3,4,10,8,0],["triangle",6,3,4,11,10,0]]],qn:[78,80,82],Gn:99},vo=Float32Array.from([-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,-.5]),_o=Float32Array.from([-1,0,0,0,-1,0,0,0,1,-1,0,0,0,0,1,0,1,0,-1,0,0,0,-1,0,0,0,-1,-1,0,0,0,0,-1,0,1,0,0,-1,0,0,0,1,1,0,0,0,0,1,0,1,0,1,0,0,0,-1,0,0,0,-1,1,0,0,0,0,-1,0,1,0,1,0,0]),po=Float32Array.from([]),go=Uint16Array.from([16,5,22,5,11,22,1,12,7,12,18,7,2,4,13,4,15,13,14,17,20,17,23,20,19,21,8,21,10,8,6,9,0,9,3,0]),wo=Float32Array.from([0,-.5,-.5,0,.5,-.5,.35,-.5,-.35,.35,.5,-.35,.5,-.5,0,.5,.5,0,.35,-.5,.35,.35,.5,.35,-0,-.5,.5,-0,.5,.5,-.35,-.5,.35,-.35,.5,.35,-.5,-.5,-0,-.5,.5,-0,-.35,-.5,-.35,-.35,.5,-.35]),yo=Float32Array.from([0,-.63,-.78,0,.63,-.78,.55,-.63,-.55,.55,.63,-.55,.78,-.63,0,.78,.63,0,.55,-.63,.55,.55,.63,.55,0,-.63,.78,0,.63,.78,-.55,-.63,.55,-.55,.63,.55,-.78,-.63,0,-.78,.63,0,-.55,-.63,-.55,-.55,.63,-.55]),To=Float32Array.from([]),Ro=Uint16Array.from([14,10,6,6,2,14,14,12,10,10,8,6,6,4,2,2,0,14,0,1,14,1,15,14,14,15,12,15,13,12,5,9,13,13,1,5,5,7,9,9,11,13,13,15,1,1,3,5,12,13,10,13,11,10,10,11,8,11,9,8,8,9,6,9,7,6,6,7,4,7,5,4,4,5,2,5,3,2,2,3,0,3,1,0]),xo=Float32Array.from([-.2,0,0,0,0,.1,-0,0,-.1,.2,0,-0]),Mo=Float32Array.from([.1,1,0,-0,1,0,-0,1,0,-.1,1,0]),Fo=Float32Array.from([2,1,0,0,0,1,0,0,0,1,0,0,1,1,0,0]),Eo=Uint16Array.from([2,3,1,0,2,1]),bo=Float32Array.from([.1,.4,0,.1,-0,-0,.1,.2,-.3,.1,.4,-.6,.1,-0,-.5,.1,.7,.2,.2,.9,.1,-.1,.4,0,0,.5,-0,0,.2,-0,-.1,-0,-0,-.1,.2,-.3,0,.2,-.5,-.1,.4,-.6,0,.4,-.6,-.1,-0,-.5,-.1,.7,.2,0,.6,.4,-.2,.9,.1,0,.7,.2]),Io=Float32Array.from([1,0,.1,-0,-1,.3,.8,-.6,-.1,.7,.4,-.6,0,-1,-.2,.7,.2,.7,.4,.9,-.1,-1,0,.1,0,.8,-.6,0,-.6,.8,0,-1,.3,-.8,-.6,-.1,0,-.5,-.9,-.7,.4,-.6,0,.6,-.8,-0,-1,-.2,-.7,.2,.7,0,-0,1,-.4,.9,-.1,0,.9,.4]),Ao=Float32Array.from([2,.9,1,.1,2,1,0,0,4,.5,2,.5,4,.9,0,.1,4,1,0,0,1,.9,2,.1,1,1,0,0,3,.9,1,.1,1,1,0,0,2,.5,3,.5,3,1,0,0,5,.5,3,.5,0,1,0,0,5,.9,0,.1,0,1,0,0,5,1,0,0,1,.9,3,.1,1,1,0,0,1,1,0,0,1,1,0,0]),Ko=Uint16Array.from([18,19,16,19,17,16,7,13,8,16,17,7,19,18,8,8,18,7,7,17,9,7,18,16,12,11,9,11,15,13,12,15,11,12,14,13,13,15,12,11,13,7,13,14,8,9,10,7,11,10,9,7,10,11,19,6,5,17,19,5,3,0,8,17,5,0,6,19,8,6,8,0,17,0,9,6,0,5,2,12,9,4,2,3,4,12,2,14,12,3,4,3,12,3,2,0,14,3,8,1,9,0,1,2,9,1,0,2]),Co=Float32Array.from([-.1,.6,-.9,-0,.4,-.5,-0,.3,-.9,.1,.5,-.8,-.2,.6,-1.2,-0,.2,-1.3,.2,.5,-1.2,-.2,.8,-1.8,-0,.1,-1.6,.2,.5,-1.8,-.2,.7,-2.2,-0,.2,-2.1,.2,.5,-2.2,0,.5,-2.5]),Po=Float32Array.from([-.7,.7,.3,-0,-.2,1,-.1,-1,.2,.8,.4,.3,-.7,.7,.2,-.1,-1,.1,.9,.3,.2,-.7,.7,-0,-.1,-1,0,1,.3,-0,-.6,.7,-.4,-.1,-1,-.3,.9,.2,-.3,.1,0,-1]),So=Float32Array.from([0,.9,1,.1,0,1,0,0,0,.9,1,.1,0,1,1,0,1,.9,2,.1,1,.9,2,.1,1,1,2,0,2,.9,3,.1,2,.9,3,.1,2,.9,3,.1,3,1,0,0,3,1,0,0,3,1,0,0,3,1,0,0]),ko=Uint16Array.from([13,12,10,13,11,12,13,10,11,12,11,9,11,8,9,11,10,8,10,7,8,8,7,5,7,4,5,7,9,4,9,6,4,10,12,7,12,9,7,6,5,3,5,2,3,5,4,2,4,0,2,4,6,0,6,3,0,9,8,6,8,5,6,1,0,3,1,3,2,2,0,1]);const No=1048577;let zo;const Bo=1048584,Do=[[.5,.5,.5],[.5,.5,-.5],[-.5,.5,-.5],[-.5,.5,.5],[.5,-.5,.5],[.5,-.5,-.5],[-.5,-.5,-.5],[-.5,-.5,.5]],Vo=1048608,Lo=1048640;let jo={On:[3,"lowpass",9,0,0,0,8,8,[["sine",8,1,1,3,8,0],[0,8,2,2,2]]],qn:[48],Gn:.25},Wo={On:[3,"lowpass",8,0,0,0,8,8,[["sine",8,1,1,3,8,0],[0,8,1,2,3]]],qn:[48],Gn:.25},$o={On:[8,"bandpass",8,2,0,0,8,8,[["square",3,1,1,2,8,0],[0,3,2,2,3]]],qn:[48],Gn:.25};const Ho=[0,0];let Uo=0;const Xo=1048832,Go=1050624;let qo=[0,0,0];const Oo=1052672,Yo=1056768,Jo=[0,0,0,1],Qo=1049088;let Zo=[0,0,0],ti=[0,0,0];const ni=1114112,oi=1114144;let ii=[0,0,0];const ei=524288,ri=1081344,ai=new Float32Array(96),si=1179648,li=1310720,fi=1048576;let ci,ui=new class extends class{constructor(){this.wo=0,this.yo=0,this._o=2048,this.oo=window.innerWidth,this.io=window.innerHeight,this.Dn=1,this.Qn={},this.Zn={},this.To={},this.Ro=document.querySelector("main"),this.xo=document.querySelector("canvas"),this.dt=this.xo.getContext("webgl2"),this.Audio=new AudioContext,document.addEventListener("visibilitychange",(()=>document.hidden?this.Mo():this.Fo())),this.Ro.addEventListener("touchstart",(t=>{t.target===this.Ro&&t.preventDefault(),1===t.touches.length&&(this.To={});for(let n=0;n<t.touches.length;n++)this.To[t.touches[n].identifier]=n;for(let n=0;n<t.changedTouches.length;n++){let o=t.changedTouches[n],i=this.To[o.identifier];this.Qn["Touch"+i]=1,this.Qn[`Touch${i}X`]=o.clientX,this.Qn[`Touch${i}Y`]=o.clientY,this.Zn["Touch"+i]=1}})),this.Ro.addEventListener("touchmove",(t=>{t.target===this.Ro&&t.preventDefault();for(let n=0;n<t.changedTouches.length;n++){let o=t.changedTouches[n],i=this.To[o.identifier];this.Qn[`Touch${i}X`]=o.clientX,this.Qn[`Touch${i}Y`]=o.clientY}})),this.Ro.addEventListener("touchend",(t=>{t.target===this.Ro&&t.preventDefault();for(let n=0;n<t.changedTouches.length;n++){let o=this.To[t.changedTouches[n].identifier];this.Qn["Touch"+o]=0,this.Zn["Touch"+o]=-1}})),this.Ro.addEventListener("touchcancel",(t=>{for(let n=0;n<t.changedTouches.length;n++){let o=this.To[t.changedTouches[n].identifier];this.Qn["Touch"+o]=0,this.Zn["Touch"+o]=-1}})),window.addEventListener("keydown",(t=>{t.repeat||(this.Qn[t.code]=1,this.Zn[t.code]=1)})),window.addEventListener("keyup",(t=>{this.Qn[t.code]=0,this.Zn[t.code]=-1})),this.dt.enable(2929),this.dt.enable(Wn),this.dt.frontFace(2304)}Fo(){let t=0,n=performance.now(),o=0,i=0,e=r=>{let a=(r-n)/1e3;for(this.Eo(a),t+=a;t>=Jn;)t-=Jn,this.bo(Jn),this.Io();this.Ao(a),this.Ko(a),n=r,this.wo=requestAnimationFrame(e),i++>100&&(o+=(a-o)/i,o>.018&&(o=0,i=0,this._o=Math.max(512,this._o/2)))};this.Mo(),e(n)}Mo(){cancelAnimationFrame(this.wo),this.wo=0}Eo(t){this.yo=performance.now()}bo(t){}Ao(t){}Io(){for(let t in this.Zn)this.Zn[t]=0}Ko(t){this.Dn=0;let n=performance.now()-this.yo;qn&&(qn.textContent=n.toFixed(1)),On&&(On.textContent=(1e3*t).toFixed(1)),Yn&&(Yn.textContent=(1/t).toFixed())}}{constructor(){super(...arguments),this.o=new so,this.Co=function(t,n=4){let o=qt(t,"#version 300 es\n\nuniform mat4 pv;\nuniform mat4 world;\n\nin vec3 attr_position;\n\nvoid main() {\ngl_Position = pv * world * vec4(attr_position, 1.0);\n}\n","#version 300 es\n\nprecision mediump float;\n\nuniform vec4 color;\n\nout vec4 frag_color;\n\nvoid main() {\nfrag_color = color;\n}\n");return{ao:n,eo:o,gt:{L:t.getUniformLocation(o,"pv"),o:t.getUniformLocation(o,"world"),ro:t.getUniformLocation(o,"color"),_t:t.getAttribLocation(o,"attr_position")}}}(this.dt,2),this.Rn=function(t){let n=qt(t,"#version 300 es\n\n\nuniform mat4 pv;\nuniform mat4 world;\nuniform mat4 self;\n\nin vec3 attr_position;\nin vec3 attr_normal;\n\nout vec4 vert_position;\nout vec3 vert_normal;\n\nvoid main() {\nvert_position = world * vec4(attr_position, 1.0);\nvert_normal = (vec4(attr_normal, 1.0) * self).xyz;\ngl_Position = pv * vert_position;\n}\n","#version 300 es\n\nprecision mediump float;\nprecision lowp sampler2DShadow;\n\n\nconst int MAX_LIGHTS = 8;\n\nuniform vec3 eye;\nuniform vec4 diffuse_color;\nuniform vec4 light_positions[MAX_LIGHTS];\nuniform mat4 shadow_space;\nuniform sampler2DShadow shadow_map;\nuniform vec4 fog_color;\n\nin vec4 vert_position;\nin vec3 vert_normal;\n\nout vec4 frag_color;\n\n\n\nfloat shadow_factor(vec4 world_pos, float min) {\nvec4 shadow_space_pos = shadow_space * world_pos;\nvec3 shadow_space_ndc = shadow_space_pos.xyz / shadow_space_pos.w;\n\nshadow_space_ndc = shadow_space_ndc * 0.5 + 0.5;\n\n\nshadow_space_ndc.z -= 0.001;\n\nreturn texture(shadow_map, shadow_space_ndc) * (1.0 - min) + min;\n}\n\nvoid main() {\nvec3 world_normal = normalize(vert_normal);\n\n\nvec3 light_acc = diffuse_color.rgb * 0.1;\n\nfor (int i = 0; i < MAX_LIGHTS; i++) {\nfloat light_intensity = light_positions[i].w;\nif (light_intensity == 0.0) {\nbreak;\n}\n\nvec3 light_normal;\nif (light_intensity < 1.0) {\n\nlight_normal = light_positions[i].xyz;\n} else {\nvec3 light_dir = light_positions[i].xyz - vert_position.xyz;\nfloat light_dist = length(light_dir);\nlight_normal = light_dir / light_dist;\n\nlight_intensity /= (light_dist * light_dist);\n}\n\nfloat diffuse_factor = dot(world_normal, light_normal);\nif (diffuse_factor > 0.0) {\n\nlight_acc += diffuse_color.rgb * diffuse_factor * light_intensity;\n}\n}\n\nvec3 shaded_rgb = light_acc * shadow_factor(vert_position, 0.5);\nfrag_color= vec4(shaded_rgb, 1.0);\n\nfloat eye_distance = length(eye - vert_position.xyz);\nfloat fog_amount = clamp(0.0, 1.0, eye_distance / 15.0);\nfrag_color = mix(frag_color, fog_color, smoothstep(0.0, 1.0, fog_amount));\n}\n");return{ao:4,eo:n,gt:{L:t.getUniformLocation(n,"pv"),o:t.getUniformLocation(n,"world"),q:t.getUniformLocation(n,"self"),Et:t.getUniformLocation(n,"diffuse_color"),lo:t.getUniformLocation(n,"eye"),no:t.getUniformLocation(n,"light_positions"),mo:t.getUniformLocation(n,"shadow_space"),uo:t.getUniformLocation(n,"shadow_map"),fo:t.getUniformLocation(n,"fog_color"),_t:t.getAttribLocation(n,"attr_position"),yt:t.getAttribLocation(n,"attr_normal")}}}(this.dt),this.kt=function(t){let n=qt(t,"#version 300 es\n\nuniform mat4 pv;\nuniform mat4 bones[6];\n\nin vec3 attr_position;\nin vec3 attr_normal;\nin vec4 attr_weights;\n\nout vec4 vert_position;\nout vec3 vert_normal;\n\nmat4 world_weighted(vec4 weights) {\nreturn weights[1] * bones[int(weights[0])] + weights[3] * bones[int(weights[2])];\n}\n\nvoid main() {\nmat4 bone_world = world_weighted(attr_weights);\nvert_position = bone_world * vec4(attr_position, 1.0);\nvert_normal = normalize(mat3(bone_world) * attr_normal);\ngl_Position = pv * vert_position;\n}\n","#version 300 es\n\nprecision mediump float;\n\n\nconst int MAX_LIGHTS = 8;\n\nuniform vec3 eye;\nuniform vec4 diffuse_color;\nuniform vec4 light_positions[MAX_LIGHTS];\nuniform vec4 fog_color;\n\nin vec4 vert_position;\nin vec3 vert_normal;\n\nout vec4 frag_color;\n\nconst float bands = 2.0;\nfloat posterize(float factor) {\nreturn floor(factor * bands) / bands;\n}\n\nvoid main() {\nvec3 world_normal = normalize(vert_normal);\n\n\nvec3 light_acc = diffuse_color.rgb * 0.5;\n\nfor (int i = 0; i < MAX_LIGHTS; i++) {\nfloat light_intensity = light_positions[i].w;\nif (light_intensity == 0.0) {\nbreak;\n}\n\nvec3 light_normal;\nif (light_intensity < 1.0) {\n\nlight_normal = light_positions[i].xyz;\n} else {\nvec3 light_dir = light_positions[i].xyz - vert_position.xyz;\nfloat light_dist = length(light_dir);\nlight_normal = light_dir / light_dist;\n\nlight_intensity /= (light_dist * light_dist);\n}\n\nfloat diffuse_factor = dot(world_normal, light_normal);\nif (diffuse_factor > 0.0) {\n\nlight_acc += diffuse_color.rgb * posterize(diffuse_factor * light_intensity);\n}\n}\n\nfrag_color = vec4(light_acc, 1.0);\n\nfloat eye_distance = length(eye - vert_position.xyz);\nfloat fog_amount = clamp(0.0, 1.0, eye_distance / 15.0);\nfrag_color = mix(frag_color, fog_color, smoothstep(0.0, 1.0, fog_amount));\n}\n");return{ao:4,eo:n,gt:{L:t.getUniformLocation(n,"pv"),Et:t.getUniformLocation(n,"diffuse_color"),lo:t.getUniformLocation(n,"eye"),no:t.getUniformLocation(n,"light_positions"),_t:t.getAttribLocation(n,"attr_position"),yt:t.getAttribLocation(n,"attr_normal"),fo:t.getUniformLocation(n,"fog_color"),ho:t.getUniformLocation(n,"bones"),It:t.getAttribLocation(n,"attr_weights")}}}(this.dt),this.At=function(t){let n=qt(t,"#version 300 es\n\nuniform mat4 pv;\nuniform vec3 eye;\nuniform vec4 fog_color;\nuniform vec4 color_start;\nuniform vec4 color_end;\n\nuniform vec4 details;\n\n\nin vec4 attr_origin_age;\nin vec3 attr_direction;\n\nout vec4 vert_color;\n\nvoid main() {\n\nvec3 velocity = attr_direction * details.y;\nvec4 world_position = vec4(attr_origin_age.xyz + velocity * attr_origin_age.w, 1.0);\ngl_Position = pv * world_position;\n\n\nfloat t = attr_origin_age.w / details.x;\ngl_PointSize = mix(details.z, details.w, t);\nvert_color = mix(color_start, color_end, t);\n\nfloat eye_distance = length(eye - world_position.xyz);\nfloat fog_amount = clamp(0.0, 1.0, eye_distance / 15.0);\nvert_color = mix(vert_color, fog_color, smoothstep(0.0, 1.0, fog_amount));\n}\n","#version 300 es\n\nprecision mediump float;\n\nin vec4 vert_color;\n\nout vec4 frag_color;\n\nvoid main() {\nfrag_color = vert_color;\n}\n");return{ao:0,eo:n,gt:{L:t.getUniformLocation(n,"pv"),lo:t.getUniformLocation(n,"eye"),fo:t.getUniformLocation(n,"fog_color"),Ct:t.getUniformLocation(n,"color_start"),Pt:t.getUniformLocation(n,"color_end"),do:t.getUniformLocation(n,"details"),vo:t.getAttribLocation(n,"attr_origin_age"),sn:t.getAttribLocation(n,"attr_direction")}}}(this.dt),this.Cn=function(t){let n=qt(t,"#version 300 es\n\n\nuniform mat4 pv;\nuniform mat4 world;\n\nuniform vec3 eye;\nuniform vec4 fog_color;\n\nin vec3 attr_position;\nin vec3 attr_column1;\nin vec3 attr_column2;\nin vec3 attr_column3;\nin vec3 attr_column4;\n\nout vec4 vert_color;\n\nvoid main() {\nmat3 rotation = mat3(\nattr_column1,\nattr_column2,\nattr_column3\n);\n\nvec4 world_position = world * mat4(rotation) * vec4(attr_position + attr_column4, 1.0);\ngl_Position = pv * world_position;\n\n\nvert_color = vec4(0.02, 0.06, 0.04, 1.0);\n\nfloat eye_distance = length(eye - world_position.xyz);\nfloat fog_amount = clamp(0.0, 1.0, eye_distance / 15.0);\nvert_color = mix(vert_color, fog_color, smoothstep(0.0, 1.0, fog_amount));\n}\n\n","#version 300 es\n\nprecision mediump float;\n\nin vec4 vert_color;\nout vec4 frag_color;\n\nvoid main() {\nfrag_color = vert_color;\n}\n\n");return{ao:4,eo:n,gt:{L:t.getUniformLocation(n,"pv"),o:t.getUniformLocation(n,"world"),lo:t.getUniformLocation(n,"eye"),fo:t.getUniformLocation(n,"fog_color"),_t:t.getAttribLocation(n,"attr_position"),Pn:t.getAttribLocation(n,"attr_column1"),Sn:t.getAttribLocation(n,"attr_column2"),kn:t.getAttribLocation(n,"attr_column3"),Nn:t.getAttribLocation(n,"attr_column4")}}}(this.dt),this.Kn=function(t){let n=t.createBuffer();t.bindBuffer(Ln,n),t.bufferData(Ln,xo,Vn);let o=t.createBuffer();t.bindBuffer(Ln,o),t.bufferData(Ln,Mo,Vn);let i=t.createBuffer();t.bindBuffer(Ln,i),t.bufferData(Ln,Fo,Vn);let e=t.createBuffer();return t.bindBuffer(jn,e),t.bufferData(jn,Eo,Vn),{vt:n,wt:o,bt:i,Tt:e,so:Eo.length}}(this.dt),this.An=function(t){let n=t.createBuffer();t.bindBuffer(Ln,n),t.bufferData(Ln,vo,Vn);let o=t.createBuffer();t.bindBuffer(Ln,o),t.bufferData(Ln,_o,Vn);let i=t.createBuffer();t.bindBuffer(Ln,i),t.bufferData(Ln,po,Vn);let e=t.createBuffer();return t.bindBuffer(jn,e),t.bufferData(jn,go,Vn),{vt:n,wt:o,bt:i,Tt:e,so:go.length}}(this.dt),this.Nt=function(t){let n=t.createBuffer();t.bindBuffer(Ln,n),t.bufferData(Ln,bo,Vn);let o=t.createBuffer();t.bindBuffer(Ln,o),t.bufferData(Ln,Io,Vn);let i=t.createBuffer();t.bindBuffer(Ln,i),t.bufferData(Ln,Ao,Vn);let e=t.createBuffer();return t.bindBuffer(jn,e),t.bufferData(jn,Ko,Vn),{vt:n,wt:o,bt:i,Tt:e,so:Ko.length}}(this.dt),this.yn=function(t){let n=t.createBuffer();t.bindBuffer(Ln,n),t.bufferData(Ln,Co,Vn);let o=t.createBuffer();t.bindBuffer(Ln,o),t.bufferData(Ln,Po,Vn);let i=t.createBuffer();t.bindBuffer(Ln,i),t.bufferData(Ln,So,Vn);let e=t.createBuffer();return t.bindBuffer(jn,e),t.bufferData(jn,ko,Vn),{vt:n,wt:o,bt:i,Tt:e,so:ko.length}}(this.dt),this.xn=function(t){let n=t.createBuffer();t.bindBuffer(Ln,n),t.bufferData(Ln,wo,Vn);let o=t.createBuffer();t.bindBuffer(Ln,o),t.bufferData(Ln,yo,Vn);let i=t.createBuffer();t.bindBuffer(Ln,i),t.bufferData(Ln,To,Vn);let e=t.createBuffer();return t.bindBuffer(jn,e),t.bufferData(jn,Ro,Vn),{vt:n,wt:o,bt:i,Tt:e,so:Ro.length}}(this.dt),this.no=new Float32Array(32),this.Po=[],this.In={co:Gt(this.dt,2,2),bn:Gt(this.dt,this._o,this._o)},this.Ln=bt,this.Vn=lt,this.Tn=0}bo(t){!function(t,n){for(let n=0;n<t.o.l.length;n++)128==(128&t.o.l[n])&&ln(t,n)}(this),function(t,n){-1===t.Zn.Touch0&&(Uo=0),0===t.Qn.Touch0&&(Uo+=n),1===t.Zn.Touch0&&(Ho[0]=t.Qn.Touch0X,Ho[1]=t.Qn.Touch0Y);let o=0,i=0;if(1===t.Qn.Touch0){let n=Math.min(t.oo,t.io)/4;o=(t.Qn.Touch0X-Ho[0])/n,i=(t.Qn.Touch0Y-Ho[1])/n}for(let n=0;n<t.o.l.length;n++)128==(128&t.o.l[n])&&fn(t,n,o,i)}(this,t),function(t,n){for(let n of navigator.getGamepads())if(n){t.Zn[`pad${n.index}_axis_1`]=n.axes[0],t.Zn[`pad${n.index}_axis_2`]=n.axes[1],t.Zn[`pad${n.index}_axis_3`]=n.axes[2],t.Zn[`pad${n.index}_axis_4`]=n.axes[3];for(let o=0;o<n.buttons.length;o++)t.Qn[`pad${n.index}_button_${o}`]=+n.buttons[o].pressed}for(let n=0;n<t.o.l.length;n++)128==(128&t.o.l[n])&&cn(t,n)}(this),function(t,n){for(let n=0;n<t.o.l.length;n++)128==(128&t.o.l[n])&&sn(t,n)}(this),function(t,n){for(let o=0;o<t.o.l.length;o++)(t.o.l[o]&ni)===ni&&gn(t,o,n)}(this,t),zn(this),function(t,n){let o=[],i=[];for(let n=0;n<t.o.l.length;n++)if((t.o.l[n]&Vo)===Vo){let e=t.o.G[n],r=t.o.Ot[n];r.rn=[],r.Jt?(r.Jt=0,nn(e.o,r)):r.Qt?(nn(e.o,r),i.push(r)):o.push(r)}for(let t=0;t<i.length;t++)rn(i[t],o,o.length),rn(i[t],i,t)}(this),function(t,n){for(let n=0;n<t.o.l.length;n++)(t.o.l[n]&oi)===oi&&wn(t,n)}(this),zn(this)}Ao(t){!function(t,n){for(let o=0;o<t.o.l.length;o++)if((t.o.l[o]&ei)===ei){let i=t.o.F[o];switch(i.I){case 0:i.A(o)&&yn(t,o);break;case 1:i.C-=n,i.C<0&&yn(t,o)}}}(this,t),function(t,n){for(let n=0;n<t.o.l.length;n++)(t.o.l[n]&Lo)===Lo&&an(t,n)}(this),function(t,n){for(let o=0;o<t.o.l.length;o++)(t.o.l[o]&No)===No&&Yt(t,o,n)}(this,t),function(t,n){for(let o=0;o<t.o.l.length;o++)(t.o.l[o]&Yo)===Yo&&dn(t,o,n)}(this,t),function(t,n){for(let n=0;n<t.o.l.length;n++)if((t.o.l[n]&Oo)===Oo){let o=t.o.G[n],i=t.o.p[n],e=t.o.G[i.g],r=m([0,0,0],e.o),a=h([0,0,0,0],e.o);T(o.O,o.O,r,i.T),F(o.Y,o.Y,a,i.T),o.Z=1}}(this),function(t,n){for(let o=0;o<t.o.l.length;o++)1024==(1024&t.o.l[o])&&mn(t,o,n)}(this,t),function(t,n){for(let n=0;n<t.o.l.length;n++)(t.o.l[n]&si)==si&&kn(t,n)}(this),function(t,n){for(let o=0;o<t.o.l.length;o++)(t.o.l[o]&li)==li&&Nn(t,o,n)}(this,t),function(t,n){for(let o=0;o<t.o.l.length;o++)(t.o.l[o]&Qo)==Qo&&pn(t,o,n)}(this,t),zn(this),function(t,n){for(let o=0;o<t.o.l.length;o++)2==(2&t.o.l[o])&&Qt(t,o,n)}(this,t),function(t,n){t.oo==window.innerWidth&&t.io==window.innerHeight||(t.Dn=1),t.Dn&&(t.oo=t.xo.width=window.innerWidth,t.io=t.xo.height=window.innerHeight)}(this),function(t,n){t.Po=[];for(let n=0;n<t.o.l.length;n++)if((t.o.l[n]&Bo)===Bo){let o=t.o.P[n],i=t.o.G[n],e=o.S;if(t.Dn)switch(e.I){case 0:Zt(e,0===o.I?t.oo/t.io:o.g.$n/o.g.Hn);break;case 1:tn(e)}s(o.V,i.q),f(o.L,e.S,o.V),m(o.W,i.o),t.Po.push(n)}}(this),function(t,n){let o=t.o.G[t.Po[1]].o[12];for(let n=0;n<t.o.l.length;n++)(t.o.l[n]&Xo)==Xo&&un(t,n,o)}(this),function(t,n){t.no.fill(0);let o=0;for(let n=0;n<t.o.l.length;n++)(t.o.l[n]&Go)===Go&&hn(t,n,o++)}(this),function(t,n){var o,i,e;t._o!==t.In.bn.$n&&(o=t.dt,e=t._o,(i=t.In.bn).$n=t._o,i.Hn=e,Ut(o,i.Un,i.$n,i.Hn),Xt(o,i.Xn,i.$n,i.Hn));for(let n of t.Po){let o=t.o.P[n];switch(o.I){case 0:Tn(t,o);break;case 3:Rn(t,o)}}}(this),function(t,n){let o=function(t){return t.Vn(t)}(t);o!==ci&&(t.Ro.innerHTML=ci=o)}(this)}};window.scenes=[bt,function(n){n.o=new so,n.Dn=1,Z(n),Et(n),t(n,[...S(0,[.4,.6,.4,1]),C([0,10,10]),o(e(n.o,"ca"),.05)])},zt,$t,function(n){n.o=new so,n.Dn=1,t(n,[C([0,-2.5,0],void 0,[16,5,16]),...dt(n,[0,0,0,1])]);for(let o=0;o<2;o++)t(n,[C([nt(-8,8),0,nt(-3,0)],M([0,0,0,1],0,nt(-180,180),0)),...Ct(n)]);for(let o=0;o<8;o++){let o=nt(-8,-.5);t(n,[C([nt(-8,8),0,o]),..._t(n)])}Z(n),t(n,[...gt(n),C([2.5,6,1])]),t(n,[...gt(n),C([2.4,8,1])]),t(n,[C([-4,2,-1],M([0,0,0,1],-10,100,10)),I([C(),U(1),st(Mt,.5)])]),t(n,[C([-4,0,-1],M([0,0,0,1],0,145,0),[.6,.6,.6]),...Pt(n)]),t(n,[C([20,-12,-5],M([0,0,0,1],0,90,0),[30,30,30]),V(n.Rn,n.yn,[.5,.5,.5,1])]),t(n,[C([55,-10,-5.5],M([0,0,0,1],0,90,0),[20,20,20]),V(n.Rn,n.yn,[.5,.5,.5,1])]),t(n,[C([4.4,0,-2],M([0,0,0,1],0,12,0),[1,1,1]),I([C(),...Dn(n)],[C([.5,0,1.5]),...vt(n)])]),t(n,[C([-4,-.3,.5]),...vt(n)]),t(n,[C([2.5,.2,3.5]),...vt(n)]),t(n,[...mt(),C()]),t(n,[...ht(n),C()]),t(n,[...S(0,[145/255,85/255,61/255,1]),C([0,0,0],M([0,0,0,1],-30,0,0)),o(e(n.o,"ca"),.05)])}],window.scenes[0](ui),ui.Fo(),window.$=Ht.bind(null,ui),window.game=ui}();
</script>
