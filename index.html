<!DOCTYPE html><meta charset=utf8><meta name=viewport content="width=device-width, user-scalable=0"><title>GoodLuck (opt)</title><style>body,html{margin:0;overflow:hidden}canvas,main{height:100vh;position:absolute;user-select:none;width:100vw}</style><canvas id=scene></canvas><canvas id=billboard></canvas><main></main><script>!function(){function t(t,n){let i=t.i.t();for(let o of n)o(t,i);return i}function n(...n){return(i,o)=>{let e=[];for(let o of n){let n=t(i,o);e.push(n)}i.i.o[o]|=32,i.i.l[o]={l:e}}}function*i(t,n,o){if((t.o[n]&o)===o&&(yield n),32&t.o[n])for(let e of t.l[n].l)yield*i(t,e,o)}function o(t,n){if(32&t.o[n])for(let i of t.l[n].l)o(t,i);t.u(n)}function e(t,n,i){switch(n){case 0:document.fullscreenElement?document.exitFullscreen():document.body.requestFullscreen();break;case 1:{let[n]=i;o(t.i,n),t.h++;break}case 2:t._++}}function r(t,n,i,o){return t.bindTexture(wn,n),t.texImage2D(wn,0,32856,i,o,0,6408,5121,null),t.texParameteri(wn,10241,yn),t.texParameteri(wn,10240,yn),n}function l(t,n,i,o){return t.bindTexture(wn,n),t.texImage2D(wn,0,33190,i,o,0,6402,5125,null),t.texParameteri(wn,10241,yn),t.texParameteri(wn,10240,yn),t.texParameteri(wn,34892,34894),t.texParameteri(wn,10242,33071),t.texParameteri(wn,10243,33071),n}function a(t,n,i){let o={m:t.createFramebuffer(),v:n,g:i,p:r(t,t.createTexture(),n,i),M:l(t,t.createTexture(),n,i)};t.bindFramebuffer(Mn,o.m),t.framebufferTexture2D(Mn,36096,wn,o.M,0),t.framebufferTexture2D(Mn,36064,wn,o.p,0);let e=t.checkFramebufferStatus(Mn);if(36053!=e)throw Error(`Failed to set up the framebuffer (${e}).`);return o}function s(t,n,i){let o=t.createProgram();if(t.attachShader(o,f(t,35633,n)),t.attachShader(o,f(t,35632,i)),t.linkProgram(o),!t.getProgramParameter(o,35714))throw Error(t.getProgramInfoLog(o));return o}function f(t,n,i){let o=t.createShader(n);if(t.shaderSource(o,i),t.compileShader(o),!t.getShaderParameter(o,35713))throw Error(t.getShaderInfoLog(o));return o}function c(t,n,i){return Math.max(t,Math.min(n,i))}function u(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function h(t,n){let i=n[0],o=n[1],e=n[2],r=n[3],l=n[4],a=n[5],s=n[6],f=n[7],c=n[8],u=n[9],h=n[10],_=n[11],m=n[12],d=n[13],v=n[14],g=n[15],p=i*a-o*l,y=i*s-e*l,w=i*f-r*l,x=o*s-e*a,M=o*f-r*a,z=e*f-r*s,A=c*d-u*m,T=c*v-h*m,b=c*g-_*m,F=u*v-h*d,S=u*g-_*d,P=h*g-_*v,k=p*P-y*S+w*F+x*b-M*T+z*A;return k?(k=1/k,t[0]=(a*P-s*S+f*F)*k,t[1]=(e*S-o*P-r*F)*k,t[2]=(d*z-v*M+g*x)*k,t[3]=(h*M-u*z-_*x)*k,t[4]=(s*b-l*P-f*T)*k,t[5]=(i*P-e*b+r*T)*k,t[6]=(v*w-m*z-g*y)*k,t[7]=(c*z-h*w+_*y)*k,t[8]=(l*S-a*b+f*A)*k,t[9]=(o*b-i*S-r*A)*k,t[10]=(m*M-d*w+g*p)*k,t[11]=(u*w-c*M-_*p)*k,t[12]=(a*T-l*F-s*A)*k,t[13]=(i*F-o*T+e*A)*k,t[14]=(d*y-m*x-v*p)*k,t[15]=(c*x-u*y+h*p)*k,t):null}function _(t,n,i){let o=n[0],e=n[1],r=n[2],l=n[3],a=n[4],s=n[5],f=n[6],c=n[7],u=n[8],h=n[9],_=n[10],m=n[11],d=n[12],v=n[13],g=n[14],p=n[15],y=i[0],w=i[1],x=i[2],M=i[3];return t[0]=y*o+w*a+x*u+M*d,t[1]=y*e+w*s+x*h+M*v,t[2]=y*r+w*f+x*_+M*g,t[3]=y*l+w*c+x*m+M*p,y=i[4],w=i[5],x=i[6],M=i[7],t[4]=y*o+w*a+x*u+M*d,t[5]=y*e+w*s+x*h+M*v,t[6]=y*r+w*f+x*_+M*g,t[7]=y*l+w*c+x*m+M*p,y=i[8],w=i[9],x=i[10],M=i[11],t[8]=y*o+w*a+x*u+M*d,t[9]=y*e+w*s+x*h+M*v,t[10]=y*r+w*f+x*_+M*g,t[11]=y*l+w*c+x*m+M*p,y=i[12],w=i[13],x=i[14],M=i[15],t[12]=y*o+w*a+x*u+M*d,t[13]=y*e+w*s+x*h+M*v,t[14]=y*r+w*f+x*_+M*g,t[15]=y*l+w*c+x*m+M*p,t}function m(t,n,i,o,e){let r,l=1/Math.tan(n/2);return t[0]=l/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=e&&e!==1/0?(r=1/(o-e),t[10]=(e+o)*r,t[14]=2*e*o*r):(t[10]=-1,t[14]=-2*o),t}function d(t,n){return t[0]=n[8],t[1]=n[9],t[2]=n[10],z(t,t)}function v(t,n){return t[0]=n[12],t[1]=n[13],t[2]=n[14],t}function g(t,n){let i=function(t,n){let i=n[4],o=n[5],e=n[6],r=n[8],l=n[9],a=n[10];return t[0]=Math.hypot(n[0],n[1],n[2]),t[1]=Math.hypot(i,o,e),t[2]=Math.hypot(r,l,a),t}([0,0,0],n),o=1/i[0],e=1/i[1],r=1/i[2],l=n[0]*o,a=n[1]*e,s=n[2]*r,f=n[4]*o,c=n[5]*e,u=n[6]*r,h=n[8]*o,_=n[9]*e,m=n[10]*r,d=l+c+m,v=0;return d>0?(v=2*Math.sqrt(d+1),t[3]=.25*v,t[0]=(u-_)/v,t[1]=(h-s)/v,t[2]=(a-f)/v):l>c&&l>m?(v=2*Math.sqrt(1+l-c-m),t[3]=(u-_)/v,t[0]=.25*v,t[1]=(a+f)/v,t[2]=(h+s)/v):c>m?(v=2*Math.sqrt(1+c-l-m),t[3]=(h-s)/v,t[0]=(a+f)/v,t[1]=.25*v,t[2]=(u+_)/v):(v=2*Math.sqrt(1+m-l-c),t[3]=(a-f)/v,t[0]=(h+s)/v,t[1]=(u+_)/v,t[2]=.25*v),t}function p(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t}function y(t,n,i){return t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t}function w(t,n,i){return t[0]=n[0]-i[0],t[1]=n[1]-i[1],t[2]=n[2]-i[2],t}function x(t,n,i){return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t}function M(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t}function z(t,n){let i=n[0],o=n[1],e=n[2],r=i*i+o*o+e*e;return r>0&&(r=1/Math.sqrt(r)),t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t}function A(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function T(t,n,i){let o=n[0],e=n[1],r=n[2],l=i[3]*o+i[7]*e+i[11]*r+i[15];return l=l||1,t[0]=(i[0]*o+i[4]*e+i[8]*r+i[12])/l,t[1]=(i[1]*o+i[5]*e+i[9]*r+i[13])/l,t[2]=(i[2]*o+i[6]*e+i[10]*r+i[14])/l,t}function b(t,n,i){return w(t,T([0,0,0],n,i),v([0,0,0],i))}function F(t,n,i,o){let e=n[0],r=n[1],l=n[2];return t[0]=e+o*(i[0]-e),t[1]=r+o*(i[1]-r),t[2]=l+o*(i[2]-l),t}function S(t,n,i){let o=n[0],e=n[1],r=n[2],l=n[3],a=i[0],s=i[1],f=i[2],c=i[3];return t[0]=o*c+l*a+e*f-r*s,t[1]=e*c+l*s+r*a-o*f,t[2]=r*c+l*f+o*s-e*a,t[3]=l*c-o*a-e*s-r*f,t}function P(t,n,i,o){let e=Math.sin(n/2*ci),r=Math.cos(n/2*ci),l=Math.sin(i/2*ci),a=Math.cos(i/2*ci),s=Math.sin(o/2*ci),f=Math.cos(o/2*ci);return t[0]=e*a*f+r*l*s,t[1]=r*l*f-e*a*s,t[2]=r*a*s-e*l*f,t[3]=r*a*f+e*l*s,t}function k(t){return 57.29577951308232*Math.asin(-c(-1,1,2*(t[1]*t[2]-t[3]*t[0])))}function C(t,n,i){let o=i/2;return t[0]=Math.sin(o)*n[0],t[1]=Math.sin(o)*n[1],t[2]=Math.sin(o)*n[2],t[3]=Math.cos(o),t}function I(t,n,i,o){let e,r,l,a,s,f=n[0],c=n[1],u=n[2],h=n[3],_=i[0],m=i[1],d=i[2],v=i[3];return r=f*_+c*m+u*d+h*v,r<0&&(r=-r,_=-_,m=-m,d=-d,v=-v),1-r>1e-6?(e=Math.acos(r),l=Math.sin(e),a=Math.sin((1-o)*e)/l,s=Math.sin(o*e)/l):(a=1-o,s=o),t[0]=a*f+s*_,t[1]=a*c+s*m,t[2]=a*u+s*d,t[3]=a*h+s*v,t}function B(t,n,i){let o=t.i.A[n],e=t.i.T[n];if(e.F){let t=e.S[e.F];t&&t!==e.P&&(0===e.P.k?e.P=t:1&e.P.C&&(e.P.k=0,e.P=t)),e.F=void 0}let r=null,l=null;for(let t of e.P.I){if(e.P.k<t.B){l=t;break}r=t}if(r&&l){let t=(e.P.k-r.B)/(l.B-r.B);l.L&&(t=l.L(t)),r.R&&l.R&&(F(o.R,r.R,l.R,t),o.V=!0),r.K&&l.K&&(I(o.K,r.K,l.K,t),o.V=!0),r.W&&l.W&&(F(o.W,r.W,l.W,t),o.V=!0)}let a=e.P.k+i;if(a<e.P.X)e.P.k=a;else{if(e.P.k=0,4&e.P.C)for(let t of e.P.I.reverse())t.B=e.P.X-t.B;2&e.P.C||(e.P=e.S.idle)}}function L(t,n){let i=t.i.A[n];var o,e;v(mi,i.i),d(di,i.i),(o=vi)[0]=(e=i.i)[4],o[1]=e[5],o[2]=e[6],z(o,o);let r=t.Audio.listener;r.positionX?(r.positionX.value=mi[0],r.positionY.value=mi[1],r.positionZ.value=mi[2],r.forwardX.value=di[0],r.forwardY.value=di[1],r.forwardZ.value=di[2],r.upX.value=vi[0],r.upY.value=vi[1],r.upZ.value=vi[2]):(r.setPosition(...mi),r.setOrientation(...di,...vi))}function R(t,n,i,o,e){let r=t.currentTime+e,l=0;n&&n.connect(t.destination);let a,s,f=t.createGain();if(f.gain.value=(i[0]/9)**3,i[5]&&(s=t.createOscillator(),s.type=i[5],s.frequency.value=(i[7]/3)**3,a=t.createGain(),a.gain.value=(i[6]+3)**3,s.connect(a)),i[1]){let o=t.createBiquadFilter();o.type=i[1],o.frequency.value=2**i[2],o.Q.value=i[3]**1.5,a&&i[4]&&a.connect(o.detune),f.connect(o),o.connect(n||t.destination)}else f.connect(n||t.destination);for(let n of i[8]){let i=t.createGain();i.connect(f);let e=(n[1]/9)**3,s=(n[2]/9)**3,c=(n[3]/9)**3,u=s+c+(n[4]/6)**3;if(i.gain.setValueAtTime(0,r),i.gain.linearRampToValueAtTime(e,r+s),i.gain.setValueAtTime(e,r+s+c),i.gain.exponentialRampToValueAtTime(1e-5,r+u),n[0]){let e=t.createOscillator();e.type=n[0],e.connect(i),e.detune.value=3*(n[5]-7.5)**3,a&&n[6]&&a.connect(e.detune);let l=440*2**((o-69)/12);if(n[7]){let t=(n[8]/9)**3,i=(n[9]/9)**3,o=(n[10]/6)**3;e.frequency.linearRampToValueAtTime(0,r),e.frequency.linearRampToValueAtTime(l,r+t),e.frequency.setValueAtTime(l,r+t+i),e.frequency.exponentialRampToValueAtTime(1e-5,r+t+i+o)}else e.frequency.setValueAtTime(l,r);e.start(r),e.stop(r+u)}else{let n=t.createBufferSource();n.buffer=V(t),n.loop=!0,n.connect(i),n.start(r),n.stop(r+u)}u>l&&(l=u)}s&&(s.start(r),s.stop(r+l))}function V(t){if(!_i){_i=t.createBuffer(1,2*t.sampleRate,t.sampleRate);let n=_i.getChannelData(0);for(let t=0;t<n.length;t++)n[t]=2*Math.random()-1}return _i}function E(t,n,i){let o=t.i.D[n],e=t.i.A[n];if(o.P&&(o.k+=i,o.k>o.P.H?o.P=void 0:o.N&&K(o.N,e)),o.F&&!o.P){switch(o.F.G){case 0:!function(t,n,i){let o=t.createBufferSource();o.buffer=i.$,n?(o.connect(n),n.connect(t.destination)):o.connect(t.destination),o.start()}(t.Audio,o.N,o.F);break;case 1:!function(t,n,i){let o=60/(i.j||120)/4;for(let e of i.U)for(let i=0;i<e.Y.length;i++)e.Y[i]&&R(t,n,e.O,e.Y[i],i*o)}(t.Audio,o.N,o.F)}o.P=o.F,o.k=0,o.N&&K(o.N,e)}o.F=o.q}function K(t,n){v(pi,n.i),d(yi,n.i),t.positionX?(t.positionX.value=pi[0],t.positionY.value=pi[1],t.positionZ.value=pi[2],t.orientationX.value=yi[0],t.orientationY.value=yi[1],t.orientationZ.value=yi[2]):(t.setPosition(...pi),t.setOrientation(...yi))}function W(t,n){n>1?(m(t.J,t.Z,n,t.tt,t.nt),h(t.it,t.J)):(m(t.J,t.Z/n,n,t.tt,t.nt),h(t.it,t.J))}function X(t){!function(t,n,i,o,e,r,l){let a=1/(e-i),s=1/(o-n),f=1/(r-l);t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*f,t[11]=0,t[12]=(e+i)*a,t[13]=(n+o)*s,t[14]=(l+r)*f,t[15]=1}(t.J,t.ot,t.ot,-t.ot,-t.ot,t.tt,t.nt),h(t.it,t.J)}function D(t,n){let i,o,e,r,l,a;v(n.et,t),i=r=n.et[0],o=l=n.et[1],e=a=n.et[2];let s=[0,0,0];for(let f=0;f<8;f++){let c=xi[f];s[0]=c[0]*n.rt[0],s[1]=c[1]*n.rt[1],s[2]=c[2]*n.rt[2],T(s,s,t),s[0]<i&&(i=s[0]),s[0]>r&&(r=s[0]),s[1]<o&&(o=s[1]),s[1]>l&&(l=s[1]),s[2]<e&&(e=s[2]),s[2]>a&&(a=s[2])}n.lt=[i,o,e],n.at=[r,l,a],n.st[0]=(r-i)/2,n.st[1]=(l-o)/2,n.st[2]=(a-e)/2}function H(t,n){let i=t.et[0]-n.et[0],o=t.st[0]+n.st[0]-Math.abs(i),e=t.et[1]-n.et[1],r=t.st[1]+n.st[1]-Math.abs(e),l=t.et[2]-n.et[2],a=t.st[2]+n.st[2]-Math.abs(l);return o<r&&o<a?[o*Math.sign(i),0,0]:r<a?[0,r*Math.sign(e),0]:[0,0,a*Math.sign(l)]}function N(t,n){return t.lt[0]<n.at[0]&&t.at[0]>n.lt[0]&&t.lt[1]<n.at[1]&&t.at[1]>n.lt[1]&&t.lt[2]<n.at[2]&&t.at[2]>n.lt[2]}function G(t,n,i){for(let o=0;o<i;o++){let i=n[o],e=t.o&i.ft,r=i.o&t.ft;if((e||r)&&N(t,i)){let n=H(t,i);e&&t.ct.push({ut:i.Entity,ht:n}),r&&i.ct.push({ut:t.Entity,ht:M([0,0,0],n)})}}}function $(t,n){let i=t.i._t[n],o=t.i.dt[n];i.vt&&o.gt.push(i.vt.slice()),i.K&&o.yt.push(i.K.slice())}function j(t,n){let o=t.i.wt[n];if(o.dt){let o;o=t.xt.Space?"jump":"walk";for(let e of i(t.i,n,1))t.i.T[e].F=o}if(o.Mt){let i=t.i.dt[n];t.xt.ArrowLeft&&i.yt.push([0,1,0,0]),t.xt.ArrowRight&&i.yt.push([0,-1,0,0])}if(o.zt){let i=t.i.dt[n],e=k(t.i.A[n].K);t.xt.ArrowUp&&e>o.At&&i.Tt.push([-1,0,0,0]),t.xt.ArrowDown&&e<o.bt&&i.Tt.push([1,0,0,0])}}function U(t,n){let i=t.i.wt[n],o=t.i.A[n];if(i.Mt&&t.Ft.MouseX&&(C(Fi,bi,-t.Ft.MouseX*i.Mt*ci),S(o.K,Fi,o.K),o.V=!0),i.zt&&t.Ft.MouseY){let n=k(o.K),e=c(i.At-n,i.bt-n,t.Ft.MouseY*i.zt);C(Fi,Ti,e*ci),S(o.K,o.K,Fi),o.V=!0}}function Y(t,n){let i=t.i.A[n],o=t.i.wt[n],e=t.i.dt[n];if(o.dt&&1===t.xt.Touch0){let n=Math.min(t.St,t.Pt)/4,i=(t.xt.Touch0X-ki[0])/n,o=(t.xt.Touch0Y-ki[1])/n;Math.abs(i)>.01&&e.gt.push([c(-1,1,-i),0,0]),Math.abs(o)>.01&&e.gt.push([0,0,c(-1,1,-o)])}if(o.Mt&&t.Ft.Touch1X&&(C(Ci,Si,-t.Ft.Touch1X*o.Mt*10*ci),S(i.K,Ci,i.K),i.V=!0),o.zt&&t.Ft.Touch1Y){let n=k(i.K),e=c(o.At-n,o.bt-n,t.Ft.Touch1Y*o.zt*10);C(Ci,Pi,e*ci),S(i.K,i.K,Ci),i.V=!0}}function O(t,n){let i=t.i.wt[n];if(i.dt){let i=t.i.dt[n];Math.abs(t.Ft.pad0_axis_1)>Li&&i.gt.push([-t.Ft.pad0_axis_1,0,0]),Math.abs(t.Ft.pad0_axis_2)>Li&&i.gt.push([0,0,-t.Ft.pad0_axis_2])}if(i.Mt&&Math.abs(t.Ft.pad0_axis_3)>Li&&t.i.dt[n].yt.push(C([0,0,0,0],Ii,-t.Ft.pad0_axis_3*Math.PI)),i.zt&&Math.abs(t.Ft.pad0_axis_4)>Li){let o=t.i.dt[n],e=t.Ft.pad0_axis_4*Math.PI,r=k(t.i.A[n].K);(e<0&&r>i.At||e>0&&r<i.bt)&&o.Tt.push(C([0,0,0,0],Bi,e))}}function q(t,n){t.kt.textAlign="center",t.kt.font=n.Ct,t.kt.fillStyle=n.It,t.kt.fillText(n.Text,0,0)}function J(t,n){t.kt.strokeStyle=n.Bt,t.kt.strokeRect(-n.rt/2,-n.rt/2,n.rt,n.rt)}function Q(t,n,i){let r=t.i.Lt[n];r.Rt-=i,r.Rt<0&&(r.Vt&&e(t,r.Vt,n),o(t.i,n))}function Z(t,n,i){let o=t.i.Et[n];v(Ei,t.i.A[n].i),1===o.G&&z(Ei,Ei),t.Kt[4*i+0]=Ei[0],t.Kt[4*i+1]=Ei[1],t.Kt[4*i+2]=Ei[2],t.Kt[4*i+3]=o.G,t.Wt[4*i+0]=o.Bt[0],t.Wt[4*i+1]=o.Bt[1],t.Wt[4*i+2]=o.Bt[2],t.Wt[4*i+3]=o.Xt}function tt(t,n,i){let o=t.i.A[n],e=t.i.dt[n];if(e.gt.length){let n=e.gt.reduce(nt),r=Math.min(1,function(t){return Math.hypot(t[0],t[1],t[2])}(n));b(n,n,o.i),void 0!==o.Dt&&b(n,n,t.i.A[o.Dt].Ht),z(n,n),x(n,n,r*e.Nt*i),y(o.R,o.R,n),o.V=!0,e.gt=[]}if(e.yt.length){let t=e.yt.reduce(it);I(t,Xi,t,Math.min(1,e.Gt/Math.PI*i)),S(o.K,t,o.K),o.V=!0,e.yt=[]}if(e.Tt.length){let t=e.Tt.reduce(it);I(t,Xi,t,Math.min(1,e.Gt/Math.PI*i)),S(o.K,o.K,t),o.V=!0,e.Tt=[]}}function nt(t,n){return y(t,t,n)}function it(t,n){return S(t,t,n)}function ot(t,n,i,o=0,e=[1,1,1,1],r=2304){return(l,a)=>{if(!Di.has(n)){let i=l.$t.createVertexArray();l.$t.bindVertexArray(i),l.$t.bindBuffer(vn,n.jt),l.$t.enableVertexAttribArray(t.Yt.Ut),l.$t.vertexAttribPointer(t.Yt.Ut,3,An,!1,0,0),l.$t.bindBuffer(vn,n.Ot),l.$t.enableVertexAttribArray(t.Yt.qt),l.$t.vertexAttribPointer(t.Yt.qt,3,An,!1,0,0),l.$t.bindBuffer(gn,n.Jt),l.$t.bindVertexArray(null),Di.set(n,i)}l.i.o[a]|=65536,l.i.Qt[a]={G:1,Zt:t,tn:n,nn:r,on:Di.get(n),en:i,rn:e,ln:o}}}function et(t,n,i,o=0,e=[1,1,1,1],r=2304){return(l,a)=>{if(!Hi.has(n)){let i=l.$t.createVertexArray();l.$t.bindVertexArray(i),l.$t.bindBuffer(vn,n.jt),l.$t.enableVertexAttribArray(t.Yt.Ut),l.$t.vertexAttribPointer(t.Yt.Ut,3,An,!1,0,0),l.$t.bindBuffer(vn,n.Ot),l.$t.enableVertexAttribArray(t.Yt.qt),l.$t.vertexAttribPointer(t.Yt.qt,3,An,!1,0,0),l.$t.bindBuffer(gn,n.Jt),l.$t.bindVertexArray(null),Hi.set(n,i)}l.i.o[a]|=65536,l.i.Qt[a]={G:2,Zt:t,tn:n,nn:r,on:Hi.get(n),en:i,rn:e,ln:o}}}function rt(t,n,i,o=0,e=[1,1,1,1],r=2304){return(l,a)=>{if(!Ni.has(n)){let i=l.$t.createVertexArray();l.$t.bindVertexArray(i),l.$t.bindBuffer(vn,n.jt),l.$t.enableVertexAttribArray(t.Yt.Ut),l.$t.vertexAttribPointer(t.Yt.Ut,3,An,!1,0,0),l.$t.bindBuffer(vn,n.Ot),l.$t.enableVertexAttribArray(t.Yt.qt),l.$t.vertexAttribPointer(t.Yt.qt,3,An,!1,0,0),l.$t.bindBuffer(vn,n.an),l.$t.enableVertexAttribArray(t.Yt.sn),l.$t.vertexAttribPointer(t.Yt.sn,4,An,!1,0,0),l.$t.bindBuffer(gn,n.Jt),l.$t.bindVertexArray(null),Ni.set(n,i)}l.i.o[a]|=65536,l.i.Qt[a]={G:3,Zt:t,tn:n,nn:r,on:Ni.get(n),en:i,rn:e,ln:o}}}function lt(t,n,i,o){return(e,r)=>{let l=e.fn,a=e.$t.createVertexArray();e.$t.bindVertexArray(a),e.$t.bindBuffer(vn,t.jt),e.$t.enableVertexAttribArray(l.Yt.Ut),e.$t.vertexAttribPointer(l.Yt.Ut,3,An,!1,0,0),e.$t.bindBuffer(vn,t.Ot),e.$t.enableVertexAttribArray(l.Yt.qt),e.$t.vertexAttribPointer(l.Yt.qt,3,An,!1,0,0);let s=e.$t.createBuffer();e.$t.bindBuffer(vn,s),e.$t.bufferData(vn,n,dn),e.$t.enableVertexAttribArray(l.Yt.cn),e.$t.vertexAttribPointer(l.Yt.cn,4,An,!1,0,0),e.$t.vertexAttribDivisor(l.Yt.cn,1);let f=e.$t.createBuffer();e.$t.bindBuffer(vn,f),e.$t.bufferData(vn,i,dn),e.$t.enableVertexAttribArray(l.Yt.un),e.$t.vertexAttribPointer(l.Yt.un,4,An,!1,0,0),e.$t.vertexAttribDivisor(l.Yt.un,1),e.$t.bindBuffer(gn,t.Jt),e.$t.bindVertexArray(null),e.i.o[r]|=65536,e.i.Qt[r]={G:11,Zt:l,tn:t,nn:pn,on:a,hn:n.length/4,_n:o,mn:s,dn:f}}}function at(t,n,i){let o=t.i.vn[n],e=t.i.A[n];o.gn+=i,o.gn>o.pn&&(o.gn=0,v($i,e.i),d(ji,e.i),o.yn.push(...$i,0),o.yn.push(...ji,Math.random()));for(let t=0;t<o.yn.length;)o.yn[t+3]+=i,o.yn[t+3]>o.Lt?o.yn.splice(t,8):t+=8}function st(t,n,i){let o=t.i.A[n],e=t.i.wn[n];if(1===e.G){p(e.xn,e.Mn),x(e.zn,e.zn,i),y(e.xn,e.xn,e.zn),e.xn[1]+=-9.81*i;let t=[0,0,0];x(t,e.xn,i),y(o.R,o.R,t),o.V=!0,(r=e.zn)[0]=0,r[1]=0,r[2]=0}var r}function ft(t,n,i){let o=t.i.wn[n];if(2===o.G){let e=[0,0,0];v(e,t.i.A[n].i);let r=[0,0,0];w(r,e,o.An),x(o.xn,r,1/i),p(o.An,e)}}function ct(t,n){let i=t.i.A[n],o=t.i.Tn[n],e=t.i.wn[n];if(1===e.G){let n=!1;for(let r=0;r<o.ct.length;r++){let l=o.ct[r];if(131072&t.i.o[l.ut]){n=!0,y(i.R,i.R,l.ht),i.V=!0;let o=t.i.wn[l.ut];switch(o.G){case 0:z(qi,l.ht),x(qi,qi,-2*A(e.xn,qi)),y(e.Mn,e.xn,qi);break;case 1:case 2:p(e.Mn,o.xn)}x(e.Mn,e.Mn,e.bn),l.ht[1]>0&&e.Mn[1]<1&&(e.Mn[1]=0)}}n||p(e.Mn,e.xn)}}function ut(t,n){if(32&t.o[n]){let i=t.l[n];for(let n of i.l)if(1048576&t.o[n])return!0}return!1}function ht(t,n){let i=null,o=null;t.$t.bindFramebuffer(Mn,n.Fn.m),t.$t.viewport(0,0,n.Fn.v,n.Fn.g),t.$t.clearColor(...n.Sn),t.$t.clear(16640);for(let e=0;e<t.i.o.length;e++)if((t.i.o[e]&Qi)===Qi){let r=t.i.A[e],l=t.i.Qt[e];if(l.Zt!==i)switch(i=l.Zt,l.G){case 8:case 9:case 10:break;case 11:dt(t,n);break;default:_t(t,n)}switch(l.nn!==o&&(o=l.nn,t.$t.frontFace(l.nn)),l.G){case 8:case 9:case 10:break;case 11:vt(t,r,l);break;default:mt(t,r,l)}}}function _t(t,n){t.$t.useProgram(t.kn.Pn),t.$t.uniformMatrix4fv(t.kn.Yt.Cn,!1,n.Cn)}function mt(t,n,i){let o=t.kn;t.$t.uniformMatrix4fv(o.Yt.i,!1,n.i),t.$t.bindBuffer(vn,i.tn.jt),t.$t.enableVertexAttribArray(o.Yt.Ut),t.$t.vertexAttribPointer(o.Yt.Ut,3,An,!1,0,0),t.$t.bindBuffer(gn,i.tn.Jt),t.$t.drawElements(o.In,i.tn.Bn,zn,0)}function dt(t,n){t.$t.useProgram(t.Ln.Pn),t.$t.uniformMatrix4fv(t.Ln.Yt.Cn,!1,n.Cn)}function vt(t,n,i){let o=t.Ln;t.$t.uniformMatrix4fv(o.Yt.i,!1,n.i),t.$t.bindBuffer(vn,i.tn.jt),t.$t.enableVertexAttribArray(o.Yt.Ut),t.$t.vertexAttribPointer(o.Yt.Ut,3,An,!1,0,0),t.$t.bindBuffer(vn,i.mn),t.$t.enableVertexAttribArray(o.Yt.cn),t.$t.vertexAttribPointer(o.Yt.cn,4,An,!1,0,0),t.$t.vertexAttribDivisor(o.Yt.cn,1),t.$t.bindBuffer(vn,i.dn),t.$t.enableVertexAttribArray(o.Yt.un),t.$t.vertexAttribPointer(o.Yt.un,4,An,!1,0,0),t.$t.vertexAttribDivisor(o.Yt.un,1),t.$t.bindBuffer(gn,i.tn.Jt),t.$t.drawElementsInstanced(t.Ln.In,i.tn.Bn,zn,0,i.hn)}function gt(t,n,i=0){for(let o=i;o<t.o.length;o++)if((t.o[o]&n)===n)return o}function pt(t,n){t.$t.bindFramebuffer(Mn,null),t.$t.viewport(0,0,t.St,t.Pt),t.$t.clearColor(...n.Sn),t.$t.clear(16640),wt(t,n)}function yt(t,n){t.$t.bindFramebuffer(Mn,n.Fn.m),t.$t.viewport(0,0,n.Fn.v,n.Fn.g),t.$t.clearColor(...n.Sn),t.$t.clear(16640),wt(t,n,n.Fn.Rn)}function wt(t,n,i){let o=null,e=null;for(let r=0;r<t.i.o.length;r++)if((t.i.o[r]&Zi)===Zi){let l=t.i.A[r],a=t.i.Qt[r];if(a.Zt!==o)switch(o=a.Zt,a.G){case 0:xt(t,a.Zt,n);break;case 1:zt(t,a.Zt,n);break;case 5:Tt(t,a.Zt,n);break;case 6:Ft(t,a.Zt,n);break;case 8:Pt(t,a.Zt,n);break;case 7:Ct(t,a.Zt,n);break;case 2:Bt(t,a.Zt,n);break;case 3:Rt(t,a.Zt,n);break;case 9:Et(t,a.Zt,n);break;case 10:Wt(t,a.Zt,n);break;case 11:Dt(t,a.Zt,n)}switch(a.nn!==e&&(e=a.nn,t.$t.frontFace(a.nn)),a.G){case 0:Mt(t,l,a);break;case 1:At(t,l,a);break;case 5:a.Vn!==i&&bt(t,l,a);break;case 6:a.Vn!==i&&St(t,l,a);break;case 8:kt(t,l,a);break;case 7:It(t,l,a);break;case 2:Lt(t,l,a);break;case 3:Vt(t,r,l,a);break;case 9:{let n=t.i.vn[r];n.yn.length&&Kt(t,a,n);break}case 10:{let n=t.i.vn[r];n.yn.length&&Xt(t,a,n);break}case 11:Ht(t,l,a)}}}function xt(t,n,i){t.$t.useProgram(n.Pn),t.$t.uniformMatrix4fv(n.Yt.Cn,!1,i.Cn)}function Mt(t,n,i){t.$t.uniformMatrix4fv(i.Zt.Yt.i,!1,n.i),t.$t.uniform4fv(i.Zt.Yt.Bt,i.Bt),t.$t.bindVertexArray(i.on),t.$t.drawElements(i.Zt.In,i.tn.Bn,zn,0),t.$t.bindVertexArray(null)}function zt(t,n,i){t.$t.useProgram(n.Pn),t.$t.uniformMatrix4fv(n.Yt.Cn,!1,i.Cn),t.$t.uniform3fv(n.Yt.En,i.Kn),t.$t.uniform4fv(n.Yt.Kt,t.Kt),t.$t.uniform4fv(n.Yt.Wt,t.Wt)}function At(t,n,i){t.$t.uniformMatrix4fv(i.Zt.Yt.i,!1,n.i),t.$t.uniformMatrix4fv(i.Zt.Yt.Ht,!1,n.Ht),t.$t.uniform4fv(i.Zt.Yt.en,i.en),t.$t.uniform4fv(i.Zt.Yt.rn,i.rn),t.$t.uniform1f(i.Zt.Yt.ln,i.ln),t.$t.bindVertexArray(i.on),t.$t.drawElements(i.Zt.In,i.tn.Bn,zn,0),t.$t.bindVertexArray(null)}function Tt(t,n,i){t.$t.useProgram(n.Pn),t.$t.uniformMatrix4fv(n.Yt.Cn,!1,i.Cn)}function bt(t,n,i){t.$t.uniformMatrix4fv(i.Zt.Yt.i,!1,n.i),t.$t.activeTexture(xn),t.$t.bindTexture(wn,i.Vn),t.$t.uniform1i(i.Zt.Yt.Wn,0),t.$t.uniform4fv(i.Zt.Yt.Bt,i.Bt),t.$t.bindVertexArray(i.on),t.$t.drawElements(i.Zt.In,i.tn.Bn,zn,0),t.$t.bindVertexArray(null)}function Ft(t,n,i){t.$t.useProgram(n.Pn),t.$t.uniformMatrix4fv(n.Yt.Cn,!1,i.Cn),t.$t.uniform3fv(n.Yt.En,i.Kn),t.$t.uniform4fv(n.Yt.Kt,t.Kt),t.$t.uniform4fv(n.Yt.Wt,t.Wt)}function St(t,n,i){t.$t.uniformMatrix4fv(i.Zt.Yt.i,!1,n.i),t.$t.uniformMatrix4fv(i.Zt.Yt.Ht,!1,n.Ht),t.$t.uniform4fv(i.Zt.Yt.en,i.en),t.$t.uniform4fv(i.Zt.Yt.rn,i.rn),t.$t.uniform1f(i.Zt.Yt.ln,i.ln),t.$t.activeTexture(xn),t.$t.bindTexture(wn,i.Vn),t.$t.uniform1i(i.Zt.Yt.Xn,0),t.$t.bindVertexArray(i.on),t.$t.drawElements(i.Zt.In,i.tn.Bn,zn,0),t.$t.bindVertexArray(null)}function Pt(t,n,i){t.$t.useProgram(n.Pn),t.$t.uniformMatrix4fv(n.Yt.Cn,!1,i.Cn)}function kt(t,n,i){t.$t.uniformMatrix4fv(i.Zt.Yt.i,!1,n.i),t.$t.uniform4fv(i.Zt.Yt.Bt,i.Bt),t.$t.bindBuffer(vn,i.jt),t.$t.enableVertexAttribArray(i.Zt.Yt.Ut),t.$t.vertexAttribPointer(i.Zt.Yt.Ut,3,An,!1,0,0),t.$t.drawArrays(i.Zt.In,0,i.Bn)}function Ct(t,n,i){t.$t.useProgram(n.Pn),t.$t.uniformMatrix4fv(n.Yt.Cn,!1,i.Cn),t.$t.uniform3fv(n.Yt.En,i.Kn),t.$t.uniform4fv(n.Yt.Kt,t.Kt),t.$t.uniform4fv(n.Yt.Wt,t.Wt)}function It(t,n,i){t.$t.uniformMatrix4fv(i.Zt.Yt.i,!1,n.i),t.$t.uniformMatrix4fv(i.Zt.Yt.Ht,!1,n.Ht),t.$t.uniform4fv(i.Zt.Yt.en,i.en),t.$t.activeTexture(33985),t.$t.bindTexture(wn,i.Xn),t.$t.uniform1i(i.Zt.Yt.Xn,1),t.$t.activeTexture(33986),t.$t.bindTexture(wn,i.Dn),t.$t.uniform1i(i.Zt.Yt.Dn,2),t.$t.activeTexture(33987),t.$t.bindTexture(wn,i.Hn),t.$t.uniform1i(i.Zt.Yt.Hn,3),t.$t.bindVertexArray(i.on),t.$t.drawElements(i.Zt.In,i.tn.Bn,zn,0),t.$t.bindVertexArray(null)}function Bt(t,n,i){t.$t.useProgram(n.Pn),t.$t.uniformMatrix4fv(n.Yt.Cn,!1,i.Cn),t.$t.uniform3fv(n.Yt.En,i.Kn),t.$t.uniform4fv(n.Yt.Kt,t.Kt),t.$t.uniform4fv(n.Yt.Wt,t.Wt),t.$t.activeTexture(xn),t.$t.bindTexture(wn,t.Gn.Nn.M),t.$t.uniform1i(n.Yt.$n,0);let o=gt(t.i,4112);o&&t.$t.uniformMatrix4fv(n.Yt.jn,!1,t.i.Un[o].Cn)}function Lt(t,n,i){t.$t.uniformMatrix4fv(i.Zt.Yt.i,!1,n.i),t.$t.uniformMatrix4fv(i.Zt.Yt.Ht,!1,n.Ht),t.$t.uniform4fv(i.Zt.Yt.en,i.en),t.$t.uniform4fv(i.Zt.Yt.rn,i.rn),t.$t.uniform1f(i.Zt.Yt.ln,i.ln),t.$t.bindVertexArray(i.on),t.$t.drawElements(i.Zt.In,i.tn.Bn,zn,0),t.$t.bindVertexArray(null)}function Rt(t,n,i){t.$t.useProgram(n.Pn),t.$t.uniformMatrix4fv(n.Yt.Cn,!1,i.Cn),t.$t.uniform3fv(n.Yt.En,i.Kn),t.$t.uniform4fv(n.Yt.Kt,t.Kt),t.$t.uniform4fv(n.Yt.Wt,t.Wt)}function Vt(t,n,o,e){t.$t.uniformMatrix4fv(e.Zt.Yt.i,!1,o.i),t.$t.uniformMatrix4fv(e.Zt.Yt.Ht,!1,o.Ht),t.$t.uniform4fv(e.Zt.Yt.en,e.en),t.$t.uniform4fv(e.Zt.Yt.rn,e.rn),t.$t.uniform1f(e.Zt.Yt.ln,e.ln);let r=[];if(32&t.i.o[n])for(let o of i(t.i,n,4194312))r.push(o);else{let i=n;for(let n=0;n<5;n++){let n=gt(t.i,4194312,i);n&&(r.push(n),i=n+1)}}for(let n of r){let i=t.i.A[n],o=t.i.Yn[n];_(to.subarray(16*o.On),i.i,o.qn)}t.$t.uniformMatrix4fv(e.Zt.Yt.Jn,!1,to),t.$t.bindVertexArray(e.on),t.$t.drawElements(e.Zt.In,e.tn.Bn,zn,0),t.$t.bindVertexArray(null)}function Et(t,n,i){t.$t.useProgram(n.Pn),t.$t.uniformMatrix4fv(n.Yt.Cn,!1,i.Cn)}function Kt(t,n,i){t.$t.uniform4fv(n.Zt.Yt.Qn,n.Qn),t.$t.uniform4fv(n.Zt.Yt.Zn,n.Zn),t.$t.uniform4f(n.Zt.Yt.ti,i.Lt,i.ni,...n.rt);let o=Float32Array.from(i.yn);t.$t.bindBuffer(vn,n.$),t.$t.bufferSubData(vn,0,o),t.$t.enableVertexAttribArray(n.Zt.Yt.ii),t.$t.vertexAttribPointer(n.Zt.Yt.ii,4,An,!1,32,0),t.$t.enableVertexAttribArray(n.Zt.Yt.vt),t.$t.vertexAttribPointer(n.Zt.Yt.vt,3,An,!1,32,16),t.$t.drawArrays(n.Zt.In,0,i.yn.length/8)}function Wt(t,n,i){t.$t.useProgram(n.Pn),t.$t.uniformMatrix4fv(n.Yt.Cn,!1,i.Cn)}function Xt(t,n,i){t.$t.uniform4fv(n.Zt.Yt.Qn,n.Qn),t.$t.uniform4fv(n.Zt.Yt.Zn,n.Zn),t.$t.activeTexture(xn),t.$t.bindTexture(wn,n.Vn),t.$t.uniform1i(n.Zt.Yt.Wn,0),t.$t.uniform4f(n.Zt.Yt.ti,i.Lt,i.ni,...n.rt);let o=Float32Array.from(i.yn);t.$t.bindBuffer(vn,n.$),t.$t.bufferSubData(vn,0,o),t.$t.enableVertexAttribArray(n.Zt.Yt.ii),t.$t.vertexAttribPointer(n.Zt.Yt.ii,4,An,!1,32,0),t.$t.enableVertexAttribArray(n.Zt.Yt.oi),t.$t.vertexAttribPointer(n.Zt.Yt.oi,4,An,!1,32,16),t.$t.drawArrays(n.Zt.In,0,i.yn.length/8)}function Dt(t,n,i){t.$t.useProgram(n.Pn),t.$t.uniformMatrix4fv(n.Yt.Cn,!1,i.Cn),t.$t.uniform4fv(n.Yt.Kt,t.Kt),t.$t.uniform4fv(n.Yt.Wt,t.Wt)}function Ht(t,n,i){t.$t.uniformMatrix4fv(i.Zt.Yt.i,!1,n.i),t.$t.uniformMatrix4fv(i.Zt.Yt.Ht,!1,n.Ht),t.$t.uniform3fv(i.Zt.Yt._n,i._n),t.$t.bindVertexArray(i.on),t.$t.drawElementsInstanced(i.Zt.In,i.tn.Bn,zn,0,i.hn),t.$t.bindVertexArray(null)}function Nt(t,n){let i=t.i.ei[n],o=t.i.A[n];o.R=[Math.random()-.5,Math.random()-.5,Math.random()-.5],x(o.R,o.R,2*i.ri),o.V=!0}function Gt(t=[0,0,0],n=[0,0,0,1],i=[1,1,1]){return(o,e)=>{o.i.o[e]|=4194304,o.i.A[e]={i:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Ht:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],R:t,K:n,W:i,V:!0}}}function $t(n,i,o){let e=n.i.li[i];if(e.gn+=o,e.gn>e.ai){e.gn=0;let o=n.i.A[i],r=[0,0,0];v(r,o.i);let l=[0,0,0,0];g(l,o.i),t(n,[...e.si(n),Gt(r,l)])}}function jt(t,n,i){let o=t.i.fi[n];o.gn+=i,o.gn>o.pn&&(o.gn=0,o.ci?(o.ci=!1,t.i.o[n]&=~o.ui):(o.ci=!0,t.i.o[n]|=o.ui))}function Ut(t,n){for(let n=0;n<t.i.o.length;n++)if((t.i.o[n]&eo)===eo){let i=t.i.A[n];i.V&&Yt(t.i,n,i)}}function Yt(t,n,i){if(i.V=!1,function(t,n,i,o){let e=n[0],r=n[1],l=n[2],a=n[3],s=e+e,f=r+r,c=l+l,u=e*s,h=e*f,_=e*c,m=r*f,d=r*c,v=l*c,g=a*s,p=a*f,y=a*c,w=o[0],x=o[1],M=o[2];t[0]=(1-(m+v))*w,t[1]=(h+y)*w,t[2]=(_-p)*w,t[3]=0,t[4]=(h-y)*x,t[5]=(1-(u+v))*x,t[6]=(d+g)*x,t[7]=0,t[8]=(_+p)*M,t[9]=(d-g)*M,t[10]=(1-(u+m))*M,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1}(i.i,i.K,i.R,i.W),void 0!==i.Dt&&_(i.i,t.A[i.Dt].i,i.i),h(i.Ht,i.i),32&t.o[n]){let i=t.l[n];for(let o of i.l)if(4194304&t.o[o]){let i=t.A[o];i.Dt=n,Yt(t,o,i)}}}function Ot(t,n){let i=t.i.Tn[n],o=t.i.F[n];for(let r of i.ct)o.ui&t.i.Tn[r.ut].ft&&e(t,o.Vt,[n,r.ut])}function qt(t,...n){return t.reduce(((t,i)=>t+function(t){let n=t.shift();return"boolean"==typeof n||null==n?"":Array.isArray(n)?n.join(""):n}(n)+i))}function Jt(){return so=16807*so%2147483647,(so-1)/2147483646}function Qt(t=0,n=1){return~~(Jt()*(n-t+1)+t)}function Zt(t=0,n=1){return Jt()*(n-t)+t}function tn(t,n,i,o=[.9,.9,.9,1]){return(e,r)=>{e.i.o[r]|=16,e.i.Un[r]={G:0,J:{G:0,Z:t,tt:n,nt:i,J:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],it:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},hi:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Cn:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Kn:[0,0,0],Sn:o}}}function nn(t,n,i,o,e=[0,0,0,1]){return(r,l)=>{r.i.o[l]|=16,r.i.Un[l]={G:3,Fn:t,J:{G:1,ot:n,tt:i,nt:o,J:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],it:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},hi:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Cn:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Kn:[0,0,0],Sn:e}}}function on(t){return 1-(1-t)**4}function en(t){return t<.5?8*t**4:1-(-2*t+2)**4/2}function rn(t){return(n,i)=>{let o={};for(let n in t){let{I:i,C:e=7}=t[n],r=i[i.length-1].B;o[n]={I:i.map((t=>({...t}))),C:e,X:r,k:0}}n.i.o[i]|=1,n.i.T[i]={S:o,P:o.idle}}}function ln(t,n){return(i,o)=>{i.i.o[o]|=8,i.i.Yn[o]={On:t,V:void 0===n,qn:n||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}}}function an(t){return[rt(t._i,t.mi,[1,.5,0,1],0),n([Gt([0,.35,-.47],[.672,0,0,.74]),ln(0,[1,0,0,0,0,.096,-.995,0,0,.995,.096,0,0,.433,.395,1]),rn({idle:{I:[{B:1/0,R:[0,.35,-.47],K:[.672,0,0,.74]}]},jump:{I:[{B:0,R:[0,.63,0]},{B:.2,R:[0,1.13,0],L:en},{B:.4,R:[0,.63,0],L:on}],C:0}}),n([Gt([0,.46,0],[-.4,0,0,.92]),ln(1,[1,0,0,0,0,.795,-.606,0,0,.606,.795,0,0,-.306,.251,1]),rn({idle:{I:[{B:0,K:P([0,0,0,1],-30,15,0),L:en},{B:1,K:P([0,0,0,1],-30,-15,0),L:en}]},walk:{I:[{B:0,K:P([0,0,0,1],-30,0,5)},{B:.2,K:P([0,0,0,1],-30,0,-5)}]},jump:{I:[{B:0,K:[0,0,0,1]},{B:.2,K:P([0,0,0,1],-15,0,0),L:en},{B:.4,K:P([0,0,0,1],0,0,0),L:on}],C:0}})],[Gt([.07,.46,0],[.74,0,0,.672]),ln(2,[1,0,0,0,0,-1,0,0,0,-0,-1,0,-.073,.395,-.015,1]),rn({idle:{I:[{B:0}]},walk:{I:[{B:0,K:P([0,0,0,1],80,0,0)},{B:.2,K:P([0,0,0,1],125,0,0)}]},jump:{I:[{B:0,K:[0,0,0,1]},{B:.2,K:P([0,0,0,1],0,0,135),L:en},{B:.4,K:[0,0,0,1],L:on}],C:0}})],[Gt([-.07,.46,0],[.74,0,0,.672]),ln(3,[1,0,0,0,0,-1,0,0,0,-0,-1,0,.073,.395,-.015,1]),rn({idle:{I:[{B:0}]},walk:{I:[{B:0,K:P([0,0,0,1],125,0,0)},{B:.2,K:P([0,0,0,1],80,0,0)}]},jump:{I:[{B:0,K:[0,0,0,1]},{B:.2,K:P([0,0,0,1],0,0,-135),L:en},{B:.4,K:[0,0,0,1],L:on}],C:0}})],[Gt([.07,0,0],[.753,0,0,.658]),ln(4,[1,0,0,0,0,-.992,.124,0,0,-.124,-.992,0,-.073,.291,-.509,1]),rn({idle:{I:[{B:0}]},walk:{I:[{B:0,K:P([0,0,0,1],125,0,0)},{B:.2,K:P([0,0,0,1],80,0,0)}]},jump:{I:[{B:0,K:[0,0,0,1]},{B:.2,K:P([0,0,0,1],0,0,45),L:en},{B:.4,K:[0,0,0,1],L:on}],C:0}})],[Gt([-.07,0,0],[.753,0,0,.658]),ln(5,[1,0,0,0,0,-.992,.124,0,0,-.124,-.992,0,.073,.291,-.509,1]),rn({idle:{I:[{B:0}]},walk:{I:[{B:0,K:P([0,0,0,1],80,0,0)},{B:.2,K:P([0,0,0,1],125,0,0)}]},jump:{I:[{B:0,K:[0,0,0,1]},{B:.2,K:P([0,0,0,1],0,0,-45),L:en},{B:.4,K:[0,0,0,1],L:on}],C:0}})])])]}function sn(t,n){return(i,o)=>{i.i.o[o]|=128,i.i._t[o]={vt:t,K:n}}}function fn(t=[1,1,1],n=1){return(i,o)=>{i.i.o[o]|=4096,i.i.Et[o]={G:1,Bt:t,Xt:n**2}}}function cn(t,n){return(i,o)=>{i.i.o[o]|=16384,i.i.dt[o]={Nt:t,Gt:n,gt:[],yt:[],Tt:[]}}}function un(t){return[sn(null,[0,1,0,0]),cn(0,1.5),n([Gt([0,10,10],P([0,0,0,1],-45,0,0)),fn([1,1,1],.9),nn(t.Gn.Nn,10,1,100)])]}function hn(t,i=.7,o=2.5){let e=Zt(.5,.9),r=Qt(400,600),l=Zt(i,o),a=[],s=[];for(let t=0;t<r;t++)a.push(Zt(-e,e),Zt(-e,e),Zt(-e,e),Qt(0,7)),s.push(...P([0,0,0,0],Zt(-90,90),Zt(-90,90),Zt(-90,90)));return[n([Gt([0,l/2,0],void 0,[.1,l,.1]),ot(t.di,t.vi,[.64,.16,.16,1])],[Gt([0,l,0]),lt(t.gi,Float32Array.from(a),Float32Array.from(s),fo)])]}function _n(t,n=0,i=0,o=0,e=0){return(r,l)=>{r.i.o[l]|=256,r.i.wt[l]={dt:t,Mt:n,zt:i,At:o,bt:e}}}function mn(t,n=.1){return(i,o)=>{i.i.o[o]|=8192,i.i.pi[o]={Fn:t,yi:n}}}const dn=35044,vn=34962,gn=34963,pn=2304,yn=9729,wn=3553,xn=33984,Mn=36160,zn=5123,An=5126,Tn=document.getElementById("update"),bn=document.getElementById("delta"),Fn=document.getElementById("fps"),Sn=1/60;let Pn=Float32Array.from([-.5,-.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,-.5,-.5,.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5]),kn=Float32Array.from([-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,1,0,0,1,0,0,1,0,0,1,0,0,0,0,1,0,0,1,0,0,1,0,0,1,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,1,0,0,1,0,0,1,0,0,1,0]),Cn=Float32Array.from([.666667,.333333,.333333,.333333,.333333,0,.666667,0,.333333,.666667,0,.666667,0,.333333,.333333,.333333,.333333,.333333,0,.333333,0,0,.333333,0,.333333,.666667,.333333,.333333,.666667,.333333,.666667,.666667,1,.333333,.666667,.333333,.666667,0,1,0,.333333,.666667,.333333,1,0,1,0,.666667]),In=Float32Array.from([]),Bn=Uint16Array.from([23,22,20,22,21,20,19,18,16,18,17,16,15,14,12,14,13,12,11,10,8,10,9,8,7,6,4,6,5,4,3,2,0,2,1,0]),Ln=Float32Array.from([-.008597,.008676,0,.008402,.007591,0,0,.416493,.06595,-.008597,.008676,0,0,-.416493,.06595,.008402,.007591,0]),Rn=Float32Array.from([-.0102,-.1594,.9872,-.0102,-.1594,.9872,-.0102,-.1594,.9872,.0098,.1535,.9881,.0098,.1535,.9881,.0098,.1535,.9881]),Vn=Float32Array.from([0,0,1,1,0,1,0,0,1,0,1,1]),En=Float32Array.from([]),Kn=Uint16Array.from([5,4,3,2,1,0]),Wn=Float32Array.from([.040103,0,.044704,-.054562,0,-.050619,-.124883,.01643,.126198,.040103,0,.044704,.12554,.021688,-.126198,-.054562,0,-.050619]),Xn=Float32Array.from([.0665,.9956,-.0661,.0665,.9956,-.0661,.0665,.9956,-.0661,-.0844,.9929,.0838,-.0844,.9929,.0838,-.0844,.9929,.0838]),Dn=Float32Array.from([1,0,0,1,0,0,1,0,1,1,0,1]),Hn=Float32Array.from([]),Nn=Uint16Array.from([5,4,3,2,1,0]),Gn=Float32Array.from([.147,.44,.021,.073,-0,-.008,.132,.234,-.28,.088,.409,-.55,.073,-.001,-.521,.103,.688,.168,.176,.893,.08,-.147,.44,.021,0,.482,-.037,0,.219,-.012,-.073,-0,-.008,-.132,.234,-.28,0,.219,-.53,-.088,.409,-.55,0,.432,-.585,-.073,-.001,-.521,-.103,.688,.168,0,.571,.373,-.176,.893,.08,0,.746,.168]),$n=Float32Array.from([.997,.009,.083,-.007,-.962,.275,.797,-.599,-.074,.688,.428,-.586,.035,-.971,-.235,.726,.191,.661,.417,.903,-.104,-.997,.009,.083,0,.785,-.62,0,-.59,.807,.007,-.962,.275,-.797,-.599,-.074,0,-.472,-.882,-.688,.428,-.586,0,.571,-.821,-.035,-.971,-.235,-.726,.191,.661,0,-.039,.999,-.417,.903,-.104,0,.932,.363]),jn=Float32Array.from([]),Un=Float32Array.from([2,.918,1,.082,2,1,0,0,4,.5,2,.5,4,.907,0,.093,4,1,0,0,1,.893,2,.107,1,1,0,0,3,.918,1,.082,1,1,0,0,2,.5,3,.5,3,1,0,0,5,.5,3,.5,0,1,0,0,5,.907,0,.093,0,1,0,0,5,1,0,0,1,.893,3,.107,1,1,0,0,1,1,0,0,1,1,0,0]),Yn=Uint16Array.from([18,19,16,19,17,16,7,13,8,16,17,7,19,18,8,8,18,7,7,17,9,7,18,16,12,11,9,11,15,13,12,15,11,12,14,13,13,15,12,11,13,7,13,14,8,9,10,7,11,10,9,7,10,11,19,6,5,17,19,5,3,0,8,17,5,0,6,19,8,6,8,0,17,0,9,6,0,5,2,12,9,4,2,3,4,12,2,14,12,3,4,3,12,3,2,0,14,3,8,1,9,0,1,2,9,1,0,2]),On=Float32Array.from([-.3,1.2,-.15,.45,1.47,0,.3,1.2,-.15,.27,.63,0,0,.63,.15,.15,0,0,.3,1.2,.15,1.05,1.35,0,-1.05,1.35,0,-.45,1.47,0,-.3,1.2,.15,0,.63,-.15,-.15,0,0,-.27,.63,0,0,2.25,-.15,0,2.25,.45]),qn=Float32Array.from([-.424,-.0402,-.9048,.3556,.9341,-.0314,.424,-.0402,-.9048,.9544,-.2985,0,0,-.2684,.9633,.0912,-.9958,0,.424,-.0402,.9048,.9979,.0645,0,-.9979,.0645,0,-.3556,.9341,-.0314,-.424,-.0402,.9048,0,-.2684,-.9633,-.0912,-.9958,0,-.9544,-.2985,0,0,.767,-.6416,0,.6255,.7802]),Jn=Float32Array.from([]),Qn=Float32Array.from([3,1,0,0,1,.75,2,.25,2,1,0,0,4,1,0,0,4,.5,5,.5,4,1,0,0,2,1,0,0,2,1,0,0,3,1,0,0,1,.75,3,.25,3,1,0,0,4,.5,5,.5,5,1,0,0,5,1,0,0,1,1,0,0,1,1,0,0]),Zn=Uint16Array.from([15,9,14,1,15,14,9,15,1,1,14,9,2,7,1,9,1,6,6,7,2,7,6,1,6,2,3,6,3,4,5,4,3,11,3,2,4,5,11,4,11,12,11,5,3,12,13,4,13,12,11,10,6,4,10,4,13,6,10,9,8,9,10,0,11,2,0,13,11,1,9,0,10,0,8,0,10,13,9,8,0,2,1,0]),ti=Float32Array.from([-.111,.575,-.859,-0,.384,-.481,-0,.251,-.862,.131,.518,-.819,-.152,.634,-1.248,-.008,.196,-1.3,.216,.518,-1.191,-.247,.793,-1.762,-0,.141,-1.608,.242,.549,-1.756,-.208,.738,-2.194,-0,.234,-2.101,.167,.495,-2.202,-.076,.65,-2.622,-0,.376,-2.482,.137,.502,-2.539,-.038,.426,-2.917]),ni=Float32Array.from([-.701,.652,.289,-.03,-.161,.986,-.097,-.964,.248,.848,.425,.317,-.708,.678,.198,-.131,-.98,.148,.94,.301,.159,-.662,.749,-.02,-.089,-.996,.005,.956,.294,-.017,-.643,.705,-.298,-.11,-.97,-.215,.976,.155,-.154,-.456,.779,-.431,-.203,-.949,-.242,.966,.102,-.237,-.139,-.245,-.96]),ii=Float32Array.from([]),oi=Float32Array.from([0,.933,1,.067,0,1,0,0,0,.946,1,.054,0,.953,1,.047,1,.942,2,.058,1,.877,2,.123,1,.97,2,.03,2,.858,3,.142,2,.911,3,.089,2,.932,3,.068,3,.917,4,.083,3,.937,4,.063,3,.945,4,.055,4,.983,3,.017,4,.917,3,.083,4,.956,3,.044,4,1,0,0]),ei=Uint16Array.from([16,15,13,16,14,15,16,13,14,13,15,10,15,12,10,15,14,12,14,11,12,14,13,11,13,10,11,12,11,9,11,8,9,11,10,8,10,7,8,8,7,5,7,4,5,7,9,4,9,6,4,10,12,7,12,9,7,6,5,3,5,2,3,5,4,2,4,0,2,4,6,0,6,3,0,9,8,6,8,5,6,1,0,3,1,3,2,2,0,1]),ri=Float32Array.from([.5,0,.5,-.5,0,-.5,-.5,0,.5,.5,0,-.5]),li=Float32Array.from([0,1,0,0,1,0,0,1,0,0,1,0]),ai=Float32Array.from([1,0,0,1,0,0,1,1]),si=Float32Array.from([]),fi=Uint16Array.from([1,3,0,2,1,0]);const ci=Math.PI/180,ui=4194305,hi=4194306;let _i,mi=[0,0,0],di=[0,0,0],vi=[0,0,0];const gi=4194308,pi=[0,0,0],yi=[0,0,0],wi=4194320,xi=[[.5,.5,.5],[.5,.5,-.5],[-.5,.5,-.5],[-.5,.5,.5],[.5,-.5,.5],[.5,-.5,-.5],[-.5,-.5,-.5],[-.5,-.5,.5]],Mi=4194368,zi=4210816,Ai=4210944,Ti=[1,0,0],bi=[0,1,0],Fi=[0,0,0,0],Si=[0,1,0],Pi=[1,0,0],ki=[0,0],Ci=[0,0,0,0],Ii=[0,1,0],Bi=[1,0,0],Li=.1,Ri=4194816,Vi=4198400;let Ei=[0,0,0];const Ki=4202496,Wi=4210688,Xi=[0,0,0,1],Di=new WeakMap,Hi=new WeakMap,Ni=new WeakMap,Gi=4195328;let $i=[0,0,0],ji=[0,0,0];const Ui=4325376,Yi=4325376,Oi=4325440;let qi=[0,0,0];const Ji=1048576,Qi=4259840,Zi=4259840,to=new Float32Array(96),no=4456448,io=4718592,oo=2097152,eo=4194304,ro=12582976;let lo;class ao extends class{constructor(){this.o=[],this.wi=[]}t(){return this.wi.length>0?this.wi.pop():this.o.push(0)-1}u(t){this.o[t]=0,this.wi.push(t)}}{constructor(){super(...arguments),this.T=[],this.D=[],this.Yn=[],this.Un=[],this.l=[],this.Tn=[],this._t=[],this.wt=[],this.xi=[],this.vn=[],this.Lt=[],this.Et=[],this.pi=[],this.dt=[],this.Mi=[],this.Qt=[],this.wn=[],this.ei=[],this.li=[],this.zi=[],this.fi=[],this.A=[],this.F=[]}}let so=1;const fo=[0,1,0,0,.36,0,0,.5,0,.48,.98,0,1,.84,0,1,.54,0,.84,.21,.21];let co=new class extends class extends class{constructor(){this.Ai=0,this.Ti=0,this.St=window.innerWidth,this.Pt=window.innerHeight,this.bi=!0,this.xt={MouseX:0,MouseY:0},this.Ft={MouseX:0,MouseY:0},this.Fi={Mouse:0,Mouse0:0,Mouse1:0,Mouse2:0,Touch0:0,Touch1:0},this.Si={},this.Pi=document.querySelector("main"),document.addEventListener("visibilitychange",(()=>document.hidden?this.ki():this.Ci())),this.Pi.addEventListener("contextmenu",(t=>t.preventDefault())),this.Pi.addEventListener("mousedown",(t=>{this.xt["Mouse"+t.button]=1,this.Ft["Mouse"+t.button]=1})),this.Pi.addEventListener("mouseup",(t=>{this.xt["Mouse"+t.button]=0,this.Ft["Mouse"+t.button]=-1})),this.Pi.addEventListener("mousemove",(t=>{this.xt.MouseX=t.clientX,this.xt.MouseY=t.clientY,this.Ft.MouseX=t.movementX,this.Ft.MouseY=t.movementY})),this.Pi.addEventListener("wheel",(t=>{t.preventDefault(),this.Ft.WheelY=t.deltaY})),this.Pi.addEventListener("touchstart",(t=>{t.preventDefault(),1===t.touches.length&&(this.Si={});for(let n=0;n<t.touches.length;n++)this.Si[t.touches[n].identifier]=n;for(let n=0;n<t.changedTouches.length;n++){let i=t.changedTouches[n],o=this.Si[i.identifier];this.xt["Touch"+o]=1,this.xt[`Touch${o}X`]=i.clientX,this.xt[`Touch${o}Y`]=i.clientY,this.Ft["Touch"+o]=1,this.Ft[`Touch${o}X`]=0,this.Ft[`Touch${o}Y`]=0}})),this.Pi.addEventListener("touchmove",(t=>{t.preventDefault();for(let n=0;n<t.changedTouches.length;n++){let i=t.changedTouches[n],o=this.Si[i.identifier];this.Ft[`Touch${o}X`]=i.clientX-this.xt[`Touch${o}X`],this.Ft[`Touch${o}Y`]=i.clientY-this.xt[`Touch${o}Y`],this.xt[`Touch${o}X`]=i.clientX,this.xt[`Touch${o}Y`]=i.clientY}})),this.Pi.addEventListener("touchend",(t=>{t.preventDefault();for(let n=0;n<t.changedTouches.length;n++){let i=this.Si[t.changedTouches[n].identifier];this.xt["Touch"+i]=0,this.Ft["Touch"+i]=-1}})),this.Pi.addEventListener("touchcancel",(t=>{t.preventDefault();for(let n=0;n<t.changedTouches.length;n++){let i=this.Si[t.changedTouches[n].identifier];this.xt["Touch"+i]=0,this.Ft["Touch"+i]=-1}})),window.addEventListener("keydown",(t=>{t.repeat||(this.xt[t.code]=1,this.Ft[t.code]=1)})),window.addEventListener("keyup",(t=>{this.xt[t.code]=0,this.Ft[t.code]=-1}))}Ci(){let t=0,n=performance.now(),i=o=>{let e=(o-n)/1e3;for(this.Ii(e),t+=e;t>=Sn;)t-=Sn,this.Bi(Sn);this.Li(e),this.Ri(e),n=o,this.Ai=requestAnimationFrame(i)};this.ki(),i(n)}ki(){cancelAnimationFrame(this.Ai),this.Ai=0}Ii(t){this.Ti=performance.now();let n=Math.abs(this.Ft.MouseX)+Math.abs(this.Ft.MouseY);this.Fi.Mouse+=n,1===this.xt.Mouse0&&(this.Fi.Mouse0+=n),1===this.xt.Mouse1&&(this.Fi.Mouse1+=n),1===this.xt.Mouse2&&(this.Fi.Mouse2+=n),1===this.xt.Touch0&&(this.Fi.Touch0+=Math.abs(this.Ft.Touch0X)+Math.abs(this.Ft.Touch0Y)),1===this.xt.Touch1&&(this.Fi.Touch1+=Math.abs(this.Ft.Touch1X)+Math.abs(this.Ft.Touch1Y))}Bi(t){}Li(t){}Ri(t){this.bi=!1,-1===this.Ft.Mouse0&&(this.Fi.Mouse0=0),-1===this.Ft.Mouse1&&(this.Fi.Mouse1=0),-1===this.Ft.Mouse2&&(this.Fi.Mouse2=0),-1===this.Ft.Touch0&&(this.Fi.Touch0=0),-1===this.Ft.Touch1&&(this.Fi.Touch1=0);for(let t in this.Ft)this.Ft[t]=0;let n=performance.now()-this.Ti;Tn&&(Tn.textContent=n.toFixed(1)),bn&&(bn.textContent=(1e3*t).toFixed(1)),Fn&&(Fn.textContent=(1/t).toFixed())}}{constructor(){super(),this.Vi=document.querySelector("#billboard"),this.kt=this.Vi.getContext("2d"),this.Ei=document.querySelector("#scene"),this.$t=this.Ei.getContext("webgl2"),this.Audio=new AudioContext,this.$t.enable(2929),this.$t.enable(2884)}}{constructor(){super(...arguments),this.i=new ao,this.di=function(t){let n=s(t,"#version 300 es\n\n\nuniform mat4 pv;\nuniform mat4 world;\nuniform mat4 self;\n\nin vec3 attr_position;\nin vec3 attr_normal;\n\nout vec4 vert_position;\nout vec3 vert_normal;\n\nvoid main() {\nvert_position = world * vec4(attr_position, 1.0);\nvert_normal = (vec4(attr_normal, 1.0) * self).xyz;\ngl_Position = pv * vert_position;\n}\n","#version 300 es\n\nprecision mediump float;\n\n\nconst int MAX_LIGHTS = 8;\n\nuniform vec3 eye;\nuniform vec4 diffuse_color;\nuniform vec4 specular_color;\nuniform float shininess;\nuniform vec4 light_positions[MAX_LIGHTS];\nuniform vec4 light_details[MAX_LIGHTS];\n\nin vec4 vert_position;\nin vec3 vert_normal;\n\nout vec4 frag_color;\n\nvoid main() {\nvec3 world_normal = normalize(vert_normal);\n\nvec3 view_dir = eye - vert_position.xyz;\nvec3 view_normal = normalize(view_dir);\n\n\nvec3 light_acc = diffuse_color.rgb * 0.1;\n\nfor (int i = 0; i < MAX_LIGHTS; i++) {\nif (light_positions[i].w == 0.0) {\nbreak;\n}\n\nvec3 light_color = light_details[i].rgb;\nfloat light_intensity = light_details[i].a;\n\nvec3 light_normal;\nif (light_positions[i].w == 1.0) {\n\nlight_normal = light_positions[i].xyz;\n} else {\nvec3 light_dir = light_positions[i].xyz - vert_position.xyz;\nfloat light_dist = length(light_dir);\nlight_normal = light_dir / light_dist;\n\nlight_intensity /= (light_dist * light_dist);\n}\n\nfloat diffuse_factor = dot(world_normal, light_normal);\nif (diffuse_factor > 0.0) {\n\nlight_acc += diffuse_color.rgb * diffuse_factor * light_color * light_intensity;\n\nif (shininess > 0.0) {\n\n\n\n\n\n\nvec3 h = normalize(light_normal + view_normal);\nfloat specular_angle = max(dot(h, world_normal), 0.0);\nfloat specular_factor = pow(specular_angle, shininess);\n\n\nlight_acc += specular_color.rgb * specular_factor * light_color * light_intensity;\n}\n}\n}\n\nfrag_color = vec4(light_acc, 1.0);\n}\n");return{In:4,Pn:n,Yt:{Cn:t.getUniformLocation(n,"pv"),i:t.getUniformLocation(n,"world"),Ht:t.getUniformLocation(n,"self"),en:t.getUniformLocation(n,"diffuse_color"),rn:t.getUniformLocation(n,"specular_color"),ln:t.getUniformLocation(n,"shininess"),En:t.getUniformLocation(n,"eye"),Kt:t.getUniformLocation(n,"light_positions"),Wt:t.getUniformLocation(n,"light_details"),Ut:t.getAttribLocation(n,"attr_position"),qt:t.getAttribLocation(n,"attr_normal")}}}(this.$t),this.Ki=function(t){let n=s(t,"#version 300 es\n\n\nuniform mat4 pv;\nuniform mat4 world;\nuniform mat4 self;\n\nin vec3 attr_position;\nin vec3 attr_normal;\n\nout vec4 vert_position;\nout vec3 vert_normal;\n\nvoid main() {\nvert_position = world * vec4(attr_position, 1.0);\nvert_normal = (vec4(attr_normal, 1.0) * self).xyz;\ngl_Position = pv * vert_position;\n}\n","#version 300 es\n\nprecision mediump float;\nprecision lowp sampler2DShadow;\n\n\nconst int MAX_LIGHTS = 8;\n\nuniform vec3 eye;\nuniform vec4 diffuse_color;\nuniform vec4 specular_color;\nuniform float shininess;\nuniform vec4 light_positions[MAX_LIGHTS];\nuniform vec4 light_details[MAX_LIGHTS];\nuniform mat4 shadow_space;\nuniform sampler2DShadow shadow_map;\n\nin vec4 vert_position;\nin vec3 vert_normal;\n\nout vec4 frag_color;\n\n\n\nfloat shadow_factor(vec4 world_pos, float min) {\nvec4 shadow_space_pos = shadow_space * world_pos;\nvec3 shadow_space_ndc = shadow_space_pos.xyz / shadow_space_pos.w;\n\nshadow_space_ndc = shadow_space_ndc * 0.5 + 0.5;\n\n\nshadow_space_ndc.z -= 0.001;\n\nreturn texture(shadow_map, shadow_space_ndc) * (1.0 - min) + min;\n}\n\nvoid main() {\nvec3 world_normal = normalize(vert_normal);\n\nvec3 view_dir = eye - vert_position.xyz;\nvec3 view_normal = normalize(view_dir);\n\n\nvec3 light_acc = diffuse_color.rgb * 0.1;\n\nfor (int i = 0; i < MAX_LIGHTS; i++) {\nif (light_positions[i].w == 0.0) {\nbreak;\n}\n\nvec3 light_color = light_details[i].rgb;\nfloat light_intensity = light_details[i].a;\n\nvec3 light_normal;\nif (light_positions[i].w == 1.0) {\n\nlight_normal = light_positions[i].xyz;\n} else {\nvec3 light_dir = light_positions[i].xyz - vert_position.xyz;\nfloat light_dist = length(light_dir);\nlight_normal = light_dir / light_dist;\n\nlight_intensity /= (light_dist * light_dist);\n}\n\nfloat diffuse_factor = dot(world_normal, light_normal);\nif (diffuse_factor > 0.0) {\n\nlight_acc += diffuse_color.rgb * diffuse_factor * light_color * light_intensity;\n\nif (shininess > 0.0) {\n\n\n\n\n\n\nvec3 h = normalize(light_normal + view_normal);\nfloat specular_angle = max(dot(h, world_normal), 0.0);\nfloat specular_factor = pow(specular_angle, shininess);\n\n\nlight_acc += specular_color.rgb * specular_factor * light_color * light_intensity;\n}\n}\n}\n\nvec3 shaded_rgb = light_acc * shadow_factor(vert_position, 0.5);\nfrag_color= vec4(shaded_rgb, 1.0);\n}\n");return{In:4,Pn:n,Yt:{Cn:t.getUniformLocation(n,"pv"),i:t.getUniformLocation(n,"world"),Ht:t.getUniformLocation(n,"self"),en:t.getUniformLocation(n,"diffuse_color"),rn:t.getUniformLocation(n,"specular_color"),ln:t.getUniformLocation(n,"shininess"),En:t.getUniformLocation(n,"eye"),Kt:t.getUniformLocation(n,"light_positions"),Wt:t.getUniformLocation(n,"light_details"),jn:t.getUniformLocation(n,"shadow_space"),$n:t.getUniformLocation(n,"shadow_map"),Ut:t.getAttribLocation(n,"attr_position"),qt:t.getAttribLocation(n,"attr_normal")}}}(this.$t),this.Wi=function(t){let n=s(t,"#version 300 es\n\n\n\nconst int MAX_LIGHTS = 8;\n\nuniform mat4 pv;\nuniform mat4 world;\nuniform mat4 self;\nuniform vec3 eye;\nuniform vec4 diffuse_color;\nuniform vec4 specular_color;\nuniform float shininess;\nuniform vec4 light_positions[MAX_LIGHTS];\nuniform vec4 light_details[MAX_LIGHTS];\nuniform mat4 bones[6];\n\nin vec3 attr_position;\nin vec3 attr_normal;\nin vec4 attr_weights;\n\nout vec4 vert_color;\n\nmat4 world_weighted(vec4 weights) {\nreturn weights[1] * bones[int(weights[0])] + weights[3] * bones[int(weights[2])];\n}\n\nvoid main() {\nmat4 bone_world = world_weighted(attr_weights);\nvec4 world_position = bone_world * vec4(attr_position, 1.0);\nvec3 world_normal = normalize(mat3(bone_world) * attr_normal);\ngl_Position = pv * world_position;\n\nvec3 view_dir = eye - world_position.xyz;\nvec3 view_normal = normalize(view_dir);\n\n\nvec3 light_acc = diffuse_color.rgb * 0.1;\n\nfor (int i = 0; i < MAX_LIGHTS; i++) {\nif (light_positions[i].w == 0.0) {\nbreak;\n}\n\nvec3 light_color = light_details[i].rgb;\nfloat light_intensity = light_details[i].a;\n\nvec3 light_normal;\nif (light_positions[i].w == 1.0) {\n\nlight_normal = light_positions[i].xyz;\n} else {\nvec3 light_dir = light_positions[i].xyz - world_position.xyz;\nfloat light_dist = length(light_dir);\nlight_normal = light_dir / light_dist;\n\nlight_intensity /= (light_dist * light_dist);\n}\n\nfloat diffuse_factor = dot(world_normal, light_normal);\nif (diffuse_factor > 0.0) {\n\nlight_acc += diffuse_color.rgb * diffuse_factor * light_color * light_intensity;\n\nif (shininess > 0.0) {\n\nvec3 h = normalize(light_normal + view_normal);\nfloat specular_angle = max(dot(h, world_normal), 0.0);\nfloat specular_factor = pow(specular_angle, shininess);\n\n\nlight_acc += specular_color.rgb * specular_factor * light_color * light_intensity;\n}\n}\n}\n\nvert_color = vec4(light_acc, 1.0);\n}\n","#version 300 es\n\nprecision mediump float;\n\nin vec4 vert_color;\n\nout vec4 frag_color;\n\nvoid main() {\nfrag_color = vert_color;\n}\n");return{In:4,Pn:n,Yt:{Cn:t.getUniformLocation(n,"pv"),i:t.getUniformLocation(n,"world"),Ht:t.getUniformLocation(n,"self"),en:t.getUniformLocation(n,"diffuse_color"),rn:t.getUniformLocation(n,"specular_color"),ln:t.getUniformLocation(n,"shininess"),En:t.getUniformLocation(n,"eye"),Kt:t.getUniformLocation(n,"light_positions"),Wt:t.getUniformLocation(n,"light_details"),Ut:t.getAttribLocation(n,"attr_position"),qt:t.getAttribLocation(n,"attr_normal"),Jn:t.getUniformLocation(n,"bones"),sn:t.getAttribLocation(n,"attr_weights")}}}(this.$t),this._i=function(t){let n=s(t,"#version 300 es\n\nuniform mat4 pv;\nuniform mat4 world;\nuniform mat4 self;\nuniform mat4 bones[6];\n\nin vec3 attr_position;\nin vec3 attr_normal;\nin vec4 attr_weights;\n\nout vec4 vert_position;\nout vec3 vert_normal;\n\nmat4 world_weighted(vec4 weights) {\nreturn weights[1] * bones[int(weights[0])] + weights[3] * bones[int(weights[2])];\n}\n\nvoid main() {\nmat4 bone_world = world_weighted(attr_weights);\nvert_position = bone_world * vec4(attr_position, 1.0);\nvert_normal = normalize(mat3(bone_world) * attr_normal);\ngl_Position = pv * vert_position;\n}\n","#version 300 es\n\nprecision mediump float;\n\n\nconst int MAX_LIGHTS = 8;\n\nuniform vec3 eye;\nuniform vec4 diffuse_color;\nuniform vec4 specular_color;\nuniform float shininess;\nuniform vec4 light_positions[MAX_LIGHTS];\nuniform vec4 light_details[MAX_LIGHTS];\n\nin vec4 vert_position;\nin vec3 vert_normal;\n\nout vec4 frag_color;\n\nvoid main() {\nvec3 world_normal = normalize(vert_normal);\n\nvec3 view_dir = eye - vert_position.xyz;\nvec3 view_normal = normalize(view_dir);\n\n\nvec3 light_acc = diffuse_color.rgb * 0.1;\n\nfor (int i = 0; i < MAX_LIGHTS; i++) {\nif (light_positions[i].w == 0.0) {\nbreak;\n}\n\nvec3 light_color = light_details[i].rgb;\nfloat light_intensity = light_details[i].a;\n\nvec3 light_normal;\nif (light_positions[i].w == 1.0) {\n\nlight_normal = light_positions[i].xyz;\n} else {\nvec3 light_dir = light_positions[i].xyz - vert_position.xyz;\nfloat light_dist = length(light_dir);\nlight_normal = light_dir / light_dist;\n\nlight_intensity /= (light_dist * light_dist);\n}\n\nfloat diffuse_factor = dot(world_normal, light_normal);\nif (diffuse_factor > 0.0) {\n\nlight_acc += diffuse_color.rgb * diffuse_factor * light_color * light_intensity;\n\nif (shininess > 0.0) {\n\n\n\n\n\n\nvec3 h = normalize(light_normal + view_normal);\nfloat specular_angle = max(dot(h, world_normal), 0.0);\nfloat specular_factor = pow(specular_angle, shininess);\n\n\nlight_acc += specular_color.rgb * specular_factor * light_color * light_intensity;\n}\n}\n}\n\nfrag_color = vec4(light_acc, 1.0);\n}\n");return{In:4,Pn:n,Yt:{Cn:t.getUniformLocation(n,"pv"),i:t.getUniformLocation(n,"world"),Ht:t.getUniformLocation(n,"self"),en:t.getUniformLocation(n,"diffuse_color"),rn:t.getUniformLocation(n,"specular_color"),ln:t.getUniformLocation(n,"shininess"),En:t.getUniformLocation(n,"eye"),Kt:t.getUniformLocation(n,"light_positions"),Wt:t.getUniformLocation(n,"light_details"),Ut:t.getAttribLocation(n,"attr_position"),qt:t.getAttribLocation(n,"attr_normal"),Jn:t.getUniformLocation(n,"bones"),sn:t.getAttribLocation(n,"attr_weights")}}}(this.$t),this.Xi=function(t){let n=s(t,"#version 300 es\n\nuniform mat4 pv;\nuniform vec4 color_start;\nuniform vec4 color_end;\n\nuniform vec4 details;\n\n\nin vec4 attr_origin_age;\nin vec3 attr_direction;\n\nout vec4 vert_color;\n\nvoid main() {\n\nvec3 velocity = attr_direction * details.y;\ngl_Position = pv * vec4(attr_origin_age.xyz + velocity * attr_origin_age.w, 1.0);\n\n\nfloat t = attr_origin_age.w / details.x;\ngl_PointSize = mix(details.z, details.w, t);\nvert_color = mix(color_start, color_end, t);\n}\n","#version 300 es\n\nprecision mediump float;\n\nin vec4 vert_color;\n\nout vec4 frag_color;\n\nvoid main() {\nfrag_color = vert_color;\n}\n");return{In:0,Pn:n,Yt:{Cn:t.getUniformLocation(n,"pv"),Qn:t.getUniformLocation(n,"color_start"),Zn:t.getUniformLocation(n,"color_end"),ti:t.getUniformLocation(n,"details"),ii:t.getAttribLocation(n,"attr_origin_age"),vt:t.getAttribLocation(n,"attr_direction")}}}(this.$t),this.Di=function(t){let n=s(t,"#version 300 es\n\nuniform mat4 pv;\nuniform vec4 color_start;\nuniform vec4 color_end;\n\nuniform vec4 details;\n\n\nin vec4 attr_origin_age;\n\nin vec4 attr_direction_seed;\n\nout vec4 vert_color;\nout float vert_rand;\n\nvoid main() {\n\nvec3 velocity = attr_direction_seed.xyz * details.y;\ngl_Position = pv * vec4(attr_origin_age.xyz + velocity * attr_origin_age.w, 1.0);\n\n\nfloat t = attr_origin_age.w / details.x;\ngl_PointSize = mix(details.z, details.w, t);\nvert_color = mix(color_start, color_end, t);\n\n\nvert_rand = 3.14 * t + attr_direction_seed.w;\n}\n","#version 300 es\n\nprecision mediump float;\n\nuniform sampler2D texture_map;\n\nin vec4 vert_color;\nin float vert_rand;\n\nout vec4 frag_color;\n\nvoid main() {\n\nvec2 uv = gl_PointCoord + floor(vec2(cos(vert_rand) + 0.5, sin(vert_rand) + 0.5));\nfrag_color = vert_color * texture(texture_map, uv / 2.0);\n}\n");return{In:0,Pn:n,Yt:{Cn:t.getUniformLocation(n,"pv"),Wn:t.getUniformLocation(n,"texture_map"),Qn:t.getUniformLocation(n,"color_start"),Zn:t.getUniformLocation(n,"color_end"),ti:t.getUniformLocation(n,"details"),ii:t.getAttribLocation(n,"attr_origin_age"),oi:t.getAttribLocation(n,"attr_direction_seed")}}}(this.$t),this.kn=function(t){let n=s(t,"#version 300 es\n\n\nuniform mat4 pv;\nuniform mat4 world;\n\nin vec3 attr_position;\n\nvoid main() {\ngl_Position = pv * world * vec4(attr_position, 1.0);\n}\n","#version 300 es\n\nprecision mediump float;\n\nout vec4 frag_color;\n\nvoid main() {\n\nfloat z = gl_FragCoord.z * 10.0;\nfrag_color = vec4(z, z, z, 1.0);\n}\n");return{In:4,Pn:n,Yt:{Cn:t.getUniformLocation(n,"pv"),i:t.getUniformLocation(n,"world"),Ut:t.getAttribLocation(n,"attr_position")}}}(this.$t),this.Ln=function(t){let n=s(t,"#version 300 es\n\n\nuniform mat4 pv;\nuniform mat4 world;\n\nin vec3 attr_position;\nin vec4 attr_offset;\nin vec4 attr_rotation;\n\nvoid main() {\nfloat x = attr_rotation.x;\nfloat y = attr_rotation.y;\nfloat z = attr_rotation.z;\nfloat w = attr_rotation.w;\n\nfloat x2 = x + x;\nfloat y2 = y + y;\nfloat z2 = z + z;\nfloat xx = x * x2;\nfloat yx = y * x2;\nfloat yy = y * y2;\nfloat zx = z * x2;\nfloat zy = z * y2;\nfloat zz = z * z2;\nfloat wx = w * x2;\nfloat wy = w * y2;\nfloat wz = w * z2;\n\nfloat m0 = 1.0 - yy - zz;\nfloat m1 = yx + wz;\nfloat m2 = zx - wy;\nfloat m3 = 0.0;\nfloat m4 = yx - wz;\nfloat m5 = 1.0 - xx - zz;\nfloat m6 = zy + wx;\nfloat m7 = 0.0;\nfloat m8 = zx + wy;\nfloat m9 = zy - wx;\nfloat m10 = 1.0 - xx - yy;\nfloat m11 = 0.0;\nfloat m12 = 0.0;\nfloat m13 = 0.0;\nfloat m14 = 0.0;\nfloat m15 = 1.0;\n\nmat4 rotation = mat4(\nm0, m1, m2, m3,\nm4, m5, m6, m7,\nm8, m9, m10, m11,\nm12, m13, m14, m15\n);\n\nvec4 world_position = world * rotation * vec4(attr_position + attr_offset.xyz, 1.0);\ngl_Position = pv * world_position;\n}\n","#version 300 es\n\nprecision mediump float;\n\nout vec4 frag_color;\n\nvoid main() {\n\nfloat z = gl_FragCoord.z * 10.0;\nfrag_color = vec4(z, z, z, 1.0);\n}\n");return{In:4,Pn:n,Yt:{Cn:t.getUniformLocation(n,"pv"),i:t.getUniformLocation(n,"world"),Ut:t.getAttribLocation(n,"attr_position"),cn:t.getAttribLocation(n,"attr_offset"),un:t.getAttribLocation(n,"attr_rotation")}}}(this.$t),this.fn=function(t){let n=s(t,"#version 300 es\n\n\nconst int MAX_LIGHTS = 8;\n\nuniform mat4 pv;\nuniform mat4 world;\nuniform mat4 self;\nuniform vec3 palette[16];\n\nuniform int light_count;\nuniform vec4 light_positions[MAX_LIGHTS];\nuniform vec4 light_details[MAX_LIGHTS];\n\nin vec3 attr_position;\nin vec3 attr_normal;\nin vec4 attr_offset;\nin vec4 attr_rotation;\n\nout vec4 vert_color;\n\nvoid main() {\nfloat x = attr_rotation.x;\nfloat y = attr_rotation.y;\nfloat z = attr_rotation.z;\nfloat w = attr_rotation.w;\n\nfloat x2 = x + x;\nfloat y2 = y + y;\nfloat z2 = z + z;\nfloat xx = x * x2;\nfloat yx = y * x2;\nfloat yy = y * y2;\nfloat zx = z * x2;\nfloat zy = z * y2;\nfloat zz = z * z2;\nfloat wx = w * x2;\nfloat wy = w * y2;\nfloat wz = w * z2;\n\nfloat m0 = 1.0 - yy - zz;\nfloat m1 = yx + wz;\nfloat m2 = zx - wy;\nfloat m3 = 0.0;\nfloat m4 = yx - wz;\nfloat m5 = 1.0 - xx - zz;\nfloat m6 = zy + wx;\nfloat m7 = 0.0;\nfloat m8 = zx + wy;\nfloat m9 = zy - wx;\nfloat m10 = 1.0 - xx - yy;\nfloat m11 = 0.0;\nfloat m12 = 0.0;\nfloat m13 = 0.0;\nfloat m14 = 0.0;\nfloat m15 = 1.0;\n\nmat4 rotation = mat4(\nm0, m1, m2, m3,\nm4, m5, m6, m7,\nm8, m9, m10, m11,\nm12, m13, m14, m15\n);\n\nvec4 world_position = world * rotation * vec4(attr_position + attr_offset.xyz, 1.0);\nvec3 world_normal = normalize((rotation * vec4(attr_normal, 0.0) * self).xyz);\ngl_Position = pv * world_position;\n\n\nvec3 color = palette[int(attr_offset[3])];\nvec3 light_acc = color * 0.1;\n\nfor (int i = 0; i < MAX_LIGHTS; i++) {\nif (light_positions[i].w == 0.0) {\nbreak;\n}\n\nvec3 light_color = light_details[i].rgb;\nfloat light_intensity = light_details[i].a;\n\nvec3 light_normal;\nif (light_positions[i].w == 1.0) {\n\nlight_normal = light_positions[i].xyz;\n} else {\nvec3 light_dir = light_positions[i].xyz - world_position.xyz;\nfloat light_dist = length(light_dir);\nlight_normal = light_dir / light_dist;\n\nlight_intensity /= (light_dist * light_dist);\n}\n\nfloat diffuse_factor = dot(world_normal, light_normal);\nif (diffuse_factor > 0.0) {\n\nlight_acc += color * diffuse_factor * light_color * light_intensity;\n}\n}\n\nvert_color = vec4(light_acc, 1.0);\n}\n\n","#version 300 es\n\nprecision mediump float;\nin vec4 vert_color;\nout vec4 frag_color;\n\nvoid main() {\nfrag_color = vert_color;\n}\n\n");return{In:4,Pn:n,Yt:{Cn:t.getUniformLocation(n,"pv"),i:t.getUniformLocation(n,"world"),Ht:t.getUniformLocation(n,"self"),_n:t.getUniformLocation(n,"palette"),En:t.getUniformLocation(n,"eye"),Kt:t.getUniformLocation(n,"light_positions"),Wt:t.getUniformLocation(n,"light_details"),Ut:t.getAttribLocation(n,"attr_position"),qt:t.getAttribLocation(n,"attr_normal"),cn:t.getAttribLocation(n,"attr_offset"),un:t.getAttribLocation(n,"attr_rotation")}}}(this.$t),this.gi=function(t){let n=t.createBuffer();t.bindBuffer(vn,n),t.bufferData(vn,Wn,dn);let i=t.createBuffer();t.bindBuffer(vn,i),t.bufferData(vn,Xn,dn);let o=t.createBuffer();t.bindBuffer(vn,o),t.bufferData(vn,Dn,dn);let e=t.createBuffer();t.bindBuffer(vn,e),t.bufferData(vn,Hn,dn);let r=t.createBuffer();return t.bindBuffer(gn,r),t.bufferData(gn,Nn,dn),{jt:n,Hi:Wn,Ot:i,Ni:Xn,Gi:o,$i:Dn,an:e,ji:Hn,Jt:r,Ui:Nn,Bn:Nn.length}}(this.$t),this.Yi=function(t){let n=t.createBuffer();t.bindBuffer(vn,n),t.bufferData(vn,Ln,dn);let i=t.createBuffer();t.bindBuffer(vn,i),t.bufferData(vn,Rn,dn);let o=t.createBuffer();t.bindBuffer(vn,o),t.bufferData(vn,Vn,dn);let e=t.createBuffer();t.bindBuffer(vn,e),t.bufferData(vn,En,dn);let r=t.createBuffer();return t.bindBuffer(gn,r),t.bufferData(gn,Kn,dn),{jt:n,Hi:Ln,Ot:i,Ni:Rn,Gi:o,$i:Vn,an:e,ji:En,Jt:r,Ui:Kn,Bn:Kn.length}}(this.$t),this.Oi=function(t){let n=t.createBuffer();t.bindBuffer(vn,n),t.bufferData(vn,ri,dn);let i=t.createBuffer();t.bindBuffer(vn,i),t.bufferData(vn,li,dn);let o=t.createBuffer();t.bindBuffer(vn,o),t.bufferData(vn,ai,dn);let e=t.createBuffer();t.bindBuffer(vn,e),t.bufferData(vn,si,dn);let r=t.createBuffer();return t.bindBuffer(gn,r),t.bufferData(gn,fi,dn),{jt:n,Hi:ri,Ot:i,Ni:li,Gi:o,$i:ai,an:e,ji:si,Jt:r,Ui:fi,Bn:fi.length}}(this.$t),this.vi=function(t){let n=t.createBuffer();t.bindBuffer(vn,n),t.bufferData(vn,Pn,dn);let i=t.createBuffer();t.bindBuffer(vn,i),t.bufferData(vn,kn,dn);let o=t.createBuffer();t.bindBuffer(vn,o),t.bufferData(vn,Cn,dn);let e=t.createBuffer();t.bindBuffer(vn,e),t.bufferData(vn,In,dn);let r=t.createBuffer();return t.bindBuffer(gn,r),t.bufferData(gn,Bn,dn),{jt:n,Hi:Pn,Ot:i,Ni:kn,Gi:o,$i:Cn,an:e,ji:In,Jt:r,Ui:Bn,Bn:Bn.length}}(this.$t),this.qi=function(t){let n=t.createBuffer();t.bindBuffer(vn,n),t.bufferData(vn,On,dn);let i=t.createBuffer();t.bindBuffer(vn,i),t.bufferData(vn,qn,dn);let o=t.createBuffer();t.bindBuffer(vn,o),t.bufferData(vn,Jn,dn);let e=t.createBuffer();t.bindBuffer(vn,e),t.bufferData(vn,Qn,dn);let r=t.createBuffer();return t.bindBuffer(gn,r),t.bufferData(gn,Zn,dn),{jt:n,Hi:On,Ot:i,Ni:qn,Gi:o,$i:Jn,an:e,ji:Qn,Jt:r,Ui:Zn,Bn:Zn.length}}(this.$t),this.mi=function(t){let n=t.createBuffer();t.bindBuffer(vn,n),t.bufferData(vn,Gn,dn);let i=t.createBuffer();t.bindBuffer(vn,i),t.bufferData(vn,$n,dn);let o=t.createBuffer();t.bindBuffer(vn,o),t.bufferData(vn,jn,dn);let e=t.createBuffer();t.bindBuffer(vn,e),t.bufferData(vn,Un,dn);let r=t.createBuffer();return t.bindBuffer(gn,r),t.bufferData(gn,Yn,dn),{jt:n,Hi:Gn,Ot:i,Ni:$n,Gi:o,$i:jn,an:e,ji:Un,Jt:r,Ui:Yn,Bn:Yn.length}}(this.$t),this.Ji=function(t){let n=t.createBuffer();t.bindBuffer(vn,n),t.bufferData(vn,ti,dn);let i=t.createBuffer();t.bindBuffer(vn,i),t.bufferData(vn,ni,dn);let o=t.createBuffer();t.bindBuffer(vn,o),t.bufferData(vn,ii,dn);let e=t.createBuffer();t.bindBuffer(vn,e),t.bufferData(vn,oi,dn);let r=t.createBuffer();return t.bindBuffer(gn,r),t.bufferData(gn,ei,dn),{jt:n,Hi:ti,Ot:i,Ni:ni,Gi:o,$i:ii,an:e,ji:oi,Jt:r,Ui:ei,Bn:ei.length}}(this.$t),this.Kt=new Float32Array(32),this.Wt=new Float32Array(32),this.Qi=[],this.Gn={Nn:a(this.$t,2048,2048)},this.h=0,this._=0}Bi(t){!function(t,n){for(let i=0;i<t.i.o.length;i++)(t.i.o[i]&Ui)===Ui&&st(t,i,n)}(this,t),Ut(this),function(t,n){for(let i=0;i<t.i.o.length;i++)(t.i.o[i]&Yi)===Yi&&ft(t,i,n)}(this,t),function(t,n){let i=[],o=[];for(let n=0;n<t.i.o.length;n++)if((t.i.o[n]&Mi)===Mi){let e=t.i.A[n],r=t.i.Tn[n];r.ct=[],r.Zi?(r.Zi=!1,D(e.i,r)):r.no?(D(e.i,r),o.push(r)):i.push(r)}for(let t=0;t<o.length;t++)G(o[t],i,i.length),G(o[t],o,t)}(this),function(t,n){for(let n=0;n<t.i.o.length;n++)(t.i.o[n]&Oi)===Oi&&ct(t,n)}(this),Ut(this),function(t,n){for(let n=0;n<t.i.o.length;n++)(t.i.o[n]&ro)===ro&&Ot(t,n)}(this)}Li(t){!function(t,n){let i=[];for(let o=0;o<t.i.o.length;o++)if((t.i.o[o]&Ji)===Ji){if(ut(t.i,o))continue;let e=t.i.zi[o];switch(e.G){case 0:e.io(o)&&i.push(o);break;case 1:e.Rt-=n,e.Rt<0&&i.push(o)}}for(let n of i){t.i.o[n]&=-1048577,0===t.i.o[n]&&t.i.u(n);let i=t.i.zi[n];i.oo&&i.oo(n),delete t.i.zi[n]}}(this,t),function(t,n){for(let n=0;n<t.i.o.length;n++)16640==(16640&t.i.o[n])&&j(t,n)}(this),function(t,n){for(let n=0;n<t.i.o.length;n++)(t.i.o[n]&Ai)===Ai&&U(t,n)}(this),function(t,n){1===t.Ft.Touch0&&(ki[0]=t.xt.Touch0X,ki[1]=t.xt.Touch0Y);for(let n=0;n<t.i.o.length;n++)16640==(16640&t.i.o[n])&&Y(t,n)}(this),function(t,n){for(let n of navigator.getGamepads())n&&(t.Ft[`pad${n.index}_axis_1`]=n.axes[0],t.Ft[`pad${n.index}_axis_2`]=n.axes[1],t.Ft[`pad${n.index}_axis_3`]=n.axes[2],t.Ft[`pad${n.index}_axis_4`]=n.axes[3]);for(let n=0;n<t.i.o.length;n++)16640==(16640&t.i.o[n])&&O(t,n)}(this),function(t,n){for(let n=0;n<t.i.o.length;n++)(t.i.o[n]&zi)===zi&&$(t,n)}(this),function(t,n){for(let i=0;i<t.i.o.length;i++)(t.i.o[i]&ui)===ui&&B(t,i,n)}(this,t),function(t,n){for(let i=0;i<t.i.o.length;i++)(t.i.o[i]&Wi)===Wi&&tt(t,i,n)}(this,t),function(t,n){for(let n=0;n<t.i.o.length;n++)if((t.i.o[n]&Ki)===Ki){let i=t.i.A[n],o=t.i.pi[n],e=t.i.A[o.Fn],r=v([0,0,0],e.i),l=g([0,0,0,0],e.i);F(i.R,i.R,r,o.yi),I(i.K,i.K,l,o.yi),i.V=!0}}(this),function(t,n){for(let i=0;i<t.i.o.length;i++)2048==(2048&t.i.o[i])&&Q(t,i,n)}(this,t),function(t,n){for(let n=0;n<t.i.o.length;n++)(t.i.o[n]&no)==no&&Nt(t,n)}(this),function(t,n){for(let i=0;i<t.i.o.length;i++)(t.i.o[i]&oo)==oo&&jt(t,i,n)}(this,t),function(t,n){for(let i=0;i<t.i.o.length;i++)(t.i.o[i]&io)==io&&$t(t,i,n)}(this,t),function(t,n){for(let i=0;i<t.i.o.length;i++)(t.i.o[i]&Gi)==Gi&&at(t,i,n)}(this,t),Ut(this),function(t,n){for(let n=0;n<t.i.o.length;n++)(t.i.o[n]&hi)===hi&&L(t,n)}(this),function(t,n){for(let i=0;i<t.i.o.length;i++)(t.i.o[i]&gi)===gi&&E(t,i,n)}(this,t),function(t,n){t.St==window.innerWidth&&t.Pt==window.innerHeight||(t.bi=!0),t.bi&&(t.St=t.Ei.width=t.Vi.width=window.innerWidth,t.Pt=t.Ei.height=t.Vi.height=window.innerHeight)}(this),function(t,n){t.Qi=[];for(let n=0;n<t.i.o.length;n++)if((t.i.o[n]&wi)===wi){let i=t.i.Un[n],o=t.i.A[n],e=i.J;if(t.bi)switch(e.G){case 0:W(e,0===i.G?t.St/t.Pt:i.Fn.v/i.Fn.g);break;case 1:X(e)}u(i.hi,o.Ht),_(i.Cn,e.J,i.hi),v(i.Kn,o.i),t.Qi.push(n)}}(this),function(t,n){t.Kt.fill(0),t.Wt.fill(0);let i=0;for(let n=0;n<t.i.o.length;n++)(t.i.o[n]&Vi)===Vi&&Z(t,n,i++)}(this),function(t,n){for(let n of t.Qi){let i=t.i.Un[n];switch(i.G){case 3:ht(t,i)}}}(this),function(t,n){for(let n of t.Qi){let i=t.i.Un[n];switch(i.G){case 0:pt(t,i);break;case 2:yt(t,i)}}}(this),function(t,n){t.kt.resetTransform(),t.kt.clearRect(0,0,t.St,t.Pt);let i=[0,0,0],o=t.i.Un[t.Qi[0]];if(o)for(let n=0;n<t.i.o.length;n++)if((t.i.o[n]&Ri)==Ri){if(v(i,t.i.A[n].i),T(i,i,o.Cn),i[2]<-1||i[2]>1)continue;t.kt.setTransform(1,0,0,1,.5*(i[0]+1)*t.St,.5*(1-i[1])*t.Pt);let e=t.i.xi[n];switch(e.G){case 0:q(t,e);break;case 2:J(t,e)}}}(this),function(t,n){let i=qt`<div>${qt`
<div
style="
position: absolute;
top: 1vmin;
left: 1vmin;
background: #000;
color: #fff;
font: 13px Arial;
"
>
<button
onclick="$(${0})"
style="
padding: 1vmin;
background: #000;
color: #fff;
border: none;
"
>
${document.fullscreenElement?"Exit Fullscreen":"Enter Fullscreen"}
</button>
</div>
`}</div>`;i!==lo&&(t.Pi.innerHTML=lo=i)}(this)}};!function(t){t.Pi.addEventListener("click",(()=>t.Pi.requestPointerLock()))}(co),function(i){i.i=new ao,i.bi=!0,t(i,[n([Gt(void 0,P([0,0,0,1],-15,180,0)),tn(1,.1,1e3)]),Gt([0,1,3],[0,1,0,0])]),t(i,[Gt(),...un(i)]),t(i,[Gt(void 0,void 0,[16,0,16]),et(i.Ki,i.vi,[1,1,0,1])]);for(let n=0;n<100;n++){let n=Zt(-8,-.5);t(i,[Gt([Zt(-8,8),0,n]),...hn(i)])}let o=.3,e=[],r=[];for(let t=0;t<1e4;t++)e.push(Zt(-8/o,8/o),.45,Zt(-4/o,4/o),Qt(0,2)),r.push(...P([0,0,0,1],0,0,0));t(i,[Gt([0,0,0],void 0,[o,o,o]),lt(i.Yi,Float32Array.from(e),Float32Array.from(r),[1,.54,0,1,.84,0])]);let l=0;var a;t(i,[Gt(),sn(null,[0,1,0,0]),cn(0,.5),n([Gt([-1.5,0,0]),n([Gt(),...an(i),_n(!0),cn(0,0)])],[Gt([-1.5,0,0]),rt(i._i,i.Ji,[1,.5,0,1])],[Gt([-1.5,.4,-.4],P([0,0,0,0],-90,0,0)),n([Gt(),sn(null,[0,1,0,0]),cn(0,5),n([Gt([0,0,.3]),(a=(t,n)=>l=n,(t,n)=>{a(0,n)})])])])]);{let o=t(i,[Gt(),mn(l,.1),ln(0,[1,-0,-0,0,0,0,1,0,0,-1,0,0,-0,-.701,-.428,1]),n([Gt(void 0,void 0,[.1,.1,.1]),ot(i.di,i.vi,[1,1,1,1])])]),e=t(i,[Gt(),mn(o,.08),ln(1,[1,-0,-0,0,0,.132,.991,0,0,-.991,.132,0,-0,-1.1,-.285,1]),n([Gt(void 0,void 0,[.1,.1,.1]),ot(i.di,i.vi,[1,1,1,1])])]),r=t(i,[Gt(),mn(e,.06),ln(2,[1,-0,-0,0,0,0,1,0,0,-1,0,0,-0,-1.492,-.487,1]),n([Gt(void 0,void 0,[.1,.1,.1]),ot(i.di,i.vi,[1,1,1,1])])]),a=t(i,[Gt(),mn(r,.04),ln(3,[-1,-0,-0,0,0,.137,-.991,0,0,-.991,-.137,0,-0,-2.009,.214,1]),n([Gt(void 0,void 0,[.1,.1,.1]),ot(i.di,i.vi,[1,1,1,1])])]);t(i,[Gt(),mn(a,.02),ln(4,[-1,0,-0,0,0,-.204,-.979,0,-0,-.979,.204,0,-0,-2.224,1.021,1]),n([Gt(void 0,void 0,[.1,.1,.1]),ot(i.di,i.vi,[1,1,1,1])])])}}(co),co.Ci(),window.$=e.bind(null,co),window.game=co}();
</script>
